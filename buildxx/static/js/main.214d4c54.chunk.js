(this["webpackJsonpVeto-react"]=this["webpackJsonpVeto-react"]||[]).push([[0],{520:function(e,t,n){},738:function(e,t,n){},831:function(e,t,n){},938:function(e,t,n){},955:function(e,t){},998:function(e,n,c){"use strict";c.r(n);var r=c(2),a=c.n(r),i=(c(520),c(81)),s=c.n(i),l=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1064)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},d=c(10),o=c(24),u=c(33),j=c(40),b=c(69),m=c(71),O=c(4),x=c(1),v=function(e){var t=e.title,n=e.route,c=Object(o.h)().pathname==n;return Object(x.jsx)("li",{class:"nav-item",children:Object(x.jsxs)(d.b,{as:d.c,to:n,class:"text-white nav-link ".concat(c?"active":""),children:[Object(x.jsx)("i",{class:"far fa-circle nav-icon"}),Object(x.jsx)("p",{children:t})]})})},h=function(e){var t=e.children,n=e.title,c=Object(r.useState)(!1),a=Object(O.a)(c,2),i=a[0];a[1];return Object(x.jsxs)("li",{as:d.c,class:"nav-item ".concat(i?"menu-is-opening":null," menu-open"),children:[Object(x.jsxs)("a",{href:"#",class:"nav-link",children:[Object(x.jsx)("i",{class:"nav-icon fas fa-tachometer-alt"}),Object(x.jsxs)("p",{children:[n,Object(x.jsx)("i",{className:"right fas fa-angle-left"})]})]}),Object(x.jsx)("ul",{className:"nav nav-treeview",style:{display:"block"},children:t})]})};var p="/tdb-depot-magasin",f="/tdb-vente-cbv",g="/tdb-facture",N="/create-product",y="/products",C="/perimes",q="/rupture",A="/credit/normal",S="/credit/vaccinateur",E="/direct",w="/parametres",P="/product/fournisseur",V="/product/category",R="/entree",F="/sortie",D="/bon/sortie",B="/nouvelle/facture",M="/list/approv",T="/signin",k="/signup",I="/vendeur",_="/admin",Q="/historique/sortie/cva",L="/historique/vente/vendeur/:type",H="/historique/vente/admin/vendeur",U="/etat/stock/magasin",Y="/corrections",z="/historique/corrections",K="/fournisseurs/list",G="/add-fournisseur",W="/categories/list",J="/add-categories",X="/emprunteurs/list",Z="/add-emprunteurs",$="/vaccinateurs/list",ee="/add-vaccinateurs",te="/historique-admin/vente/vendeur/:type",ne=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.navigation,e.title),c=(e.titleShort,this.props.searchbarFilter,this.props.homeTo);return t||(t=[Object(x.jsx)("div",{children:"No content"})]),t.length||(t=[t]),n.length||(n=[n]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{class:"wrapper position-relative",children:[Object(x.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(x.jsx)("h4",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary",style:{maxHeight:"100%",overflow:"auto"},children:[Object(x.jsx)(d.b,{to:c,className:"brand-link border-0",children:Object(x.jsx)("span",{className:"ml-4 brand-text font-weight-light text-center text-uppercase",children:n})}),Object(x.jsx)("div",{class:"sidebar",children:Object(x.jsx)("nav",{class:"mt-2",children:Object(x.jsxs)("ul",{class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:[Object(x.jsx)(v,{title:"Tableau de bord",route:"/"}),Object(x.jsxs)(h,{title:"Factures && Produits",children:[Object(x.jsx)(v,{title:"Factures",route:M}),Object(x.jsx)(v,{title:"Produits",route:y})]}),Object(x.jsxs)(h,{title:"D\xe9pot",children:[Object(x.jsx)(v,{title:"Bon de sortie",route:D}),Object(x.jsx)(v,{title:"Historique de sortie",route:F}),Object(x.jsx)(v,{title:"Credit",route:A}),Object(x.jsx)(v,{title:"Vaccinateur",route:S})]}),Object(x.jsxs)(h,{title:"Magasin",children:[Object(x.jsx)(v,{title:"Depot vers Magasin",route:_}),Object(x.jsx)(v,{title:"Historique de 'D\xe9p\xf4t vers Magasin'",route:Q})]}),Object(x.jsxs)(h,{title:"Correction",children:[Object(x.jsx)(v,{title:"Ajouter une correction",route:Y}),Object(x.jsx)(v,{title:"Historique de correction",route:z})]}),Object(x.jsxs)(h,{title:"Vente",children:[Object(x.jsx)(v,{title:"Effectuer une vente",route:"/vendre/in/admin"}),Object(x.jsx)(v,{title:"Etat de stock magasin",route:U}),Object(x.jsx)(v,{title:"Historique de vente du magasin",route:"/historique-admin/vente/vendeur/vente-cva"}),Object(x.jsx)(v,{title:"Cr\xe9dit",route:"/historique-admin/vente/vendeur/credit-cva"})]}),Object(x.jsxs)(h,{title:"Parametres",children:[Object(x.jsx)(v,{title:"Categories",route:W}),Object(x.jsx)(v,{title:"Fournisseurs",route:K}),Object(x.jsx)(v,{title:"Demandeurs de credit",route:X}),Object(x.jsx)(v,{title:"Vaccinateurs",route:$})]})]})})})]}),Object(x.jsx)("div",{children:t})]})})}}]),n}(a.a.PureComponent);ne.defaultProps={children:null,title:["Admin","LTE"],browserTitle:null,theme:"blue",footer:null,sidebar:void 0,homeTo:"/",searchbarFilter:!1};var ce=ne,re=c(12),ae=(c(529),c.p,c(738),c(18)),ie=c.n(ae);c(1061);var se=c(3),le=c(70),de=c.n(le);function oe(e){var t=e.children,n=e.title,c=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{class:"content-header p-2 shadow-sm bg-white",children:Object(x.jsx)("div",{class:"container-fluid",children:Object(x.jsxs)("div",{class:"row",children:[Object(x.jsx)("div",{class:"col-sm-6",children:Object(x.jsx)("h4",{class:"mt-2 text-uppercase",children:n})}),Object(x.jsx)("div",{class:"col-sm-6",children:Object(x.jsxs)("ol",{class:"breadcrumb float-sm-right",children:[Object(x.jsx)("li",{class:"breadcrumb-item",children:Object(x.jsx)(d.b,{to:"/",children:"Accueil"})}),t]})})]})})}),Object(x.jsx)("div",{className:"mb-1",children:Object(x.jsxs)("button",{type:"button",onClick:function(){return c.goBack()},className:"btn btn-link",children:["<<"," Revenir en arriere"]})})]})})}var ue=a.a.memo(oe,de.a);function je(e){var t=e.title;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("li",{class:"breadcrumb-item active",children:t})})}var be=a.a.memo(je,de.a);function me(e){var t=e.children;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{class:"content-wrapper",children:t})})}var Oe=a.a.memo(me,de.a);function xe(e){var t=e.children;return Object(x.jsx)("section",{class:"content",children:Object(x.jsx)("div",{class:"container-fluid",children:t})})}var ve=a.a.memo(xe),he=(c(252),c(152)),pe=c.n(he),fe=c(26);c(512);var ge=function(e){var t=new Date(e),n=t.getDate(),c=t.getMonth(),r=t.getFullYear();return" ".concat(n," ").concat(["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","Decembre"][c]," ").concat(r)},Ne=function(e){return new Intl.NumberFormat("fr-MG",{style:"currency",currency:"MGA"}).format(e)};function ye(e){return e.toString().replace(/\s/g,"").toLowerCase()}var Ce=function(e,t){if(ye(e).includes(ye(t)))return!0};var qe=function(e){var t=e.date,n=new Date(t).toLocaleString("fr-FR",{weekday:"short"}),c=new Date(t).getDate();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{style:{height:"100%"},className:"sam."==n?" bg-warning text-white text-center mr-2":"bg-dark text-center mr-2",children:c})})},Ae=function(e){var t=e.flat,n=(e.gr,e.quantityb,e.quantityc,e.quantitycond,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a=(r.hasOwnProperty("id")&&r.quantityBruteCVA,r.hasOwnProperty("id")&&r.quantityCCCVA,0),i=0,s=0;return c?(a=c.map((function(e){return 1*e.quantityParProduct})).reduce((function(e,t){return e+t}),0),i=c.map((function(e){return e.qttByCC})).reduce((function(e,t){return e+t}),0),s=c.map((function(e){return e.qttbylitre})).reduce((function(e,t){return e+t}),0)):(a=0,i=0,s=0),Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:0==c.length?"text-center p-1":"text-center bg-secondary p-1 text-white",children:0!=s?s:"-"}),Object(x.jsx)("td",{className:0==c.length?"text-center p-1":"text-center bg-primary p-1 text-white",children:0!=a?a:"-"}),Object(x.jsx)("td",{className:0==c.length?"text-center  p-1":"text-center  bg-warning p-1",children:0!=i?i:"-"})]})})},Se=function(e,t,n,c){return e.filter((function(e){var r=new Date(e[t]);return ie()(r).isBetween(n,c,"days","[]")}))},Ee=function(e,t){var n;return Object(re.a)(new Set((n=[]).concat.apply(n,Object(re.a)(e.map((function(e){return e[t]}))))))},we=c(7),Pe=c(56),Ve=c.n(Pe),Re=c(156),Fe=c(771),De=c(774);function Be(e,t,n,c){var r=Fe(e).toUpperCase(),a=n.toUpperCase(),i=r+"_"+a+"_START",s=r+"_"+a+"_SUCCESS",l=r+"_"+a+"_ERROR",d=n+"Start",o=n+"Success",u=n+"Error";t[i]=i,t[s]=s,t[l]=l,c.addAlias&&(t[d]=i,t[o]=s,t[u]=l)}var Me=function(e,t){if(null==e)throw new Error("Expected resource");if(null==(t=t||{}).addAlias&&(t.addAlias=!0),""==(e=De(e)))throw new Error("Expected resource");var n={};return Be(e,n,"get",t),Be(e,n,"fetch",t),Be(e,n,"create",t),Be(e,n,"update",t),Be(e,n,"delete",t),n},Te=c(153);function ke(e,t){return e.resourceName+"."+t}var Ie=function(e,t,n){var c=ke(e,t);if(Te(Array,n))throw new TypeError(c+": Expected record not to be an array")};var _e=function(e,t){if(null==e)throw new Error("actionCreatorsFor: Expected resourceName");t=t||function(e){return{key:"id",resourceName:e}}(e),t=Ve()(t,{resourceName:e});var n=Me(e);function c(e,t){Re(null!=t,"Expected error in "+e)}function r(e,n){Re(null!=n,"Expected record in "+e),Ie(t,"createStart",n)}return{getStart:function(e){return{data:e,type:n.getStart}},getSuccess:function(e,t){return Re(null!=e,"Expected record in getSuccess"),{data:t,records:e,type:n.getSuccess}},getError:function(e,t){return c("getError",e),{data:t,error:e,type:n.getError}},fetchStart:function(e){return{data:e,type:n.fetchStart}},fetchSuccess:function(e,t){return function(e,t){Re(null!=t,"Expected records "+e)}("fetchSuccess",e),{data:t,records:e,type:n.fetchSuccess}},fetchError:function(e,t){return c("fetchError",e),{data:t,error:e,type:n.fetchError}},createStart:function(e,t){return r("createStart",e),{data:t,record:e,type:n.createStart}},createSuccess:function(e,t,c){return r("createSuccess",e),{cid:t,data:c,record:e,type:n.createSuccess}},createError:function(e,t,a){var i="createError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.createError}},updateStart:function(e,t){return r("updateStart",e),{data:t,record:e,type:n.updateStart}},updateSuccess:function(e,t){return r("updateSuccess",e),{data:t,record:e,type:n.updateSuccess}},updateError:function(e,t,a){var i="updateError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.updateError}},deleteStart:function(e,t){return r("deleteStart",e),{data:t,record:e,type:n.deleteStart}},deleteSuccess:function(e,t){return r("deleteSuccess",e),{data:t,record:e,type:n.deleteSuccess}},deleteError:function(e,t,a){var i="deleteError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.deleteError}}}},Qe={DEFAULT_KEY:"id",STORE_LIST:"STORE_LIST",STORE_MAP:"STORE_MAP",REDUCER_NAMES:{CREATE_ERROR:"createError",CREATE_START:"createStart",CREATE_SUCCESS:"createSuccess",DELETE_ERROR:"deleteError",DELETE_START:"deleteStart",DELETE_SUCCESS:"deleteSuccess",FETCH_SUCCESS:"fetchSuccess",GET_SUCCESS:"getSuccess",UPDATE_ERROR:"updateError",UPDATE_START:"updateStart",UPDATE_SUCCESS:"updateSuccess"},SPECIAL_KEYS:{BUSY:"busy",CLIENT_GENERATED_ID:"_cid",DELETED:"deleted",PENDING_CREATE:"pendingCreate",PENDING_UPDATE:"pendingUpdate"}};var Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;if(null==e)throw new Error("reducersFor: Expected resourceName");var r={key:Qe.DEFAULT_KEY,resourceName:e},a=Pe(r,t);return function(t,r){if(t=t||n,null==r)throw new Error(e+" reducers: Expected action");var i=Me(e),s=r.record;switch(r.type){case i.fetchSuccess:return c.fetchSuccess(a,t,r.records,n,r.data&&r.data.replace);case i.getSuccess:return c.getSuccess(a,t,r.records,n,r.data&&r.data.replace);case i.createStart:return c.createStart(a,t,s);case i.createSuccess:return c.createSuccess(a,t,s,r.cid);case i.createError:return c.createError(a,t,s);case i.updateStart:return c.updateStart(a,t,s);case i.updateSuccess:return c.updateSuccess(a,t,s);case i.updateError:return c.updateError(a,t,s);case i.deleteStart:return c.deleteStart(a,t,s);case i.deleteSuccess:return c.deleteSuccess(a,t,s);case i.deleteError:return c.deleteError(a,t,s);default:return t}}};function He(e,t){var n=t.config;if(!n.resourceName)throw new Error("Expected config.resourceName");var c=ke(n,e.reducerName);if(!n.key)throw new Error(c+": Expected config.key");if(!t.record)throw new Error(c+": Expected record/s");t.assertValidStore(c,t.current),e.canBeArray||Ie(t.config,e.reducerName,t.record)}var Ue=c(185);function Ye(e,t,n){var c=e.key;return Ue((function(e){var t=e[c];return n[c]===t}),t)}function ze(e){return Te(Array,e)?e:[e]}var Ke={assert:function(e,t){if(!Te(Array,t))throw new Error(e+": Expected current to be an array")},remove:Ye,merge:function(e,t,n){t=ze(t);var c={},r={},a=e.slice(0);return e.forEach((function(e,t){var a=e[n];if(null==a)throw new Error("Expected record to have "+n);c[a]=e,r[a]=t})),t.forEach((function(e){var t=e[n];c[t]?a[r[t]]=e:(r[t]=a.length,a.push(e)),c[t]=e})),a}};function Ge(e,t,n,c){He(e,{assertValidStore:Ke.assert,config:t,current:n,record:c})}var We={reducerName:Qe.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var Je=c(8);function Xe(e){var t,n=(t={},Object(Je.a)(t,Qe.SPECIAL_KEYS.BUSY,!0),Object(Je.a)(t,Qe.SPECIAL_KEYS.PENDING_CREATE,!0),t);return Pe(e,n)}var Ze={reducerName:Qe.REDUCER_NAMES.CREATE_START,canBeArray:!1};var $e={reducerName:Qe.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var et=c(186),tt=c(486);function nt(e,t,n){return tt((function(e){return e[t]===n}),e)}var ct={reducerName:Qe.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};function rt(e){var t,n=(t={},Object(Je.a)(t,Qe.SPECIAL_KEYS.DELETED,!0),Object(Je.a)(t,Qe.SPECIAL_KEYS.BUSY,!0),t);return Pe(e,n)}var at={reducerName:Qe.REDUCER_NAMES.DELETE_START,canBeArray:!1};var it={reducerName:Qe.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var st=c(487),lt=c(488),dt=function(e,t,n){var c=st(e.key);if(!lt(c,n))throw new Error(t+": Expected all records to have a value for the store's key `"+e.key+"`")},ot=Qe.REDUCER_NAMES.FETCH_SUCCESS,ut={reducerName:ot,canBeArray:!0};var jt={reducerName:Qe.REDUCER_NAMES.GET_SUCCESS,canBeArray:!0};var bt=c(273);function mt(e){return bt(Qe.SPECIAL_KEYS.BUSY,e)}var Ot={reducerName:Qe.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};function xt(e){var t,n=(t={},Object(Je.a)(t,Qe.SPECIAL_KEYS.BUSY,!0),Object(Je.a)(t,Qe.SPECIAL_KEYS.PENDING_UPDATE,!0),t);return Pe(e,n)}var vt={reducerName:Qe.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var ht={reducerName:Qe.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var pt={createError:function(e,t,n){return Ge(We,e,t,n),Ye(e,t,n)},createStart:function(e,t,n){return Ge(Ze,e,t,n),Xe(n),t},createSuccess:function(e,t,n,c){Ge($e,e,t,n);var r=e.key,a=!1,i=t.map((function(e){var t=e[r];if(null==t)throw new Error("Expected record to have "+r);return t===n[r]||null!=c&&c===t?(a=!0,n):e}));return a||(i=i.concat([n])),i},deleteError:function(e,t,n){Ge(ct,e,t,n);var c=e.key,r=nt(t,c,n[c]);return r=et(["deleted","busy"],r),Ke.merge(t,r,c)},deleteStart:function(e,t,n){Ge(at,e,t,n);var c=e.key,r=nt(t,c,n[c]);return r=rt(r),Ke.merge(t,r,c)},deleteSuccess:function(e,t,n){Ge(it,e,t,n);var c=e.key,r=n[c];return Ue((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ge(ut,e,t,n),n=ze(n),dt(e,ot,n),Ke.merge(r?c:t,n,e.key)},updateError:function(e,t,n){Ge(Ot,e,t,n);var c=e.key,r=nt(t,c,n[c]);return null==r?t:(r=mt(r),Ke.merge(t,r,c))},updateStart:function(e,t,n){Ge(vt,e,t,n);var c=[xt(n)];return Ke.merge(t,c,e.key)},updateSuccess:function(e,t,n){return Ge(ht,e,t,n),Ke.merge(t,n,e.key)},getSuccess:function(e,t,n,c){return Ge(jt,e,t,n),n=ze(n)}};var ft={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=Pe(pt,n);return Le(e,t,[],c)}};var gt={assert:function(e,t){if(!Te(Object,t))throw new Error(e+": Expected current to be an object")},merge:function(e,t,n){var c=n[e.key];return Pe(t,Object(Je.a)({},c,n))},remove:function(e,t,n){var c=n[e.key];return et([c],t)}};function Nt(e,t,n,c){He(e,{assertValidStore:gt.assert,config:t,current:n,record:c})}var yt={reducerName:Qe.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var Ct={reducerName:Qe.REDUCER_NAMES.CREATE_START,canBeArray:!1};var qt=c(489),At=c(490),St={reducerName:Qe.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var Et={reducerName:Qe.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};var wt={reducerName:Qe.REDUCER_NAMES.DELETE_START,canBeArray:!1};var Pt={reducerName:Qe.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var Vt=c(352),Rt=c(264),Ft={reducerName:Qe.REDUCER_NAMES.GET_SUCCESS,canBeArray:!0};var Dt=Qe.REDUCER_NAMES.FETCH_SUCCESS,Bt={reducerName:Dt,canBeArray:!0};var Mt={reducerName:Qe.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};var Tt={reducerName:Qe.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var kt={reducerName:Qe.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var It={createError:function(e,t,n){return Nt(yt,e,t,n),gt.remove(e,t,n)},createStart:function(e,t,n){return Nt(Ct,e,t,n),Xe(n),t},createSuccess:function(e,t,n,c){Nt(St,e,t,n);var r=n[e.key],a=qt(r),i=bt(c,t);return At(a,n,i)},deleteError:function(e,t,n){Nt(Et,e,t,n);var c=n[e.key],r=t[c];return null==r?t:(r=et(["deleted","busy"],r),Pe(t,Object(Je.a)({},c,r)))},deleteStart:function(e,t,n){Nt(wt,e,t,n);var c=t[n[e.key]];return null==c?t:(c=rt(c),gt.merge(e,t,c))},deleteSuccess:function(e,t,n){Nt(Pt,e,t,n);var c=e.key,r=n[c];return Ue((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Nt(Bt,e,t,n),n=ze(n),dt(e,Dt,n);var a=Vt(Rt(e.key),n);return Pe(r?c:t,a)},getSuccess:function(e,t,n,c){return Nt(Ft,e,t,n),n=ze(n)},updateError:function(e,t,n){Nt(Mt,e,t,n);var c=t[n[e.key]];return null==c?t:(c=mt(c),gt.merge(e,t,c))},updateStart:function(e,t,n){Nt(Tt,e,t,n);var c=xt(n);return gt.merge(e,t,c)},updateSuccess:function(e,t,n){return Nt(kt,e,t,n),gt.merge(e,t,n)}};var _t={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=Pe(It,n);return Le(e,t,{},c)}},Qt={actionCreatorsFor:_e,actionTypesFor:Me,constants:Qe,List:ft,Map:_t},Lt=c(174),Ht=c.n(Lt),Ut=c(491),Yt=c(170),zt=c.n(Yt),Kt=c(46),Gt=c.n(Kt),Wt=JSON.parse(localStorage.getItem("user-infos")),Jt=(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL,function(){return{Accept:"application/json","Content-Type":"application/json",Authorization:Wt&&Wt.token?Wt.token:{}}}),Xt={code:"INTERNAL_ERROR",message:"Quelque chose s'est mal pass\xe9. Veuillez v\xe9rifier votre connexion Internet ou contacter notre support.",status:503,data:{}},Zt=zt.a;Zt.interceptors.request.use((function(e){if(!e.headers.Authorization){var t=JSON.parse(localStorage.getItem("user-infos"));(null===t||void 0===t?void 0:t.token)&&(Zt.defaults.headers.common.Authorization="".concat(null===t||void 0===t?void 0:t.token))}return e}),(function(e){return console.log(e)})),Zt.interceptors.response.use((function(e){return Gt.a.isUndefined(e)?[]:e}),(function(e){return console.log(e)}));var $t=function(e,t,n,c){return new Promise((function(n,r){var a=c;Zt({url:"".concat(t),method:e,headers:Jt(),params:"get"==e?c:void 0,data:"get"!==e?a:void 0}).then((function(e){Gt.a.isUndefined(e)?n([]):n(e.data)}),(function(e){var t,n,c,a,i;if(null===e||void 0===e?void 0:e.response){if(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)r(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error);else if(null===e||void 0===e||null===(c=e.response.data)||void 0===c?void 0:c.errors){var s;r(null===e||void 0===e||null===(s=e.response.data)||void 0===s?void 0:s.errors)}}else r(Xt)}))}))},en=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $t.apply(void 0,["get"].concat(t))},tn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $t.apply(void 0,["post"].concat(t))},nn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $t.apply(void 0,["put"].concat(t))},cn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $t.apply(void 0,["delete"].concat(t))},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?e[t]||e[Object(Ut.singular)(t)]:e;return Ht.a.camelizeKeys(n)},an=function(e,t,n,c,r){return Object(we.a)(Object(we.a)({},e),{},{records:(a=e.records,Object(Kt.isArray)(a)?a:[a]),receivedAt:new Date,success:r||"",totalItems:t,totalPages:n,currentPage:c});var a},sn=function(e){return Object(we.a)(Object(we.a)({},e),{},{records:e.records,receivedAt:new Date})},ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(i){var s=Qt.actionCreatorsFor(e),l=n.path||Ht.a.decamelize(e),d=n.replace?{replace:n.replace}:void 0,o=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return i(s.getStart()),en("".concat(o,"/").concat(l,"/").concat(t),!1,c,n).then((function(e){i(sn(s.getSuccess(rn(e),d))),r&&r(rn(e))})).catch((function(e){e.response?(a&&a(e.response),i(s.getError(null===e||void 0===e?void 0:e.response.data.error))):(a&&a(e),i(s.getError(e)))}))}},dn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=t.path||Ht.a.decamelize(e),l=t.replace?{replace:t.replace}:void 0,d=t.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.fetchStart()),en("".concat(d,"/").concat(s),!1,n,t).then((function(e){if(e.hasOwnProperty("data")){var t=e.data;a(an(i.fetchSuccess(rn(t,"rows"),l),t.totalItems,t.totalPages,t.currentPage)),c&&c(rn(t,"rows"))}else e.hasOwnProperty("rows")?(a(an(i.fetchSuccess(rn(e,"rows"),l),e.totalItems,e.totalPages,e.currentPage)),c&&c(rn(e,"rows"))):(a(an(i.fetchSuccess(rn(e),l),null,null,null)),c&&c(rn(e)))})).catch((function(e){e.response?(r&&r(e.response),a(i.fetchError(null===e||void 0===e?void 0:e.response.data.error))):(r&&r(e),a(i.fetchError(e)))}))}},on=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=n.path||Ht.a.decamelize(e),l=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.createStart(t)),tn("".concat(l,"/").concat(s),n.hasFile,t,{replace:!0}).then((function(e){a(i.createSuccess(t,e.id,{receivedAt:new Date})),c&&c(t)})).catch((function(e){var n,c;e?(a(i.createError(e,t)),r&&r(e)):e.message?(a(i.createError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(r&&r(null===e||void 0===e?void 0:e.response.data.message),a(i.createError(null===e||void 0===e?void 0:e.response.data.message,t)))}))}},un=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=n.path||[Ht.a.decamelize(e),t.id].join("/"),l=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.updateStart(t)),nn("".concat(l,"/").concat(s),n.hasFile,t,n).then((function(e){a(i.updateSuccess(t,t.id,{receivedAt:new Date})),c&&c(t)})).catch((function(e){var n,c;e?(a(i.updateError(e,t)),r&&r(e)):e.message?(a(i.updateError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(a(i.updateError(null===e||void 0===e?void 0:e.response.data.message,t)),r&&r(null===e||void 0===e?void 0:e.response.data.message))}))}},jn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=Qt.actionCreatorsFor(e),s=n.path||[Ht.a.decamelize(e),t.id].join("/"),l=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.deleteStart(t)),cn("".concat(l,"/").concat(s),!1,t,n).then((function(){a(i.deleteSuccess(t,{receivedAt:new Date})),c&&c(t)})).catch((function(e){a(i.deleteError(e,t)),r&&r(e)}))}},bn=c(110),mn={isFetching:!1,lastUpdatedAt:null,error:null,success:null},On=function(e){var t=Qt.actionTypesFor(e);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case t.createStart:return{isLoading:!0,error:null,success:""};case t.createError:return{isLoading:!1,error:n.error,success:n.success};case t.createSuccess:return Object(we.a)(Object(we.a)({},n.payload),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt});case t.createFailed:return Object(we.a)(Object(we.a)({},n.payload),{},{isLoading:!1,error:n.error,success:""});case t.updateStart:return Object(we.a)(Object(we.a)({},e),{},{isLoading:!0,error:null,success:""});case t.updateError:return{isLoading:!1,error:n.error,success:""};case t.updateSuccess:return Object(we.a)(Object(we.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt});case t.updateFailed:return Object(we.a)(Object(we.a)({},e),{},{isLoading:!1,error:n.error,success:n.success});case t.destroyStart:return Object(we.a)(Object(we.a)({},e),{},{isLoading:!0,error:null,success:""});case t.destroySuccess:return Object(we.a)(Object(we.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt});case t.deleteError:return{isLoading:!1,error:n.error,success:""};case t.destroyFailed:return Object(we.a)(Object(we.a)({},e),{},{isLoading:!1,error:n.error,success:""});case t.getStart:return Object(we.a)(Object(we.a)({},e),{},{isLoading:!0,didInvalidate:!1,isFetching:!0,error:null,success:""});case t.getSuccess:return Object(we.a)(Object(we.a)({},e),{},{isFetching:!1});case t.getError:return Object(we.a)(Object(we.a)({},e),{},{isFetching:!1,error:n.error});case t.fetchStart:return Object(we.a)(Object(we.a)({},e),{},{isFetching:!0,error:null,success:""});case t.fetchSuccess:return Object(we.a)(Object(we.a)({},e),{},{isFetching:!1,success:n.success,totalPages:n.totalPages,totalItems:n.totalItems,currentPage:n.currentPage,lastUpdatedAt:n.receivedAt,error:null});case t.fetchError:return Object(we.a)(Object(we.a)({},e),{},{isFetching:!1,isLoading:!1,error:n.error});default:return Object(we.a)({},e)}}},xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return Qt.Map.reducersFor(e,t)(n,c)}},vn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(bn.b)({items:xn(e,t),meta:On(e,t)})};function hn(e,t){return{get:function(t){return ln(e,t,{replace:!0})},getWithPath:function(t,n){return ln(e,t,{path:n,replace:!0})},create:function(t,n){return on(e,t,n)},update:function(t,n){return un(e,t,n)},destroy:function(t,n){return jn(e,t,n)},fetch:function(t,n){return dn(e,t,n)},createTransaction:function(t,n){return on(e,t,{path:n})},updateTransaction:function(t,n){return un(e,t,{path:n})},deleteTransaction:function(t,n){return jn(e,t,{path:n})}}}function pn(e){return{value:function(t){return t[e].items?Object(Kt.values)(t[e].items):[]},item:function(t){return t[e].items?t[e].items:[]},meta:function(t){return t[e].meta}}}var fn=function(e,t,n){return dn("commandes",{path:"/get-tdb-commande?type=".concat(e,"&deb=").concat(t,"&fin=").concat(n),replace:!0})},gn=function(e,t,n){return dn("commandes",{path:"/vente-cva?deb=".concat(e,"&fin=").concat(t,"&type=").concat(n),replace:!0})},Nn=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"text-center  p-1",children:"-"}),Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})]})})},yn=function(){var e=Object(o.h)(),t=function(t){return e.pathname==t};return Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsx)(d.b,{className:"btn btn-".concat(t("/")?"success":"default"," text-uppercase mr-2"),to:"/",children:"Journal Vente du magasin"}),Object(x.jsx)(d.b,{className:"btn btn-".concat(t(g)?"success":"default"," text-uppercase mr-2"),to:g,children:"Journal de facturation"}),Object(x.jsx)(d.b,{className:"btn btn-".concat(t(f)?"success":"default"," text-uppercase mr-2"),to:f,children:"Journal de Vente CBV"}),Object(x.jsx)(d.b,{className:"btn btn-".concat(t(p)?"success":"default"," text-uppercase mr-2"),to:p,children:"Journal de Depot vers magasin"})]})};var Cn=function(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),l=Object(O.a)(s,2),d=(l[0],l[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(se.d)(pn("commandes").value)),V=Object(se.d)(pn("commandes").meta),R=Object(se.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&h&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ie()(j),ie()(h))),d(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ie()(j),ie()(h))),R(fn("vente-cva",j,h)))}),[j,h]),Object(r.useEffect)((function(){V.isFetching||S(Se(P,"dateCom",j,h))}),[V]);var F,D,B=Ee(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityParProduct,l=t.quantityBruteCVA,d=t.quantityCCCVA,o=t.qttByCC,u=t.qttbylitre,j=e.find((function(e){return e.id===n}));return j?(j.quantityParProduct=parseInt(j.quantityParProduct)+parseInt(s),j.qttByCC=parseInt(j.qttByCC)+parseInt(o),j.qttbylitre=parseInt(j.qttbylitre)+parseInt(u)):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBruteCVA:l,quantityCCCVA:d,quantityParProduct:s,qttByCC:o,qttbylitre:u}),e}),[]).sort((function(e,t){return e.id>t.id})),M=function(e,t){var n;return Object(re.a)(new Set((n=[]).concat.apply(n,Object(re.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Journal de vente du magasin",children:Object(x.jsx)(be,{title:"Journal de vente du magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsx)(yn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{class:"text-uppercase my-1",children:["Journal de vente du magasin"," "]}),Object(x.jsxs)("span",{children:["Du: ",ge(j)," Au ",ge(h)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(pe.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsxs)("div",{className:"bg-white py-3 px-2 mb-2",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"bg-secondary px-2",style:{width:5,height:5}}),Object(x.jsx)("span",{className:" ml-2",children:": Quantit\xe9 de commande en litre (special pour les PHYTO)"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"bg-primary px-2",style:{width:5,height:5}}),Object(x.jsx)("span",{className:" ml-2",children:": Quantit\xe9 de commande en (FLACON,BOLUS,UNITE,SACHET)"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"bg-warning px-2",style:{width:5,height:5}}),Object(x.jsx)("span",{className:" ml-2",children:": Quantit\xe9 de vente en ML"})]})]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(qe,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total ML"})]}),B.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(Ae,{flat:M(T[t],"contenu"),gr:t,quantityb:e.quantityBruteCVA,quantityc:e.quantityCCCVA,quantitycond:e.condval,id:e.id}):Object(x.jsx)(Nn,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)("td",{className:"text-center",children:e.qttByCC})]})})})),0==B.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})]})]})]})})},qn=c(134),An=c.n(qn),Sn=c(224),En="REGISTER_SUCCESS",wn="REGISTER_FAIL",Pn="LOGIN_SUCCESS",Vn="LOGIN_FAIL",Rn="LOGOUT",Fn="UPDATE_STOCK_REQUEST_SUCCESS",Dn="UPDATE_STOCK_REQUEST_FAIL",Bn=function(e){var t=e.product,n=Object(r.useState)(!1),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(se.d)(pn("commandes").meta),l=Object(se.c)(),d=Object(r.useState)(1),o=Object(O.a)(d,2),u=o[0],j=o[1];Object(r.useEffect)((function(){l(hn("commandes").fetch())}),[]);return Object(x.jsxs)("tr",{className:"product-card ".concat(t.id?"":"product-loading"),style:{border:t&&a?"1px solid #a6a5a5":"",boxShadow:t&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("td",{children:t.name}),Object(x.jsx)("td",{children:t.quantityBrute+u}),Object(x.jsx)("td",{className:"d-flex justify-content-center align-items-center",children:Object(x.jsxs)("div",{class:"input-group inline-group",children:[Object(x.jsx)("div",{class:"input-group-prepend",children:Object(x.jsx)("button",{class:"btn btn-sm btn-dark btn-minus",onClick:function(){u>0&&j(u-1)},children:"-"})}),Object(x.jsx)("input",{class:"form-control quantity text-center  p-0",min:"0",name:"quantity",value:u,type:"number"}),Object(x.jsx)("div",{class:"input-group-append",children:Object(x.jsx)("button",{class:"btn btn-sm btn-dark btn-plus mr-2",onClick:function(){return j(u+1)},children:"+"})}),Object(x.jsx)("div",{class:"input-group-append ml-2"})]})}),Object(x.jsx)("td",{children:t.id&&Object(x.jsx)("button",{className:"btn btn-success  btn-sm",onClick:function(){l(function(e,t,n){return function(){var c=Object(Sn.a)(An.a.mark((function c(r){var a;return An.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,zt.a.post("http://localhost:8100/api/update-product",{productId:e,newStockBrute:t,newStockCC:n});case 3:a=c.sent,r({type:Fn,payload:a.data}),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),r({type:Dn,payload:c.t0});case 10:case"end":return c.stop()}}),c,null,[[0,7]])})));return function(e){return c.apply(this,arguments)}}()}(t.id,u,0)),l(hn("commandes").create({id:s.nextId,contenu:[t],type:"approv",sorte:"entree",vaccinateurId:null,qtteBrute:u,qtteCC:0,status:!0,emprunterId:null,dateCom:new Date})),i(!0)},children:"Modifier le stock"})})]})};function Mn(){var e=Object(se.d)(pn("products").value),t=Object(se.c)();return Object(r.useEffect)((function(){t(hn("products").fetch())}),[]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Approvisionnement",children:Object(x.jsx)(be,{title:"Approvisionnement"})}),Object(x.jsx)(ve,{children:Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"text-center",children:[Object(x.jsx)("th",{children:"Nom de l'article"}),Object(x.jsx)("th",{style:{width:"15%"},children:"Qte"}),Object(x.jsx)("th",{style:{width:"15%"},children:"Nouvel"}),Object(x.jsx)("th",{style:{width:"20%"},children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){return Object(x.jsx)(Bn,{product:e})}))})]})})]})}var Tn=c(293),kn=c(1025),In=["icon","className","filter","setData","name","value","data","placeholder","changeValue","invalid"],_n=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,i=e.filter,s=(e.setData,e.name),l=e.value,d=e.data,o=void 0===d?0:d,u=e.placeholder,j=e.changeValue,b=e.invalid,m=(Object(fe.a)(e,In),a.a.useCallback((function(e){i&&!i.test(e.target.value)||Object(Kt.isFunction)(j)&&j(e.target.value,e)}),[s]));return Object(r.useEffect)((function(){o&&j(o)}),[o]),Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(kn.a,{bg:"gray.100",boxShadow:"sm",isInvalid:b,color:"gray.700",placeholder:u,ref:t,defaultValue:l,onBlur:m})]})})),Qn=c(281),Ln=c(1055),Hn=c(1027),Un=["name","className","options","radioValue","valueKey","direction","filter","setData","changeValue","setRadio"],Yn=Object(r.forwardRef)((function(e,t){e.name;var n=e.className,c=e.options,i=e.radioValue,s=e.valueKey,l=e.direction,d=(e.filter,e.setData),o=e.changeValue,u=e.setRadio,j=Object(fe.a)(e,Un),b=Object(r.useState)(i),m=Object(O.a)(b,2),v=m[0],h=m[1],p=a.a.useState("".concat(v)),f=Object(O.a)(p,2),g=f[0],N=f[1];return a.a.useLayoutEffect((function(){o(g),d&&(d(g),h(g))}),[g]),a.a.useLayoutEffect((function(){u&&u(v)}),[v]),Object(x.jsx)(Qn.a,{onChange:N,defaultValue:"".concat(v),className:n,children:Object(x.jsx)(Ln.b,{spacing:4,direction:l,children:c.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Hn.a,Object(we.a)(Object(we.a)({name:"".concat(e.id),isChecked:e.id==v},j),{},{value:"".concat(e.id),ref:t,children:e[s]}))})}))})})})),zn=c(1028),Kn=c(276),Gn=["name","className","invalid","options","selectValue","valueKey","filter","isNumeric","emptyValue","setData","changeValue"],Wn=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,r=e.invalid,a=e.options,i=e.selectValue,s=e.valueKey,l=e.filter,d=e.isNumeric,o=void 0===d||d,u=e.emptyValue,j=void 0===u||u,b=e.setData,m=e.changeValue,O=Object(fe.a)(e,Gn);return Object(x.jsx)("div",{className:c,children:Object(x.jsxs)(zn.a,Object(we.a)(Object(we.a)({},O),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(i),isRequired:!0,name:n,isInvalid:r,onChange:function(e){l&&!l.test(e.target.value)||(Object(Kn.a)(m)&&m(o?Number(e.target.value):e.target.value,e),b&&b(o?Number(e.target.value):e.target.value))},ref:t,children:[j&&Object(x.jsx)("option",{value:"",children:"Selectionner"}),null===a||void 0===a?void 0:a.map((function(e){return Object(x.jsx)("option",{defaultChecked:"".concat(i),value:"".concat(s?e.id:e),children:s?e[s]:e})}))]}))})})),Jn=c(1029),Xn=["icon","className","filter","setData","placeholder","changeValue","invalid"],Zn=Object(r.forwardRef)((function(e,t){e.icon;var n=e.className,c=e.filter,r=e.setData,a=e.placeholder,i=e.changeValue,s=e.invalid,l=Object(fe.a)(e,Xn);return Object(x.jsx)("div",{className:n,children:Object(x.jsx)(Jn.a,Object(we.a)(Object(we.a)({bg:"gray.200",boxShadow:"sm",isInvalid:s,placeholder:a},l),{},{onChange:function(e){c&&!c.test(e.target.value)||(Object(Kn.a)(i)&&i(e.target.value,e),r&&r(e.target.value))},ref:t}))})})),$n=c(192),ec=c(1034),tc=c(168),nc=c(34),cc=c(1056),rc=c(1030),ac=c(1033),ic=c(497),sc=c.n(ic),lc=(c(831),["icon","className","filter","setData","tags","options","changeValue","invalid"]),dc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,a=(e.filter,e.setData),i=e.tags,s=e.options,l=e.changeValue,d=(e.invalid,Object(fe.a)(e,lc),Object(r.useState)(!1)),o=Object(O.a)(d,2),u=o[0],j=o[1],b=Object(r.useState)(i||[]),m=Object(O.a)(b,2),v=m[0],h=m[1],p=Object(r.useCallback)((function(e){h(v.filter((function(t,n){return n!==e}))),j(!0)}),[v]);Object(r.useLayoutEffect)((function(){u&&l(v),a&&a(v),j(!1)}),[u]);var f=Object(r.useCallback)((function(e){h([].concat(Object(re.a)(v),[e])),j(!0)}),[v]);return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(sc.a,{as:kn.a,ref:t,tags:v,suggestions:s,onDelete:p,onAddition:f})]})})),oc=["icon","className","filter","setData","name","placeholder","changeValue","invalid"],uc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.placeholder,l=e.changeValue,d=e.invalid,o=(Object(fe.a)(e,oc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(Kt.isFunction)(l)&&l(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(kn.a,{bg:"gray.100",type:"date",boxShadow:"sm",isInvalid:d,color:"gray.700",placeholder:s,ref:t,onBlur:o})]})})),jc=["name","className","invalid","isFieldArray","options","selectValue","valueKey","filter","setData","objectKey","index","inArray","changeValue","model","debug","array"],bc=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,a=e.invalid,i=e.isFieldArray,s=void 0===i||i,l=e.options,d=e.selectValue,o=e.valueKey,u=e.filter,j=e.setData,b=(e.objectKey,e.index,e.inArray,e.changeValue),m=(e.model,e.debug,e.array,Object(fe.a)(e,jc)),v=Object(r.useState)(d),h=Object(O.a)(v,2),p=(h[0],h[1]);return Object(x.jsx)("div",{className:c,children:Object(x.jsxs)(zn.a,Object(we.a)(Object(we.a)({},m),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(d),isRequired:!0,name:n,isInvalid:a,onChange:function(e){u&&!u.test(e.target.value)||(Object(Kn.a)(b)&&s&&b(Number(e.target.value,e)),j&&j(Number(e.target.value)),p(Number(e.target.value)))},ref:t,children:[Object(x.jsx)("option",{value:"",children:"Selectionner"}),l.map((function(e){return Object(x.jsx)("option",{defaultChecked:"".concat(d),value:"".concat(e.id),children:o?e[o]:e})}))]}))})})),mc=c(511),Oc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","masterKey","filtrable","callback"],xc=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,i=e.options,s=e.radioValue,l=e.valueKey,d=e.direction,o=(e.inArray,e.filter,e.setData,e.changeValue),u=e.setRadio,j=e.masterKey,b=e.filtrable,m=e.callback,v=void 0===m?null:m,h=Object(fe.a)(e,Oc),p=Object(r.useState)(s),f=Object(O.a)(p,2),g=f[0],N=(f[1],a.a.useState("".concat(g))),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(se.c)();return a.a.useEffect((function(){o(j?i.find((function(e){return e[j].id==C})):i.find((function(e){return e.id==C})))}),[C]),a.a.useLayoutEffect((function(){u&&u(g)}),[g]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Qn.a,{onChange:q,name:n,defaultValue:"".concat(g),className:c,children:Object(x.jsx)(Ln.b,{spacing:4,direction:d,children:i.map((function(e){return Object(x.jsx)(x.Fragment,{children:j?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Hn.a,Object(we.a)(Object(we.a)({},h),{},{value:"".concat(e[j].id),ref:t,children:e[j][l]})),1==b&&Object(x.jsx)(mc.a,{variant:"solid",onClick:function(){return A(v(e[j].id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Hn.a,Object(we.a)(Object(we.a)({},h),{},{value:"".concat(e.id),ref:t,children:e[l]})),1==b&&Object(x.jsx)(mc.a,{variant:"solid",onClick:function(){return A(v(e.id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]})})}))})})})})),vc=c(496),hc=c(494),pc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","filtrable"];function fc(e){var t=Object(vc.a)(e),n=t.getInputProps,c=t.getCheckboxProps,r=n(),a=c();return Object(x.jsxs)(rc.a,{as:"label",children:[Object(x.jsx)("input",Object(we.a)({},r)),Object(x.jsx)(rc.a,Object(we.a)(Object(we.a)({},a),{},{cursor:"pointer",borderWidth:"1px",borderRadius:"md",boxShadow:"md",_checked:{bg:"teal.600",color:"white",borderColor:"teal.600"},_focus:{boxShadow:"outline"},px:5,py:3,children:e.children}))]})}var gc=Object(r.forwardRef)((function(e,t){var n=e.name,c=(e.className,e.options),i=e.radioValue,s=(e.valueKey,e.direction,e.inArray,e.filter,e.setData),l=e.changeValue,d=e.setRadio,o=(e.filtrable,Object(fe.a)(e,pc),Object(r.useState)(i)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=a.a.useState("".concat(j)),v=Object(O.a)(m,2),h=v[0];v[1];a.a.useEffect((function(){l(c.find((function(e){return e.id==h}))),s&&(s(h),b(h))}),[h]),a.a.useLayoutEffect((function(){d&&d(j)}),[j]);var p=Object(hc.a)({name:n,defaultValue:1,onChange:function(e){console.log("hiii",e)}}),f=p.getRootProps,g=p.getRadioProps,N=f();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ln.a,Object(we.a)(Object(we.a)({},N),{},{children:c.map((function(e){var t=e.id,n=g({id:t});return Object(x.jsx)(fc,Object(we.a)(Object(we.a)({},n),{},{children:t}),t)}))}))})})),Nc=["icon","className","filter","setData","name","value","placeholder","changeValue","invalid"],yc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.value,l=e.placeholder,d=e.changeValue,o=e.invalid,u=(Object(fe.a)(e,Nc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(Kt.isFunction)(d)&&d(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(kn.a,{bg:"gray.100",boxShadow:"sm",type:"password",isInvalid:o,color:"gray.700",placeholder:l,ref:t,defaultValue:s,onBlur:u})]})})),Cc=c(1052),qc=["icon","className","filter","setData","name","value","label","placeholder","changeValue","invalid"],Ac=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.value,l=e.label,d=(e.placeholder,e.changeValue),o=(e.invalid,Object(fe.a)(e,qc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(Kt.isFunction)(d)&&d(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Cc.a,{colorScheme:"teal",ref:t,defaultValue:s,onChange:o,name:i,defaultIsChecked:!0,children:l})]})})),Sc=c(1050),Ec=["icon","className","filter","setData","name","value","data","min","placeholder","changeValue","invalid"],wc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,i=e.filter,s=(e.setData,e.name),l=e.value,d=e.data,o=void 0===d?0:d,u=e.min,j=void 0===u?0:u,b=(e.placeholder,e.changeValue),m=e.invalid,O=(Object(fe.a)(e,Ec),a.a.useCallback((function(e){i&&!i.test(e)||Object(Kt.isFunction)(b)&&b(Number(e))}),[s]));return Object(r.useEffect)((function(){o&&b(Number(o))}),[o]),Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Sc.c,{inputMode:"numeric",bg:"gray.100",boxShadow:"sm",color:"gray.700",isInvalid:m,name:s,ref:t,step:1,onChange:O,min:j,defaultValue:l,children:Object(x.jsx)(Sc.d,{})})]})})),Pc=["className","label","labelSize","labelWeight","tip","info","isBool","options","optional","error","name","half"],Vc=function(e){return function(t){t.className;var n=t.label,c=t.labelSize,a=void 0===c?"13px":c,i=t.labelWeight,s=void 0===i?"400":i,l=t.tip,d=t.info,o=t.isBool,u=void 0!==o&&o,j=t.options,b=t.optional,m=t.error,v=t.name,h=t.half,p=void 0!==h&&h,f=Object(fe.a)(t,Pc),g=Object(r.useState)(""),N=Object(O.a)(g,2),y=N[0],C=N[1];return Object(r.useEffect)((function(){C(n)}),[n]),Object(x.jsx)(rc.a,{style:{width:p?"50%":"100%"},children:Object(x.jsxs)($n.a,{isInvalid:!!m,children:[Object(x.jsx)(ac.a,{justifyContent:"flex-start",alignItems:"center",children:!u&&Object(x.jsx)(x.Fragment,{children:y&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ec.a,{fontSize:a,fontWeight:s,mb:1,mr:1,color:"muted.400",htmlFor:n,children:y}),l&&Object(x.jsx)(cc.a,{placement:"bottom-end",label:l,bg:"gray.800","aria-label":"Guide d'utilisation",children:Object(x.jsx)(tc.b,{fontSize:"11px",color:"gray"})}),b&&Object(x.jsxs)(nc.a.small,{color:"blue.700",children:["("," facultatif ",")"]})]})})}),Object(x.jsx)(e,Object(we.a)({invalid:!!m,options:j,name:v,label:n},f)),d&&Object(x.jsx)(nc.a.small,{my:4,color:"muted.500",fontStyle:"italic",fontWeight:"medium",children:d}),m&&Object(x.jsx)("p",{style:{color:"red"},children:m})]})})}},Rc={Input:Vc(_n),Number:Vc(wc),Radio:Vc(Yn),Select:Vc(Wn),Textarea:Vc(Zn),Tag:Vc(dc),SelectObject:Vc(bc),RadioObject:Vc(xc),RadioProduct:Vc(gc),Date:Vc(uc),Password:Vc(yc),Checkbox:Vc(Ac)},Fc=["validate","validations","children"],Dc=["name","validate"],Bc=function(e){e.validate;var t=e.validations,n=(e.children,Object(fe.a)(e,Fc));return Object(x.jsx)(Tn.c,Object(we.a)(Object(we.a)({},n),{},{enableReinitialize:!0,validationSchema:t,validateOnChange:!1,validateOnBlur:!1}))};Bc.Element=function(e){return Object(x.jsx)(Tn.b,Object(we.a)({noValidate:!0},e))},Bc.Field=Object(Kt.mapValues)(Rc,(function(e){return function(t){var n=t.name,c=t.validate,r=Object(fe.a)(t,Dc);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Tn.a,{name:n,validate:c,children:function(t){var c=t.field,a=t.form,i=a.touched,s=a.errors,l=a.setFieldValue;return Object(x.jsx)(e,Object(we.a)(Object(we.a)(Object(we.a)({},c),r),{},{name:n,mb:2,error:Object(Kt.get)(i,n)&&Object(Kt.get)(s,n),changeValue:function(e){return l(n,e)}}))}})})}})),Bc.initialValues=function(e,t){return t((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=Object(Kt.get)(e,t);return void 0===c||null===c?n:c}))};var Mc=Bc,Tc=function(){Object(o.i)().id;var e=Object(se.d)(pn("fournisseurs").value),t=Object(se.d)(pn("categories").value),n=(Object(se.d)(pn("products").meta),Object(se.c)());Object(o.g)();return Object(r.useEffect)((function(){n(hn("fournisseurs").fetch()),n(hn("categories").fetch()),n(hn("products").fetch())}),[]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Ajouter un produit",children:Object(x.jsx)(be,{title:"Ajouter un produit"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-product",enableReinitialize:!0,initialValues:{},validations:{},onSubmit:function(e,t){console.log(e)},children:Object(x.jsx)(Mc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:Object(x.jsx)("h5",{children:"Information g\xe9n\xe9rale"})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",options:t}),Object(x.jsx)(Mc.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",options:e}),Object(x.jsx)(Mc.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(x.jsx)(Mc.Field.Radio,{radioValue:"1",valueKey:"name",label:"Type d'article",name:"type",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}],direction:"row"}),Object(x.jsx)(Mc.Field.Input,{name:"prixFournisseur",label:"prix unitaire",placeholder:"prix unitaire"}),Object(x.jsx)(Mc.Field.Input,{name:"quantity",label:"Quantit\xe9",placeholder:"Quantit\xe9"}),Object(x.jsx)(Mc.Field.Input,{type:"date",name:"datePer",label:"date de peremption",placeholder:"date de peremption"})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:Object(x.jsx)("h5",{children:"Vente"})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"prixVente",label:"Prix de vente",placeholder:"prix de vente"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(x.jsx)(Mc.Field.Input,{name:"prixParCC",label:"Prix de Vente en ml",placeholder:"Prix de Vente en ml"})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"})]})]})})})})]})},kc=c(190),Ic=c(37),_c=c(1062),Qc=function(){var e,t,n,c,r,i,s,l,d=Object(o.i)().id,u=Object(se.c)(),j=Object(se.d)(pn("approvis").value);return a.a.useEffect((function(){u(hn("approvis").get(d))}),[d]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9tail du facture",children:Object(x.jsx)(be,{title:"Detail de facture"})}),Object(x.jsx)(ve,{children:Object(x.jsx)("div",{className:"bg-white p-2",children:Object(x.jsxs)(_c.a,{children:[Object(x.jsxs)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:["D\xe9tail du facture (",ge(null===(e=j[0])||void 0===e?void 0:e.dateApprov),")"]}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase my-2",children:Object(x.jsxs)("strong",{children:[Object(kc.NumberToLetter)(null===(t=j[0])||void 0===t?void 0:t.total)," ARIARY"]})}),Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[Object(x.jsx)("strong",{children:"Date Echeance"})," :"," ",ge(null===(n=j[0])||void 0===n?void 0:n.dateEcheance)]})," "]}),Object(x.jsxs)("td",{className:"mb-1",children:[Object(x.jsx)("h3",{children:"Remarque"}),Object(x.jsx)("p",{class:"text-info",children:null===(c=j[0])||void 0===c?void 0:c.remarque})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("h3",{children:[" ",Object(x.jsx)("strong",{children:"ARTICLES"})]}),null===(r=j[0])||void 0===r?void 0:r.contenu.map((function(e){return Object(x.jsxs)("div",{className:"border mb-3 p-3",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom de l'article:"}),Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Quantit\xe9:"}),Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.quantityParProduct})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:Object(x.jsx)(Ic.a,{value:null===e||void 0===e?void 0:e.prixFournisseur,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})})]})]})})),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{children:[Object(x.jsx)("strong",{children:"Remise :"})," ",null===(i=j[0])||void 0===i?void 0:i.remise," Ar"]})}),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{class:"text-uppercase",children:[Object(x.jsx)("strong",{children:"Paiement en :"}),null===(s=j[0])||void 0===s?void 0:s.typePaye]})}),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{class:"text-uppercase",children:[Object(x.jsx)("strong",{children:"Total:"}),Object(x.jsx)(Ic.a,{value:null===(l=j[0])||void 0===l?void 0:l.total,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})]})})," "]})]})})})]})},Lc=c(175);function Hc(e){var t=e.column,n=t.filterValue,c=t.preFilteredRows,r=t.setFilter;c.length;return Object(x.jsx)("input",{className:"form-control",value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Rechercher..."})}function Uc(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,c=e.setGlobalFilter,r=(t.length,a.a.useState(n)),i=Object(O.a)(r,2),s=i[0],l=i[1],d=Object(Lc.useAsyncDebounce)((function(e){c(e||void 0)}),200);return Object(x.jsx)("div",{w:200,children:Object(x.jsx)("input",{className:"form-control",value:s||"",onChange:function(e){l(e.target.value),d(e.target.value)},placeholder:"Rechercher ..."})})}function Yc(e){var t=e.columns,n=e.data,c=void 0===n?[]:n,r=e.meta,a=e.addUrl,i=e.urlName,s=e.footer,l=e.tip,d=void 0===l?"":l,o=e.filter,u=void 0===o||o,j=e.paginate,b=void 0===j||j,m=e.guide;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(zc,{columns:t,data:r.isFetching?[]:c,meta:r,addUrl:a,urlName:i,footer:s,tip:d,filter:u,paginate:b,guide:m})})}function zc(e){var t=e.columns,n=e.data,c=void 0===n?[]:n,r=e.meta,i=e.addUrl,s=e.urlName,l=e.footer,o=e.tip,u=void 0===o?"":o,j=e.filter,b=void 0===j||j,m=e.paginate,O=void 0===m||m,v=e.guide,h=t.length,p=a.a.useMemo((function(){return{Filter:Hc}}),[]),f=Object(Lc.useTable)({columns:t,data:c,defaultColumn:p,initialState:{pageIndex:0,pageSize:10}},Lc.useFilters,Lc.useGlobalFilter,Lc.useSortBy,Lc.usePagination),g=f.getTableProps,N=f.getTableBodyProps,y=f.headerGroups,C=(f.rows,f.prepareRow),q=f.preGlobalFilteredRows,A=f.setGlobalFilter,S=f.page,E=f.canPreviousPage,w=f.canNextPage,P=f.pageOptions,V=(f.pageCount,f.gotoPage),R=f.nextPage,F=f.previousPage,D=f.setPageSize,B=f.state,M=B.pageIndex,T=B.pageSize,k=B.globalFilter;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"d-flex my-2 justify-content-between align-items-center",children:[b&&Object(x.jsx)(Uc,{preGlobalFilteredRows:q,globalFilter:k,setGlobalFilter:A}),Object(x.jsx)("div",{children:i&&s&&Object(x.jsx)(d.b,{className:"btn btn-sm btn-green",variant:"solid",to:i,children:s})})]}),u&&Object(x.jsx)("h3",{children:u}),Object(x.jsxs)("table",Object(we.a)(Object(we.a)({},g()),{},{className:"table table-bordered striped",children:[Object(x.jsx)("thead",{className:"bg-thead ",children:y.map((function(e){return Object(x.jsx)("tr",Object(we.a)(Object(we.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(x.jsxs)("th",Object(we.a)(Object(we.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{isNumeric:e.isNumeric,children:[e.render("Header"),Object(x.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(x.jsx)("tbody",Object(we.a)(Object(we.a)({},N()),{},{children:r.isFetching?Object(x.jsx)("td",{colSpan:h,className:"text-center",children:Object(x.jsx)("p",{children:"Chargement des donn\xe9es en cours ...."})}):Object(x.jsxs)(x.Fragment,{children:[0==S.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:h,style:v?{textAlign:"left"}:{textAlign:"center"},children:v?Object(x.jsxs)("div",{style:{width:"100%",color:"blue.700",backgroundColor:"gray.200",padding:"10px"},children:[Object(x.jsx)("h3",{className:"py-3",children:u}),v]}):"Aucune enregistrement \xe0 afficher"})}),S.map((function(e){return C(e),Object(x.jsx)("tr",Object(we.a)(Object(we.a)({p:0},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(x.jsx)("td",Object(we.a)(Object(we.a)({fontSize:"11px"},e.getCellProps()),{},{isNumeric:e.column.isNumeric,children:e.render("Cell")}))}))}))}))]})})),l&&Object(x.jsx)("tfoot",{bg:"blue.900",children:Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:h,color:"white",children:l})})})]})),O&&Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center py-3",children:[Object(x.jsx)("div",{style:{width:"200px"},children:Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsx)("input",{className:"form-control  mr-2",type:"number",placeholder:"Page",value:M+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;V(t)}}),Object(x.jsx)("select",{className:"form-control",value:T,onChange:function(e){D(Number(e.target.value))},size:"sm",children:[5,10,20,30,40,50,100,150,250].map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)}))})]})}),Object(x.jsx)("div",{children:Object(x.jsxs)(x.Fragment,{children:["Page"," ",Object(x.jsxs)("strong",{children:[M>0?M+1:1," sur ",P.length]})," "]})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return F()},disabled:!E,children:["<<"," Pr\xe9cedent"]}),Object(x.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return R()},disabled:!w,children:["Suivant ",">>"]})]})})]})]})}var Kc=function(e){var t=e.model,n=e.entity,c=Object(se.c)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce facture ?")&&c(hn(t).deleteTransaction(n,"/delete-facture"))},children:"Supprimer"})})};function Gc(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(t),o=Object(O.a)(l,2),u=o[0],j=o[1],b=Object(r.useState)([e,t]),m=Object(O.a)(b,2),v=m[0],h=m[1],p=(Object(r.useRef)(null),Object(r.useRef)(null),Object(se.d)(pn("approvis").value)),f=Object(se.d)(pn("approvis").meta),g=Object(se.c)();Object(r.useEffect)((function(){g(hn("approvis").fetch())}),[]),Object(r.useEffect)((function(){null!==v?(v[0]&&s(v[0]),v[1]&&j(v[1])):(s(e),j(t))}),[v]),Object(r.useEffect)((function(){g(function(e,t){return dn("approvis",{path:"/get-approv-by-date?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var N=a.a.useMemo((function(){return[{Header:"#",accessor:"id"},{Header:"Produit",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"200px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Date du facture",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-primary",children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateApprov)})})}},{Header:"Date echeance",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-warning",children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateEcheance)})})}},{Header:"Mode de paiement",accessor:"typePaye"},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(null===(t=e.row.original)||void 0===t?void 0:t.total)})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/approvis/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(d.b,{to:"/editer/facture/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(Kc,{model:"approvis",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Factures",children:Object(x.jsx)(be,{title:"Factures"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Factures"}),Object(x.jsx)("p",{children:"".concat(ge(i)," ->  ").concat(ge(u))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(pe.a,{locale:"fr-FR",onChange:h,value:v})})," "]}),Object(x.jsx)(Yc,{filter:!1,data:p.sort((function(e,t){return t.id-e.id})),meta:f,columns:N,addUrl:B,urlName:"Ajouter un facture"})]})]})}var Wc=function(){return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Sortie",children:Object(x.jsx)(be,{title:"Sortie"})}),Object(x.jsx)(ve,{})]})},Jc=c(1063),Xc=c(1036),Zc=c(1037),$c="SET_BASKET_ITEMS",er="ADD_TO_BASKET",tr="REMOVE_FROM_BASKET",nr="CLEAR_BASKET",cr="ADD_QTY_ITEM",rr="MINUS_QTY_ITEM",ar="ADD_QTY_PORTION_ITEM",ir="MINUS_QTY_PORTION_ITEM",sr="SET_CHECKOUT_SHIPPING_DETAILS",lr="SET_CHECKOUT_PAYMENT_DETAILS",dr="RESET_CHECKOUT",or=c(1038);function ur(e){return e.toString().replace(/\s/g,"").toLowerCase()}function jr(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?jr(n):n;return t}var br=function(e,t){return jr(e).filter((function(e){return""==t||ur(e.name).includes(ur(t))}))};var mr=c(61),Or=c.n(mr);var xr=function(e){var t=e.model,n=e.entity,c=Object(se.c)(),r=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&(c(hn(t).deleteTransaction(n,"/delete-from-depot")),r.push(D))},children:"Supprimer"})})};var vr=function(e){var t=ie()().isoWeekday(1).startOf("week"),n=ie()().endOf("week"),c=Object(r.useState)(t),i=Object(O.a)(c,2),s=i[0],l=i[1],o=Object(r.useState)(n),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)([t,n]),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(se.d)(pn("commandes").value),g=Object(se.d)(pn("commandes").meta),N=Object(se.c)();Object(r.useEffect)((function(){null!==h?(h[0]&&l(h[0]),h[1]&&b(h[1])):(l(t),b(n))}),[h]);var y=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t};Object(r.useEffect)((function(){N(function(e,t){return dn("commandes",{path:"/credit?deb=".concat(e,"&fin=").concat(t),replace:!0})}(s,j))}),[s,j]);var C=a.a.useMemo((function(){return[{Header:"Date de credit",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",accessor:"contenu",Cell:function(e){var t=e.cell.value;return Object(x.jsx)("div",{style:{width:"100px"},children:null!=t&&t.map((function(e){return Object(x.jsx)("p",{children:e.name})}))})}},{Header:"Status",Cell:function(e){var t;return Object(x.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(x.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(x.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom de la personne",accessor:"emprunter.name"},{Header:"Contact",accessor:"emprunter.contact"},{Header:"Total",Cell:function(e){var t=e.cell.value;return Object(x.jsx)("div",{children:Ne(y(null===t||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(d.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(xr,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Cr\xe9dit",children:Object(x.jsx)(be,{title:"Cr\xe9dit"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Credit"}),Object(x.jsx)("p",{children:"".concat(ge(s)," ->  ").concat(ge(j))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:p,value:h})})," "]}),Object(x.jsx)(Yc,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:C})]})]})};var hr=function(e){var t=ie()().isoWeekday(1).startOf("week"),n=ie()().endOf("week"),c=Object(r.useState)(t),i=Object(O.a)(c,2),s=i[0],l=i[1],o=Object(r.useState)(n),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)([t,n]),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(se.d)(pn("commandes").value),g=Object(se.d)(pn("commandes").meta),N=Object(se.c)();Object(r.useEffect)((function(){null!==h?(h[0]&&l(h[0]),h[1]&&b(h[1])):(l(t),b(n))}),[h]);var y=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},C=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t};Object(r.useEffect)((function(){N(dn("commandes",{path:"/credit-vaccinateur",replace:!0}))}),[s,j]);var q=a.a.useMemo((function(){return[{Header:"Date du credit",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"100px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Status",Cell:function(e){var t;return Object(x.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(x.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(x.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom du vaccinateur",accessor:"vaccinateur.name"},{Header:"Contact du vaccinateur",accessor:"vaccinateur.contact"},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:C(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(y(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(d.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(xr,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Cr\xe9dit  pour les vaccinateurs",children:Object(x.jsx)(be,{title:"Cr\xe9dit  pour les vaccinateurs"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Credit pour les vaccinateurs"}),Object(x.jsx)("p",{children:"".concat(ge(s)," ->  ").concat(ge(j))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:p,value:h})})," "]}),Object(x.jsx)(Yc,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:q})]})]})},pr=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var fr=Object(o.j)((function(e){var t,n,c,a,i,s,l,d,u,j,b,m,O,v=Object(o.g)(),h=Object(o.i)().id,p=Object(se.d)(pn("commandes").value),f=Object(se.c)();return Object(r.useEffect)((function(){f(hn("commandes").get(h))}),[h]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(x.jsx)(be,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"badge badge-info my-2",children:["vente-depot-credit"==(null===(t=p[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("h3",{children:"Credit"}),"vente-depot-vaccinateur"==(null===(n=p[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("h3",{children:"Credit pour vaccinateur"}),"direct"==(null===(c=p[0])||void 0===c?void 0:c.type)&&Object(x.jsx)("h3",{children:"Direct"})]}),"vente-depot-vaccinateur"==(null===(a=p[0])||void 0===a?void 0:a.type)&&Object(x.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"my-2",children:[" ","Nom du vaccinateur : ",null===(i=p[0])||void 0===i?void 0:i.vaccinateur.name]}),Object(x.jsxs)("h5",{children:["Contact : ",null===(s=p[0])||void 0===s?void 0:s.vaccinateur.contact]})]})}),"vente-depot-credit"==(null===(l=p[0])||void 0===l?void 0:l.type)&&Object(x.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"my-2",children:["Nom:",null===(d=p[0])||void 0===d?void 0:d.emprunter.name]}),Object(x.jsxs)("h5",{children:["Contact: ",null===(u=p[0])||void 0===u?void 0:u.emprunter.contact]})]})}),p.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",ge(null===(j=p[0])||void 0===j?void 0:j.dateCom)]}),1==(null===(b=p[0])||void 0===b?void 0:b.status)?Object(x.jsx)("p",{className:"btn btn-sm btn-green my-2 mt-4",children:"pay\xe9"}):Object(x.jsx)("button",{className:"btn btn-sm btn-warning my-3",onClick:function(){var e;f(function(e){return dn("commandes",{path:"/set-payer-commande?cId=".concat(e),replace:!0})}(null===(e=p[0])||void 0===e?void 0:e.id)),v.goBack()},children:"Marquer comme pay\xe9"})]}),Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),p.length>0&&(null===(m=p[0])||void 0===m?void 0:m.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[Ne(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(x.jsx)("td",{children:Ne(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",Ne(pr(null===(O=p[0])||void 0===O?void 0:O.contenu))]})]})]})})),gr=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var Nr=Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,l,d,u,j,b,m,O=Object(o.i)().id,v=Object(se.d)(pn("commandes").value),h=Object(se.c)();return Object(r.useEffect)((function(){h(hn("commandes").get(O))}),[O]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(x.jsx)(be,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("p",{children:["credit"==(null===(t=v[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"}),"vaccinateur"==(null===(n=v[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("p",{children:"Sortie vaccinateur"}),"direct"==(null===(c=v[0])||void 0===c?void 0:c.type)&&Object(x.jsx)("p",{children:"Sortie Magasion"})]}),"vaccinateur"==(null===(a=v[0])||void 0===a?void 0:a.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(i=v[0])||void 0===i?void 0:i.vaccinateur.name}),Object(x.jsx)("h5",{children:null===(s=v[0])||void 0===s?void 0:s.vaccinateur.contact})]})}),"credit"==(null===(l=v[0])||void 0===l?void 0:l.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(d=v[0])||void 0===d?void 0:d.emprunter.name}),Object(x.jsx)("h5",{children:null===(u=v[0])||void 0===u?void 0:u.emprunter.contact})]})}),v.length>0&&Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",ge(null===(j=v[0])||void 0===j?void 0:j.dateCom)]})}),Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),v.length>0&&(null===(b=v[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[Ne(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(x.jsx)("td",{children:Ne(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",Ne(gr(null===(m=v[0])||void 0===m?void 0:m.contenu))]})]})]})}));var yr=function(e){var t=Object(se.d)(pn("commandes").value),n=Object(se.c)();Object(r.useEffect)((function(){n(dn("commandes",{path:"/direct",replace:!0}))}),[]);var c=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t.toFixed(2)};return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Sortie pour le magasin",children:Object(x.jsx)(be,{title:"Sortie pour le magasin"})}),Object(x.jsx)(ve,{children:Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date de commande"}),Object(x.jsx)("th",{children:"Nb"}),Object(x.jsx)("th",{children:"Montant"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:t.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.contenu)||void 0===t?void 0:t.length}),Object(x.jsx)("td",{children:c(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{className:"d-flex justify-content-around",children:Object(x.jsx)(d.b,{className:"btn btn-sm  btn-green",to:"detail/".concat(e.id),children:"Detail"})})]})}))})]})})]})},Cr=function(){var e=Object(r.useState)(new Date),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(new Date),i=Object(O.a)(a,2),s=i[0],l=i[1],o=Object(r.useRef)(null),u=Object(r.useRef)(null),j=Object(se.d)(pn("commandes").value),b=Object(se.c)();Object(r.useEffect)((function(){b(function(e,t){return dn("commandes",{path:"/journal?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]);var m=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},v=function(e){return m(e.map((function(e){return e.prixVente*e.quantityParProduct})))+m(e.map((function(e){return e.prixParCC*e.qttByCC})))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Journal de sortie",children:Object(x.jsx)(be,{title:"Journal de sortie"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsxs)("div",{className:"col-lg-4",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("input",{type:"date",name:"datedeb",ref:o,placeholder:"date debut",className:"form-control mr-2"}),Object(x.jsx)("input",{type:"date",name:"datefin",ref:u,placeholder:"date fin",className:"form-control mr-2"}),Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){""==o.current.value?c(new Date):c(o.current.value),""==u.current.value?l(new Date):l(u.current.value)},children:"Filtrer"})]})," "]})," "]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date "}),Object(x.jsx)("th",{children:"Type de sortie"}),Object(x.jsx)("th",{children:"Montant Total"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:j.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:ge(null===e||void 0===e?void 0:e.createdAt)}),Object(x.jsx)("td",{children:Object(x.jsxs)(x.Fragment,{children:["cva"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-info",children:"Approvisionnement du magasin"}),"vente-magasin-direct"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-success",children:"Vente direct depuis le magasin"}),"vente-magasin-credit"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-info",children:"credit client depuis magasin"}),"credit"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-danger",children:"Credit personne"}),"vaccinateur"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Credit Vaccinateur"}),"direct"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-dark",children:"Vente direct depuis le dep\xf4t"})]})}),Object(x.jsx)("td",{children:Ne(v(null===e||void 0===e?void 0:e.contenu))}),Object(x.jsx)("td",{children:Object(x.jsx)(d.b,{className:"btn btn-sm  btn-green",to:"/detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})}),Object(x.jsxs)("h3",{children:["Total:",Ne(function(e){var t=0;return e.map((function(e){t+=v(null===e||void 0===e?void 0:e.contenu)})),t}(j))]})]})]})})};var qr=function(){var e,t,n=Object(se.d)(pn("parametres").value),c=Object(se.c)();return Object(r.useEffect)((function(){c(hn("parametres").get(1))}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"mb-2 text-bold title",children:"Parametres supplementaires"}),Object(x.jsxs)("div",{className:"card mt-2",children:[Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)(Mc,{id:"parametrage-form",enableReinitialize:!0,initialValues:{nb_mois:null===(e=n[0])||void 0===e?void 0:e.nbMois,nb_produit:null===(t=n[0])||void 0===t?void 0:t.nbProduits},validations:{},onSubmit:function(e,t){c(hn("parametres").update({id:1,nb_mois:e.nb_mois,nb_produits:e.nb_produit}))},render:function(){return Object(x.jsxs)(Mc.Element,{children:[Object(x.jsx)(Mc.Field.Input,{name:"nb_mois",label:"Nombre de mois",placeholder:"Nombre de mois",type:"number"}),Object(x.jsx)(Mc.Field.Input,{name:"nb_produit",label:"Nombre de produit",placeholder:"Nombre de produit",type:"number"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-success mt-2 btn-sm",children:"Sauvegarder la modification"})]})}})})," "]})," "]})},Ar=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("products").meta),n=Object(se.c)();Object(r.useEffect)((function(){n(dn("products",{path:"/perimer",replace:!0}))}),[]);var c=a.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(x.jsx)("h3",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Article perim\xe9",children:Object(x.jsx)(be,{title:"Article perim\xe9"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Yc,{data:e,meta:t,columns:c})})]})},Sr=c(73);function Er(){return Sr.a().shape({name:Sr.b().required("Le champ est requis")})}var wr=c(1058);var Pr=function(e){var t=e.message;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(wr.a,{mb:3,status:"success",variant:"top-accent",children:"string"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(wr.b,{}),t]})})})},Vr=c(1039),Rr=c(193);var Fr=function(e){var t=e.error;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(wr.a,{mb:3,status:"error",variant:"top-accent",children:["object"===typeof t&&t.length>0&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Vr.a,{spacing:3,children:t.map((function(e,t){return Object(x.jsxs)(Vr.c,{children:[Object(x.jsx)(Vr.b,{as:Rr.b,color:"red.500"},t),e.msg]},t)}))})}),"object"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Rr.c,{color:"red.500"}),t.message]}),"string"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(wr.b,{}),t.message]})]})})};var Dr=function(){var e=Object(se.d)(pn("fournisseurs").value),t=Object(se.d)(pn("categories").value),n=Object(se.d)(pn("categories").meta),c=Object(se.d)(pn("fournisseurs").meta),a=Object(se.d)(pn("products").meta),i=Object(r.useState)(0),s=Object(O.a)(i,2),l=(s[0],s[1],Object(r.useState)(0)),d=Object(O.a)(l,2),u=(d[0],d[1],Object(se.c)()),j=Object(o.g)();return Object(r.useEffect)((function(){u(hn("fournisseurs").fetch()),u(hn("categories").fetch()),u(hn("products").fetch())}),[j]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Ajouter un produit",children:Object(x.jsx)(be,{title:"Ajouter un produit"})}),Object(x.jsxs)(ve,{children:[""!=a.success&&null!=a.success&&Object(x.jsx)(Pr,{message:a.success}),a.error&&Object(x.jsx)(Fr,{error:a.error}),Object(x.jsx)(Mc,{id:"add-form-product",enableReinitialize:!0,initialValues:{name:"",type:"BOLUS",doseDefault:0,prixlitre:0,prixVente:0,prixFournisseur:0,prixVaccinateur:0,quantityParProduct:0,prixParCC:0,datePer:"",uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,fournisseurId:1,qttyspecificmirror:0,quantityBruteCVA:0,categoryId:1,quantityBrute:0,quantityCCCVA:0,quantityCC:0,condml:0,condval:0,conditionnement:1,qttccpvente:0,prixqttccvente:0},validations:Er,onSubmit:function(e,t){var n=e.name,c=e.type,r=e.doseDefault,a=e.prixVente,i=e.prixFournisseur,s=e.prixVaccinateur,l=e.prixParCC,d=(e.datePer,e.fournisseurId),o=e.categoryId,b=e.condml,m=(e.condval,e.qttccpvente),O=e.conditionnement,x=e.prixqttccvente,v=e.condsize,h=e.prixlitre;u(hn("products").create({name:n,type:c,doseDefault:r,prixVente:parseFloat(a),prixlitre:parseFloat(h),prixFournisseur:parseFloat(i),prixVaccinateur:parseFloat(s),quantityParProduct:0,quantityBruteCVA:0,quantityBrute:0,quantityCCCVA:0,quantityCC:0,prixParCC:parseFloat(l),datePer:new Date,uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,categoryId:parseInt(o),fournisseurId:parseInt(d),condml:parseFloat(b),condsize:parseFloat(v),conditionnement:O,qttccpvente:parseFloat(m),prixqttccvente:parseInt(x),refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0,doseRestantEnMg:0,qttbylitre:0,remise:0,condval:0,correction:0,correctionml:0,correctionl:0,correctiontml:0,correctiontl:0,correctiontype:0,qttyspecificmirror:0,remisePerProduct:1})),j.push(y)},render:function(r){var a=r.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[1==n.isFetching&&Object(x.jsx)("p",{children:"Recuperation des categories"}),Object(x.jsx)(Mc.Field.Select,{name:"categoryId",label:"Categorie",emptyValue:!0,valueKey:"name",disabled:n.isFetching,defaultValue:1,options:t}),1==c.isFetching&&Object(x.jsx)("p",{children:"Recuperation des fournisseurs"}),Object(x.jsx)(Mc.Field.Select,{name:"fournisseurId",label:"Fournisseur",emptyValue:!0,valueKey:"name",options:e,disabled:c.isFetching}),Object(x.jsx)(Mc.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation (Tikaz 1L )"}),Object(x.jsx)(Mc.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===a.type&&Object(x.jsxs)("div",{className:"ml-3",children:[Object(x.jsx)(Mc.Field.Input,{name:"doseDefault",label:"Quantit\xe9 en ml ou dose ou en litre",placeholder:"Quantit\xe9 en ml ou dose ou en litre"}),Object(x.jsx)(Mc.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==a.conditionnement&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Mc.Field.Input,{name:"condml",defaultValue:0,label:"Conditionnement (ML)",placeholder:"Conditionnement en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"condsize",defaultValue:0,label:"Diviser en combien de flacon",placeholder:"Diviser en combien de flacon"}),Object(x.jsx)(Mc.Field.Input,{name:"qttccpvente",defaultValue:0,label:"Quantit\xe9 de vente en ML",placeholder:"Quantit\xe9 de vente en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"prixqttccvente",disabled:null==a.qttccpvente||""==a.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(a.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(a.qttccpvente," ML.")})]})]})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(x.jsxs)("div",{className:"card-body",children:[2==a.conditionnement&&Object(x.jsx)(Mc.Field.Input,{name:"prixlitre",label:"Prix d'un litre",placeholder:"Prix d'un litre"}),Object(x.jsx)(Mc.Field.Input,{name:"prixFournisseur",defaultValue:0,label:"prix unitaire",placeholder:"prix unitaire"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVente",defaultValue:0,label:"Prix de vente",placeholder:"prix de vente"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVaccinateur",defaultValue:0,label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(x.jsx)(x.Fragment,{children:"FLACON"===a.type&&Object(x.jsx)(Mc.Field.Input,{data:0!=a.qttccpvente&&""!=a.qttccpvente&&a.prixqttccvente/a.qttccpvente!="Infinity"?a.prixqttccvente/a.qttccpvente:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"})})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})})};var Br=function(){var e,t,n,c,a,i,s,l,d,u,j,b,m,O,v,h,p,f,g,N,y,C,q=Object(o.i)().id,A=Object(se.c)(),S=Object(se.d)(pn("products").value);return Object(r.useEffect)((function(){A(hn("products").get(q))}),[]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9tail du produit",children:Object(x.jsx)(be,{title:"D\xe9tail du produit"})}),Object(x.jsxs)(ve,{children:[2!=(null===(e=S[0])||void 0===e?void 0:e.conditionnement)||null!=(null===(t=S[0])||void 0===t?void 0:t.conditionnement)&&Object(x.jsxs)("div",{className:"card card-info",children:[Object(x.jsx)("div",{className:"card-header",children:"Conditionnement"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("p",{children:["Prix d'un litre:"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(n=S[0])||void 0===n?void 0:n.prixlitre})]}),Object(x.jsxs)("p",{children:["Conditionnement (ML):"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(c=S[0])||void 0===c?void 0:c.condml})]}),Object(x.jsxs)("p",{children:["Division en flacon:"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(a=S[0])||void 0===a?void 0:a.condsize})]}),Object(x.jsxs)("p",{children:["Quantit\xe9 de vente par ML:",Object(x.jsx)("span",{className:"badge badge-info",children:null===(i=S[0])||void 0===i?void 0:i.qttccpvente})]}),Object(x.jsxs)("p",{children:["Prix de vente pour ",null===(s=S[0])||void 0===s?void 0:s.qttccpvente," ML:"," ",Object(x.jsxs)("span",{className:"badge badge-info",children:[Ne(null===(l=S[0])||void 0===l?void 0:l.prixqttccvente)," "]})]})]})]}),Object(x.jsxs)("table",{className:"table table-striped",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Nom de l'article:"})}),Object(x.jsxs)("td",{children:[null===(d=S[0])||void 0===d?void 0:d.name," "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Fournisseur :"})}),Object(x.jsx)("td",{children:null===(u=S[0])||void 0===u||null===(j=u.fournisseur)||void 0===j?void 0:j.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Categorie :"})}),Object(x.jsx)("td",{children:null===(b=S[0])||void 0===b||null===(m=b.category)||void 0===m?void 0:m.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Type:"})}),Object(x.jsxs)("td",{children:[null===(O=S[0])||void 0===O?void 0:O.type," "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Dose:"})}),Object(x.jsxs)("td",{children:[null===(v=S[0])||void 0===v?void 0:v.doseDefault," ML "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix unitaire:"})}),Object(x.jsx)("td",{children:Ne(null===(h=S[0])||void 0===h?void 0:h.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix de vente:"})}),Object(x.jsx)("td",{children:Ne(null===(p=S[0])||void 0===p?void 0:p.prixVente)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix pour le vaccinateur:"})}),Object(x.jsx)("td",{children:Ne(null===(f=S[0])||void 0===f?void 0:f.prixVaccinateur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix par ML:"})}),Object(x.jsx)("td",{children:0!=(null===(g=S[0])||void 0===g?void 0:g.qttccpvente)?Ne((null===(N=S[0])||void 0===N?void 0:N.prixParCC)*(null===(y=S[0])||void 0===y?void 0:y.qttccpvente)):Ne(null===(C=S[0])||void 0===C?void 0:C.prixParCC)})]})]})]})]})};var Mr=function(){var e,t,n=Object(o.i)().id,c=Object(se.d)(pn("fournisseurs").value),a=Object(se.d)(pn("categories").value),i=Object(se.d)(pn("products").value),s=Object(se.d)(pn("products").meta),l=Object(r.useState)((e={name:"",type:"",doseDefault:"",prixlitre:"",prixVente:"",prixFournisseur:"",prixVaccinateur:"",prixParCC:"",datePer:"",uniteMesure:"ml",conditionnement:"",categoryId:""},Object(Je.a)(e,"datePer",""),Object(Je.a)(e,"fournisseurId",""),Object(Je.a)(e,"condml",""),Object(Je.a)(e,"condsize",""),Object(Je.a)(e,"qttccpvente",""),Object(Je.a)(e,"prixqttccvente",""),e)),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(o.g)(),m=Object(r.useState)(1),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(1)),p=Object(O.a)(h,2),f=(p[0],p[1],Object(r.useState)(0)),g=Object(O.a)(f,2),N=g[0],C=g[1],q=Object(r.useState)(0),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(se.c)(),P=Object(r.useState)({}),V=Object(O.a)(P,2),R=(V[0],V[1]),F=Object(r.useState)(u.type),D=Object(O.a)(F,2),B=(D[0],D[1]);return Object(r.useEffect)((function(){w(hn("products").fetch()),B(u.type),E(u.prixqttccvente),C(u.qttccpvente)}),[n]),Object(r.useEffect)((function(){s.isFetching||(j(null===i||void 0===i?void 0:i.find((function(e){return e.id==n}))),R({name:u.name}))}),[s]),Object(r.useEffect)((function(){w(hn("fournisseurs").fetch()),w(hn("categories").fetch())}),[]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Editer un produit",children:Object(x.jsx)(be,{title:"Editer un produit"})}),Object(x.jsxs)(ve,{children:[""!=s.success&&null!=s.success&&Object(x.jsx)(Pr,{message:s.success}),i.name,s.error&&Object(x.jsx)(Fr,{error:s.error}),Object(x.jsx)(Mc,{id:"add-form-product",initialValues:(t={name:u.name,type:u.type,doseDefault:u.doseDefault,prixlitre:u.prixlitre,prixVente:u.prixVente,prixFournisseur:null===u||void 0===u?void 0:u.prixFournisseur,prixVaccinateur:u.prixVaccinateur,prixParCC:u.prixParCC,datePer:u.datePer,uniteMesure:"ml",conditionnement:u.conditionnement,categoryId:u.categoryId},Object(Je.a)(t,"datePer",u.datePer),Object(Je.a)(t,"fournisseurId",u.fournisseurId),Object(Je.a)(t,"condml",null==u.condml?0:u.condml),Object(Je.a)(t,"condsize",null==u.condsize?0:u.condsize),Object(Je.a)(t,"qttccpvente",null==u.qttccpvente?0:u.qttccpvente),Object(Je.a)(t,"prixqttccvente",null==u.prixqttccvente?0:u.prixqttccvente),t),validations:Er,onSubmit:function(e,t){var n=e.name,c=e.type,r=e.doseDefault,a=e.prixlitre,i=e.prixVente,s=e.prixFournisseur,l=e.prixVaccinateur,d=e.prixParCC,o=e.datePer,j=e.fournisseurId,m=e.categoryId,O=e.condml,x=(e.condval,e.qttccpvente),v=e.prixqttccvente,h=e.conditionnement,p=e.condsize;w(hn("products").update({id:u.id,name:n,type:c,doseDefault:r,prixVente:parseFloat(i),prixFournisseur:parseFloat(s),prixVaccinateur:parseFloat(l),prixlitre:parseFloat(a),prixParCC:parseFloat(d),datePer:new Date(o),qttByCC:parseFloat(u.qttByCC),quantityBrute:parseFloat(u.quantityBrute),quantityBruteCVA:parseFloat(u.quantityBruteCVA),quantityCCCVA:parseFloat(u.quantityCCCVA),quantityCC:parseFloat(u.quantityCC),uniteMesure:"ml",condml:parseFloat(O),condsize:parseFloat(p),qttccpvente:parseFloat(x),fournisseurId:parseInt(j),categoryId:parseInt(m),conditionnement:parseInt(h),prixqttccvente:parseInt(v),updatedAt:new Date,refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttyspecificmirror:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0,qttbylitre:0,remise:0,condval:0,correction:0,correctionml:0,correctionl:0,correctiontml:0,correctiontl:0,correctiontype:0})),b.push(y)},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",selectValue:u.categoryId,options:a}),Object(x.jsx)(Mc.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",selectValue:u.fournisseurId,options:c}),Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(x.jsx)(Mc.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"ml-3",children:[Object(x.jsx)(Mc.Field.Input,{name:"doseDefault",label:"Quantit\xe9 en ml ou dose ou litre",placeholder:"Quantit\xe9 en ml ou dose ou litre"}),Object(x.jsx)(Mc.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",emptyValue:!1,options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==t.conditionnement&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Mc.Field.Input,{name:"condml",label:"Conditionnement (ML)",placeholder:"Conditionnement en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"condsize",label:"Diviser en combien de flacon",placeholder:"Diviser en combien de flacon"}),Object(x.jsx)(Mc.Field.Input,{name:"qttccpvente",label:"Quantit\xe9 de vente en ML",placeholder:"Quantit\xe9 de vente en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"prixqttccvente",value:null===t||void 0===t?void 0:t.prixqttccvente,disabled:null==t.qttccpvente||""==t.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(t.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(t.qttccpvente," ML.")})]})]})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"prixFournisseur",value:null===t||void 0===t?void 0:t.prixFournisseur,label:"prix unitaire",placeholder:"prix unitaire"}),2==t.conditionnement&&Object(x.jsx)(Mc.Field.Input,{name:"prixlitre",value:null===t||void 0===t?void 0:t.prixlitre,label:"Prix d'un litre",placeholder:"Prix d'un litre"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVente",label:"Prix de vente",value:null===t||void 0===t?void 0:t.prixVente,placeholder:"prix de vente"}),"FLACON"===t.type&&Object(x.jsx)(Mc.Field.Input,{type:"text",data:0!=N&&""!=N&&S/N!="Infinity"?S/N:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"}),Object(x.jsx)(Mc.Field.Input,{value:null===t||void 0===t?void 0:t.prixVaccinateur,name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})};c(459),c(460);var Tr=function(e){var t=e.model,n=e.entity,c=e.attribute,r=Object(se.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm('Vous voulez vraiment supprimer "'.concat(n[c],'" ?'))&&r(hn(t).destroy(n))},children:"Supprimer"})})};c(1040),c(1041),c(1042),c(1035),c(118);var kr=function(e){var t=e.route,n=e.model,c=e.modelKey,r=e.data,a=e.detail,i=void 0===a||a;return Object(x.jsxs)("div",{children:[i&&Object(x.jsx)(d.b,{className:"btn btn-sm btn-primary mr-2",to:"/".concat(t,"/detail/").concat(r.row.original.id),children:"Detail"}),Object(x.jsx)(d.b,{className:"btn btn-sm btn-warning mr-2",to:"/".concat(t,"/edit/").concat(r.row.original.id),children:"Editer"}),Object(x.jsx)(Tr,{model:n,entity:r.row.original,attribute:c})]})},Ir=function(){var e=Object(se.d)(pn("products").value)||[],t=Object(se.d)(pn("products").meta),n=(Object(r.useRef)(),Object(se.c)());Object(o.g)();Object(r.useEffect)((function(){n(hn("products").fetch())}),[]);var c=[{Header:"Id",accessor:"id"},{Header:"Produit",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n,c;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-primary",children:null!=(null===(t=e.row.original)||void 0===t?void 0:t.fournisseur)?null===(n=e.row.original)||void 0===n||null===(c=n.fournisseur)||void 0===c?void 0:c.name:""})})}},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Reste en ML",accessor:"quantityCC"},{Header:"Prix unitaire",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(null===(t=e.row.original)||void 0===t?void 0:t.prixFournisseur)})}},{Header:"Prix de vente",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(null===(t=e.row.original)||void 0===t?void 0:t.prixVente)})}},{Header:"Prix en ML",Cell:function(e){var t,n,c,r;return Object(x.jsx)("div",{children:0!=(null===(t=e.row.original)||void 0===t?void 0:t.qttccpvente)?Ne((null===(n=e.row.original)||void 0===n?void 0:n.prixParCC)*(null===(c=e.row.original)||void 0===c?void 0:c.qttccpvente)):Ne(null===(r=e.row.original)||void 0===r?void 0:r.prixParCC)})}},{Header:"Actions",Cell:function(e){return Object(x.jsx)(kr,{route:"product",model:"products",modelKey:"name",data:e})}}];return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Tous les produits",children:Object(x.jsx)(be,{title:"Tous les produits"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Yc,{data:e,meta:t,columns:c,addUrl:N,urlName:"Ajouter un produit"})})]})};var _r=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("categories").value),n=Object(se.c)(),c=Object(r.useState)(1),a=Object(O.a)(c,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){n(function(e){return dn("products",{path:"/product/category?id=".concat(e),replace:!0})}(i)),n(hn("categories").fetch())}),[i]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Liste des articles par categories",children:Object(x.jsx)(be,{title:"Liste des articles par categories"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsx)("div",{className:"col-lg-4",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("label",{htmlFor:"",children:"Categorie:"}),Object(x.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{className:"bg-thead",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Nom"}),Object(x.jsx)("th",{children:"Prix Unitaire"}),Object(x.jsx)("th",{children:"Categorie"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(x.jsx)("td",{children:Ne(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name}),Object(x.jsx)("td",{children:Object(x.jsx)(d.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})};var Qr=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("fournisseurs").value),n=Object(se.c)(),c=Object(r.useState)(1),a=Object(O.a)(c,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){n(function(e){return dn("products",{path:"/product/fournisseur?id=".concat(e),replace:!0})}(i)),n(hn("fournisseurs").fetch())}),[i]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Liste des articles par fournisseurs",children:Object(x.jsx)(be,{title:"Liste des articles par fournisseurs"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsx)("div",{className:"col-lg-4",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("label",{htmlFor:"",children:"Fournisseur:"}),Object(x.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Nom"}),Object(x.jsx)("th",{children:"Prix"}),Object(x.jsx)("th",{children:"Fournisseur"}),Object(x.jsx)("td",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(x.jsx)("td",{children:Ne(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("td",{children:Object(x.jsx)(d.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})},Lr=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("products").meta),n=Object(se.c)();Object(r.useEffect)((function(){n(dn("products",{path:"/rupture/stock",replace:!0}))}),[]);var c=a.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(x.jsx)("h3",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Article en rupture de stock",children:Object(x.jsx)(be,{title:"Article en rupture de stock"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Yc,{data:e,meta:t,columns:c})})]})},Hr=c(1043);var Ur=function(){var e=Object(r.useState)(new Date),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(new Date),i=Object(O.a)(a,2),s=i[0],l=i[1],o=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t},u=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityBrute})),t},j=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityCC})),t},b=Object(r.useRef)(null),m=Object(r.useRef)(null),v=Object(se.d)(pn("commandes").value),h=Object(se.c)();return Object(r.useEffect)((function(){h(function(e,t){return dn("commandes",{path:"/entree?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Factures",children:Object(x.jsx)(be,{title:"Factures"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-4 mb-2",children:Object(x.jsx)(d.b,{to:"/approv",className:"btn  btn-primary",children:" Effectuer un approvisionnement"})}),Object(x.jsx)("div",{className:"col-lg-8"})]}),Object(x.jsxs)("div",{className:"border p-3 bg-white",children:[Object(x.jsxs)("div",{className:"row mb-3",children:[Object(x.jsx)("div",{className:"col-lg-7"}),Object(x.jsx)("div",{className:"col-lg-5",children:Object(x.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(x.jsx)("input",{type:"date",name:"datedeb",className:"form-control mr-3",format:"DD-MM-YYYY",ref:b,placeholder:"D\xe9but"}),Object(x.jsx)("input",{type:"date",name:"datefin",className:"form-control mr-3",ref:m,placeholder:"Fin"}),Object(x.jsx)(Hr.a,{onClick:function(){c(b.current.value),l(m.current.value)},children:"Filtrer"})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date"}),Object(x.jsx)("th",{children:"Quantite Brute"}),Object(x.jsx)("th",{children:"Quantite en CC"}),Object(x.jsx)("th",{children:"Montant Total"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:v.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(x.jsx)("td",{children:u(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{children:j(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{children:Object(x.jsx)(Ic.a,{value:o(null===e||void 0===e?void 0:e.contenu),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})}),Object(x.jsx)("td",{className:"d-flex justify-content-around",children:Object(x.jsx)(d.b,{className:"btn btn-sm  btn-success",to:"detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})]})]})]})},Yr="ROLE_VENDEUR",zr=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNUP_URL||"http://localhost:8100/api/signup",Kr=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNIN_URL||"http://localhost:8100/api/signin",Gr=(Object(o.j)((function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(x.jsx)("h3",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("ul",{className:"list-inline d-flex m-0  p-2 justify-content-center",children:[Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/journal",children:"Journal d'entrees et sorties"})}),Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:R,children:"Entree"})}),Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:F,children:"Sortie"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn btn-sm bg-success text-white",to:"/products",children:"Articles"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:"/credit",children:"Credit"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:S,children:"Credit Vaccinateur"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:E,children:"Commande direct"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:P,children:"Produit par fournisseur"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn bg-success btn-sm text-white",to:V,children:"Produit par category"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/",children:"Bon de sortie"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/approv",children:"Article \xe0 approvisionner"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:"/perimes",children:"Article perim\xe9"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(d.b,{className:"btn  btn-sm bg-success text-white",to:w,children:"Parametres"})})]})]})})),"SET_APPROV_ITEMS"),Wr="ADD_TO_APPROV",Jr="REMOVE_FROM_APPROV",Xr="CLEAR_APPROV",Zr="ADD_QTY_APPROV_ITEM",$r="MINUS_QTY_APPROV_ITEM",ea="ADD_NUMBER_QTY_ITEM",ta="ADD_QTY_NUMBER_APPROV_ITEM",na="ADD_REMISE_PER_PRODUCT",ca="ADD_REMISE_PER_PRODUCT_PERCENT",ra=function(){return{type:Xr}},aa=function(e,t){return{type:na,payload:{id:e,value:t}}},ia=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{approvisionnement:e,isItemOnApprov:n,addToApprov:function(e){n(e.id)?t(function(e){return{type:Jr,payload:e}}(e.id)):t(function(e){return{type:Wr,payload:e}}(e))}}},sa=function(e){var t,n=e.key,c=e.product,r=e.isItemOnApprov,a=e.handleAddToApprov;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{children:Object(x.jsxs)(Xc.a,{className:"product-card m-2 ".concat(c.id?"":"product-loading"),style:{border:c&&r(c.id)?"1px solid #a6a5a5":"",boxShadow:c&&r(c.id)?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Zc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===c||void 0===c?void 0:c.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===c||void 0===c||null===(t=c.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",Ne(null===c||void 0===c?void 0:c.prixFournisseur)]})})]})}),Object(x.jsx)(Zc.a,{xs:3,children:(null===c||void 0===c?void 0:c.id)&&Object(x.jsx)("button",{className:" ".concat(r(c.id)?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){return a(c)},children:r(c.id)?"Retirer":"Ajouter"})})]})},n)})},la=a.a.memo(sa),da=function(e){var t=e.product,n=Object(se.c)(),c=function(e){n(function(e,t){return{type:ta,payload:{id:e,value:t}}}(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{w:28,bg:"whitesmoke",onChange:function(e){c(Number(e))},min:0,defaultValue:t.quantityParProduct,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},oa=function(e){var t=e.product,n=e.isItemOnApprov,c=e.addToApprov,r=(Object(se.c)(),!!n&&n(t.id));return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(x.jsx)("div",{style:{width:"65%"},children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom du produit : "}),Object(x.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:Ne(t.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Montant HT:"}),Object(x.jsx)("td",{children:Ne(t.prixFournisseur*t.quantityParProduct-t.remise)})]})]})}),Object(x.jsx)("div",{className:"d-flex mt-3",children:Object(x.jsx)(da,{product:t})}),Object(x.jsx)("div",{children:r&&Object(x.jsx)("button",{onClick:function(){c&&c(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},ua=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},ja=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function ba(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?ba(n):n;return t}var ma=function(e,t){return ja(e)-t},Oa=function(e){e.setRegenerate;var t=Object(r.useState)(0),n=Object(O.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(new Date),s=Object(O.a)(i,2),l=s[0],d=s[1],u=Object(r.useState)(null),j=Object(O.a)(u,2),b=j[0],m=j[1],v=Object(r.useState)(""),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)("espece"),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(se.d)(pn("approvis").meta),A=Object(se.c)(),S=Object(o.g)();Object(r.useEffect)((function(){A(hn("approvis").fetch())}),[]);var E=Object(se.d)((function(e){return{approvisionnements:e.approvisionnements}})).approvisionnements,w=ia(E,A),P=w.isItemOnApprov,V=w.addToApprov,R=function(e){return ba(e).map((function(e){return e.quantityBrute+=e.quantityParProduct,e}))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(x.jsxs)("div",{children:["Factures ("," ".concat(E.length," ").concat(E.length>1?"produits":"produit"),")"]})}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date du facture :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return m(e.target.value)},value:b,className:"form-control"})})]}),E.length<=0&&Object(x.jsx)("div",{class:"alert alert-success ",children:"Aucune produit !!!"}),null===E||void 0===E?void 0:E.map((function(e,t){return Object(x.jsx)(oa,{product:e,isItemOnApprov:P,addToApprov:V,approvisionnement:E,dispatch:A},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})),E.length>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMISE : (en Ariary)"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,value:c,max:100,onChange:function(e){a(e.target.value)}})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"PAIEMENT LE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return d(e.target.value)},value:l,className:"form-control"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(x.jsx)("td",{children:Object(x.jsxs)("select",{className:"form-control",onChange:function(e){C(e.target.value)},children:[Object(x.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(x.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(x.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(x.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(x.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMARQUE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("textarea",{className:"form-control",onChange:function(e){f(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement"})})]})]})}),Object(x.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(x.jsx)("strong",{children:Object(x.jsx)(Ic.a,{value:ja(E.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(x.jsx)("strong",{children:Object(x.jsx)(Ic.a,{value:ja(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(x.jsx)("strong",{children:Object(x.jsx)(Ic.a,{value:ma(E.map((function(e){return e.prixFournisseur*e.quantityParProduct})),c),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})})]}),Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase",children:Object(x.jsxs)("strong",{children:[Object(kc.NumberToLetter)(ma(E.map((function(e){return e.prixFournisseur*e.quantityParProduct})),c))," ","ARIARY"]})})]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===E.length,onClick:function(){A(hn("approvis").createTransaction({id:Number(q.nextId),contenu:R(E),totalht:ja(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),remise:c,total:ma(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise})),c),dateApprov:null==b?new Date:b,dateEcheance:l,remarque:p,typePaye:y,approvisionnements:E},"create-facture")),E.forEach((function(e){A(hn("products").update(Object(we.a)(Object(we.a)({},e),{},{quantityBrute:e.quantityBrute+e.quantityParProduct,quantityParProduct:0})))})),A(ra()),S.push(M),console.log(E)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==E.length&&A(ra())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})]})]}),E.length>0&&Object(x.jsx)(_c.a.Footer,{className:"d-flex flex-column"})]})})};function xa(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?xa(n):n;return t}var va=function(e,t){return xa(e).filter((function(e){return""==t||e.fournisseurId==t}))};function ha(e){return e.toString().replace(/\s/g,"").toLowerCase()}function pa(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?pa(n):n;return t}var fa=function(e,t,n){return pa(e).filter((function(e){return(""==t||ha(e.name).includes(ha(t)))&&(""==n||e.fournisseurId==n)}))},ga=c(503),Na=c.n(ga),ya=function(){var e=Object(se.d)((function(e){return e.approvisionnements})),t=Object(se.d)(pn("products").value),n=Object(se.d)(pn("products").meta),c=Object(se.c)(),r=ia(e,c),i=r.isItemOnApprov,s=r.addToApprov,l=a.a.useState([]),d=Object(O.a)(l,2),o=d[0],u=d[1],j=a.a.useState(!1),b=Object(O.a)(j,2),m=b[0],v=b[1];a.a.useEffect((function(){return 1==m&&(c(hn("products").fetch()),v(!1)),function(){v(!1)}}),[m]),a.a.useEffect((function(){c(hn("products").fetch())}),[]),a.a.useEffect((function(){n.isFetching||u(t)}),[n]);var h=a.a.useCallback((function(e){s&&s(e)}),[s]),p=a.a.useMemo((function(){return o.map((function(e){return Object(x.jsx)(la,{product:e,isItemOnApprov:i,handleAddToApprov:h},e.id)}))}),[o]),f=function(e){null!=e.target&&u(br(t,e.target.value))};a.a.useMemo((function(){return Na()(f,300)}),[f]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onKeyDown:function(e){13==e.keyCode&&f(e)},placeholder:"Taper sur entrer pour valider votre recherche",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[p,0==o.length&&"Aucun produit trouv\xe9"]})," "]})]})},Ca=a.a.memo(ya,le.reactFastCompare),qa=(Object(Kt.debounce)((function(e){console.log("request: ".concat(e))}),1e3),function(){return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Nouvelle facture",children:Object(x.jsx)(be,{title:"Nouvelle Facture"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(or.a,{children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:5,children:Object(x.jsx)(Jc.a,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsx)(_c.a.Body,{children:Object(x.jsx)(Ca,{})})]})})}),Object(x.jsx)(Zc.a,{xs:7,children:Object(x.jsx)(Oa,{setRegenerate:[]})})]})})})]})}),Aa=a.a.memo(qa),Sa=c(1053),Ea=c(1054);var wa=function(){var e=Object(se.d)(pn("categories").value),t=Object(se.d)(pn("categories").meta),n=Object(se.c)();a.a.useEffect((function(){n(hn("categories").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(kr,{detail:!1,route:"categories",model:"categories",modelKey:"name",data:e})}}];return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Categories",children:Object(x.jsx)(be,{title:"Categories"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Yc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:J,urlName:"Ajouter une categorie"})})]})};var Pa=function(){var e=Object(se.d)(pn("fournisseurs").value),t=Object(se.d)(pn("fournisseurs").meta),n=Object(se.c)();a.a.useEffect((function(){n(hn("fournisseurs").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(kr,{detail:!1,route:"fournisseurs",model:"fournisseurs",modelKey:"name",data:e})}}];return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Fournisseurs",children:Object(x.jsx)(be,{title:"Fournisseurs"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Yc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:G,urlName:"Ajouter un fournisseur"})})]})};var Va=function(){var e=Object(se.d)(pn("vaccinateurs").value),t=Object(se.d)(pn("vaccinateurs").meta),n=Object(se.c)();a.a.useEffect((function(){n(hn("vaccinateurs").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"T\xe9l\xe9phone",accessor:"contact"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(kr,{detail:!1,route:"vaccinateurs",model:"vaccinateurs",modelKey:"name",data:e})}}];return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Vaccinateurs",children:Object(x.jsx)(be,{title:"Vaccinateurs"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Yc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:ee,urlName:"Ajouter un vaccinateur"})})]})};var Ra=function(){var e=Object(se.d)(pn("emprunters").value),t=Object(se.d)(pn("emprunters").meta),n=Object(se.c)();a.a.useEffect((function(){n(hn("emprunters").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"T\xe9l\xe9phone",accessor:"contact"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(kr,{detail:!1,route:"emprunters",model:"emprunters",modelKey:"name",data:e})}}];return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9mandeurs de cr\xe9dit",children:Object(x.jsx)(be,{title:"D\xe9mandeurs de cr\xe9dit"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Yc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:Z,urlName:"Ajouter une personne"})})]})};var Fa=function(e){var t=Object(se.c)(),n=Object(se.d)(pn("categories").value),c=Object(se.d)(pn("fournisseurs").value),a=Object(se.d)(pn("vaccinateurs").value),i=Object(se.d)(pn("emprunters").value),s=Object(se.d)(pn("categories").meta),l=Object(se.d)(pn("fournisseurs").meta),d=Object(se.d)(pn("vaccinateurs").meta),o=Object(se.d)(pn("emprunters").meta);return Object(r.useEffect)((function(){t(hn("fournisseurs").fetch()),t(hn("categories").fetch()),t(hn("vaccinateurs").fetch()),t(hn("emprunters").fetch())}),[]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Parametres g\xe9n\xe9rales",children:Object(x.jsx)(be,{title:"Parametres g\xe9n\xe9rales"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Sa.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsxs)(Ea.a,{variant:"pills",className:"flex-row justify-content-center",children:[Object(x.jsx)(Ea.a.Item,{className:"border ml-2",children:Object(x.jsx)(Ea.a.Link,{eventKey:"first",className:"py-2 px-3 text-uppercase bg-white",children:"Categories de produits"})}),Object(x.jsx)(Ea.a.Item,{className:"border  ml-2",children:Object(x.jsx)(Ea.a.Link,{eventKey:"second",className:"py-2 px-3 text-uppercase  bg-white",children:"Fournisseurs"})}),Object(x.jsx)(Ea.a.Item,{className:"border  ml-2",children:Object(x.jsx)(Ea.a.Link,{eventKey:"three",className:"py-2 px-3 text-uppercase  bg-white",children:"Vaccinateurs"})}),Object(x.jsx)(Ea.a.Item,{className:"border  ml-2",children:Object(x.jsx)(Ea.a.Link,{eventKey:"four",className:"py-2 px-3 text-uppercase  bg-white",children:"Demandeur de credit"})})]}),Object(x.jsx)(Zc.a,{sm:12,children:Object(x.jsxs)(Sa.a.Content,{children:[Object(x.jsx)(Sa.a.Pane,{eventKey:"first",children:Object(x.jsx)(wa,{categories:n,meta:s})}),Object(x.jsx)(Sa.a.Pane,{eventKey:"second",children:Object(x.jsx)(Pa,{fournisseurs:c,meta:l})}),Object(x.jsx)(Sa.a.Pane,{eventKey:"three",children:Object(x.jsx)(Va,{vaccinateurs:a,meta:d})}),Object(x.jsx)(Sa.a.Pane,{eventKey:"four",children:Object(x.jsx)(Ra,{emprunters:i,meta:o})})]})})]})})})]})};var Da=function(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(t),o=Object(O.a)(l,2),u=o[0],j=o[1],b=Object(r.useState)([e,t]),m=Object(O.a)(b,2),v=m[0],h=m[1];Object(r.useEffect)((function(){null!==v?(v[0]&&s(v[0]),v[1]&&j(v[1])):(s(e),j(t))}),[v]);var p=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},f=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t},g=Object(se.d)(pn("commandes").value),N=Object(se.d)(pn("commandes").meta),y=Object(se.c)();Object(r.useEffect)((function(){y(function(e,t){return dn("commandes",{path:"/sortie?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var C=a.a.useMemo((function(){return[{Header:"Date de commande",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"200px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:f(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(p(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/depot/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(d.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(xr,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Historique de sortie",children:Object(x.jsx)(be,{title:"Historique de sortie"})}),Object(x.jsxs)(ve,{children:[" ",Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie"}),Object(x.jsx)("p",{children:"".concat(ge(i)," ->  ").concat(ge(u))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(pe.a,{locale:"fr-FR",onChange:h,value:v})})," "]}),Object(x.jsx)(Yc,{filter:!1,data:g.sort((function(e,t){return t.id-e.id})),meta:N,columns:C})]})]})},Ba=a.a.createContext();function Ma(e){var t=e.model,n=e.options,c=e.children,r=Object(se.d)(pn(t).value),i=Object(se.d)(pn(t).meta),s=Object(se.c)();a.a.useEffect((function(){s(hn(t).fetch(n))}),[n]);var l={data:r,meta:i};return Object(x.jsx)(Ba.Provider,{value:l,children:c})}function Ta(e){var t=e.children;return Object(x.jsx)(Ba.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a GetDataContext");return t(e)}})}var ka="SET_FROM_DEPOT_ITEMS",Ia="ADD_FROM_DEPOT",_a="REMOVE_FROM_TO_DEPOT",Qa="CLEAR_FROM_DEPOT",La="ADD_QTY_FROM_DEPOT_ITEM",Ha="ADD_QTY_PORTION_FROM_DEPOT_ITEM",Ua="ADD_QTY_NUMBER_FROM_DEPOT_ITEM",Ya="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_DEPOT_ITEM",za="ADD_QTY_PORTION_DOSE_SOVAX_FROM_DEPOT_ITEM",Ka="ADD_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",Ga="MINUS_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",Wa=function(){return{type:Qa}},Ja=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(se.c)()),r=function(e){c(function(e,t){return{type:Ua,payload:{id:e,value:t}}}(t.id,e))},a=function(){return t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){r(Number(e)),n(Number(e)),1==a()&&alert("Le reste du stock est : "+t.quantityBrute+" < "+e+" demand\xe9")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:(a(),1*(null===t||void 0===t?void 0:t.quantityBrute)),children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Xa="SET_FROM_MAGASIN_ITEMS",Za="ADD_FROM_MAGASIN",$a="REMOVE_FROM_TO_MAGASIN",ei="CLEAR_FROM_MAGASIN",ti="ADD_QTY_FROM_MAGASIN_ITEM",ni="ADD_QTY_PORTION_FROM_MAGASIN_ITEM",ci="ADD_QTY_NUMBER_FROM_MAGASIN_ITEM",ri="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_MAGASIN_ITEM",ai="ADD_QTY_PORTION_DOSE_SOVAX_FROM_MAGASIN_ITEM",ii="ADD_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",si="MINUS_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",li="ADD_QTY_LITRE_NUMBER_FROM_MAGASIN_ITEM",di="ADD_TO_QTT_BRUTE",oi=function(e,t){return{type:ri,payload:{id:e,value:t}}},ui=function(e,t){return{type:ai,payload:{id:e,value:t}}},ji=function(e,t){return{type:ii,payload:{id:e,value:t}}},bi=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{fromdepot:e,isItemFromDepot:n,addFromDepot:function(e){n(e.id)?t(function(e){return{type:_a,payload:e}}(e.id)):t(function(e){return{type:Ia,payload:e}}(e))}}},mi=function(e){var t=e.product,n=Object(r.useState)(null),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null),l=Object(O.a)(s,2),d=l[0],o=l[1],u=Object(se.d)((function(e){return e.fromdepots})),j=Object(se.c)(),b=bi(u,j),m=b.isItemFromDepot,v=b.addFromDepot,h=!!m&&m(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=t.quantityParProductDepot&&Ne(ua(t)?t.prixlitre*t.quantityParProductDepot:t.prixVente*t.quantityParProductDepot),0==t.quantityParProductDepot&&0!=t.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=t.prixqttccventedepot&&0!=t.prixqttccventedepot?Ne(t.prixqttccventedepot):Ne(t.prixParCC)}),0!=t.quantityParProductDepot&&" x "+t.quantityParProductDepot+" "+t.type," ",null==t.prixqttccventedepot&&0==t.prixqttccventedepot&&Object(x.jsx)(x.Fragment,{children:0!=t.qttByCCDepot&&(0==t.quantityParProductDepot?" x ":"+")+t.qttByCCDepot+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(Ja,{product:t,setRealQttCC:i,setRealQtt:o,realQtt:d,realQttCC:a})]}),Object(x.jsx)("div",{children:h&&Object(x.jsx)("button",{onClick:function(){v&&v(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},Oi=function(e){return!!e.quantityBrute>0},xi=function(e){return!!e.quantityBrute<0},vi=function(e){return!!(e.qttByCCDepot>e.quantityCC)},hi=function(e){return vi(e)?e.qttByCCDepot-e.quantityCC:e.quantityCC-e.qttByCCDepot},pi=function(e){return Oi(e)?e.quantityBrute-=1:e.quantityBrute=0,e},fi=function(e,t){return e.quantityCC=t,e},gi=function(e){return function(e){Oi(e)?(console.log("hello ici"),vi(e)?(pi(e),fi(e,e.doseDefault-hi(e))):function(e){return!(e.qttByCCDepot!=e.quantityCC)}(e)?fi(e,0):fi(e,e.quantityCC-e.qttByCCDepot)):e.quantityCC>0?fi(e,e.quantityCC-e.qttByCCDepot):fi(e,0)}(e),e},Ni=function(e){return!function(e){return!!e.condvaldepot>=0}(e)?Oi(e)?(pi(e),fi(e,e.condmldepot-hi(e)),0==e.condvaldepot&&(e.condvaldepot=e.condsizedepot-1)):e.quantityCC-=e.qttByCCDepot:vi(e)?(!function(e){e.condvaldepot>0?e.condvaldepot-=1:e.quantityBrute>0?(pi(e),e.condvaldepot=e.condsizedepot-1):e.condvaldepot=0}(e),fi(e,e.condmldepot-hi(e))):!function(e){return!!e.quantityCC>0}(e)?e.quantityCC=0:e.quantityCC-=e.qttByCCDepot,e},yi=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=(e.realQtt,e.realQttCC,Object(se.c)(),function(e){!function(e,t,n){var a=Object(re.a)(c);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,n)),r(a)}(n,"quantityParProductDepot",e)}),s=function(){return t.quantityCC-t.qttByCCDepot<0&&t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){i(Number(e)),a(Number(e)),s()&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:1==s()?1*(null===t||void 0===t?void 0:t.quantityBrute)-1:1*(null===t||void 0===t?void 0:t.quantityBrute),children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Ci=function(e){var t=e.state,n=e.index,c=e.setState,a=e.product,i=Object(r.useState)(null),s=Object(O.a)(i,2),l=s[0],d=s[1],o=Object(r.useState)(null),u=Object(O.a)(o,2),j=u[0],b=u[1];return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:a.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=a.quantityParProductDepot&&Ne(ua(a)?a.prixlitre:a.prixVente),0==a.quantityParProductDepot&&0!=a.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=a.prixqttccventedepot&&0!=a.prixqttccventedepot?Ne(a.prixqttccventedepot):Ne(a.prixParCC)}),0!=a.quantityParProductDepot&&" x "+a.quantityParProductDepot+" "+a.type," ",null==a.prixqttccventedepot&&0==a.prixqttccventedepot&&Object(x.jsx)(x.Fragment,{children:0!=a.qttByCCDepot&&(0==a.quantityParProductDepot?" x ":"+")+a.qttByCCDepot+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:a.type}),Object(x.jsx)(yi,{index:n,state:t,setState:c,product:a,setRealQttCC:d,setRealQtt:b,realQtt:j,realQttCC:l})]})]})})},qi=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},Ai=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"inc",a=0,i=0,s=0,l=0,d=0,o=0,u=!0,j=e.condml,b=e.condsize;if(console.log(t),"mcinc"==r){var m=Number(e.quantityCCCVA)+Number(t);Number(m)>=Number(j)?(a=Math.floor(m/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA+l>=Number(j)&&(a+=1)):e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1);var O=Number(a)+Number(n);Number(O)>=Number(b)?(i=Math.floor(O/Number(b)),o=Number(O)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(O)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-c<0&&(u=!1)}else if("mdecinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA-l<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var x=Number(a);Number(x)>=Number(b)?(s=Math.floor(Number(x)/Number(b)),d=Number(x)-Number(b)*s,e.condval-d<0&&(s+=1)):e.condval-Number(x)<0&&(s+=1);var v=Number(n);Number(v)>=Number(b)?(i=Math.floor(v/Number(b)),o=Number(v)-Number(b)*i,e.condval+o>=Number(b)?i+=1:e.condval=Number(e.condval)+o):e.condval+Number(v)>=Number(b)&&(i+=1);var h=e.quantityBruteCVA+c+i;h-s<0&&(u=!1)}else if("decinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA-l<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var p=Number(a);Number(p)>=Number(b)?(s=Math.floor(Number(p)/Number(b)),d=Number(p)-Number(b)*s,e.condval-d<0&&(s+=1)):e.condval-Number(p)<0&&(s+=1);var f=Number(n);Number(f)>=Number(b)?(i=Math.floor(f/Number(b)),o=Number(f)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(f)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-(c+s)<0&&(u=!1)}else{var g=Number(e.quantityCCCVA)+Number(t);Number(g)>=Number(j)?(a=Math.floor(g/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA+l>=Number(j)&&(a+=1)):(e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1),u=!0)}return u},Si=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dec",a=0,i=0,s=0,l=0,d=!0,o=e.condml,u=e.condsize;if("pcdec"==r){Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var j=Number(a)+Number(n);Number(j)>=Number(u)?(i=Math.floor(Number(j)/Number(u)),l=Number(j)-Number(u)*i,e.condval-l<0&&(i+=1)):e.condval-Number(j)<0&&(i+=1),e.quantityBruteCVA+c-i<0&&(d=!1)}else if("mincdec"==r){var b=0,m=0,O=0,x=0,v=e.condml,h=e.condsize,p=Number(e.quantityCCCVA)+Number(t);Number(p)>=Number(v)?(b=Math.floor(p/Number(v)),O=Number(t)-Number(v)*b,e.quantityCCCVA+O>=Number(v)&&(b+=1)):e.quantityCCCVA+Number(t)>=Number(v)&&(b+=1);var f=Number(b);Number(f)>=Number(h)?(m=Math.floor(f/Number(h)),x=Number(f)-Number(h)*m,e.condval+x>=Number(h)&&(m+=1)):e.condval+Number(f)>=Number(h)&&(m+=1);var g=Number(n);Number(g)>=Number(h)?(i=Math.floor(Number(g)/Number(h)),l=Number(g)-Number(h)*b,e.condval-l<0&&(i+=1)):e.condval-Number(g)<0?i+=1:e.condval=e.condval-Number(g);var N=e.quantityBruteCVA+m+c;N-i&&(d=!1)}else if("incdec"==r){var y=0,C=0,q=0,A=0,S=e.condml,E=e.condsize,w=Number(e.quantityCCCVA)+Number(t);Number(w)>=Number(S)?(y=Math.floor(w/Number(S)),q=Number(t)-Number(S)*y,e.quantityCCCVA+q>=Number(S)&&(y+=1)):e.quantityCCCVA+Number(t)>=Number(S)&&(y+=1);var P=Number(y);Number(P)>=Number(E)?(C=Math.floor(P/Number(E)),A=Number(P)-Number(E)*C,e.condval+A>=Number(E)&&(C+=1)):e.condval+Number(P)>=Number(E)&&(C+=1);var V=Number(n);Number(V)>=Number(E)?(i=Math.floor(Number(V)/Number(E)),l=Number(V)-Number(E)*y,e.condval-l<0&&(i+=1)):e.condval-Number(V)<0&&(i+=1);var R=e.quantityBruteCVA+C,F=i+c;R-F<0&&(d=!1)}else{Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var D=Number(a)+Number(n);Number(D)>=Number(u)?(i=Math.floor(Number(D)/Number(u)),l=Number(D)-Number(u)*i,e.condval-l<0&&(i+=1)):e.condval-Number(D)<0&&(i+=1);var B=i+c;e.quantityBruteCVA-B<0&&(d=!1)}return d},Ei=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dec",r=0,a=0,i=e.doseDefault,s=!0;if("incdec"!=c){Number(t)>=Number(i)?(r=Math.floor(Number(t)/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA-a<0&&(r+=1)):e.quantityCCCVA-Number(t)<0&&(r+=1);var l=r+n;e.quantityBruteCVA-l<0&&(s=!1)}else{var d=Number(e.quantityCCCVA)+Number(t);Number(d)>=Number(i)?(r=Math.floor(d/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA+a>=Number(i)&&(r+=1)):e.quantityCCCVA+Number(t)>=Number(i)&&(r+=1),e.quantityBruteCVA+r-n<0&&(s=!1)}return s},wi=function(e,t,n){var c=t.contenu.find((function(t){return t.id==e.id}));console.log("minitial",t);var r=!1,a=0,i=0,s=0,l=!0,d="none",o=n.quantityParProduct,u=n.qttByCC,j=n.qttbylitre;if(qi(e)){r=!0,r=!1;var b=n.quantityParProduct,m=n.qttByCC,O=n.qttbylitre;console.log(b,m);var x=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.condval,v=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA,h=void 0!=c?null===c||void 0===c?void 0:c.qttbylitre:n.quantityBruteCVA;console.log(x,v,h),O==h&&b==x&&m==v&&(d="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc"),O==h&&b==x&&m>v&&(d="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc > cmdqttcc",0==(l=Si(e,i=m-v,a,s))&&(u=v)),O==h&&b==x&&m<v&&(d="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc < cmdqttcc",i=v-m,l=!0),O==h&&b>x&&m==v&&(d="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc == cmdqttcc",0==(l=Si(e,i,a=b-x,s))&&(o=x)),O==h&&b<x&&m==v&&(d="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc == cmdqttcc",a=x-b,l=!0),O==h&&b>x&&m>v&&(d="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(l=Si(e,i=m-v,a=b-x,s))&&(u=v,o=x)),O==h&&b<x&&m<v&&(d="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,l=!0),O==h&&b>x&&m<v&&(d="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(l=Si(e,i=v-m,a=b-x,s,"incdec"))&&(u=v,o=x)),O==h&&b<x&&m>v&&(d="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(l=Ai(e,i=m-v,a=x-b,s,"decinc"))&&(u=v,o=x)),O>h&&b==x&&m==v&&(d="qttlitre > cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",0==(l=Si(e,i,a,s=O-h))&&(j=h)),O<h&&b==x&&m==v&&(d="qttlitre < cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",s=h-O,l=!0),O>h&&b>x&&m>v&&(d="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(l=Si(e,i=m-v,a=b-x,s=O-h))&&(u=v,o=x,j=h)),O>h&&b>x&&m<v&&(d="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(l=Si(e,i=v-m,a=b-x,s=O-h,"incdec"))&&(u=v,o=x,j=h)),O>h&&b<x&&m>v&&(d="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(l=Ai(e,i=m-v,a=x-b,s=O-h,"decinc"))&&(u=v,o=x,j=h)),O>h&&b<x&&m<v&&(d="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",0==(l=Ai(e,i=v-m,a=x-b,s=O-h,"mcinc"))&&(u=v,o=x,j=h)),O<h&&b>x&&m>v&&(d="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(l=Si(e,i=m-v,a=b-x,s=h-O,"pcdec"))&&(u=v,o=x,j=h)),O<h&&b>x&&m<v&&(d="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(l=Si(e,i=v-m,a=b-x,s=h-O,"mincdec"))&&(u=v,o=x,j=h)),O<h&&b<x&&m>v&&(d="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(l=Ai(e,i=m-v,a=x-b,s=h-O,"mdecinc"))&&(u=v,o=x,j=h)),O<h&&b<x&&m<v&&(d="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,s=h-O,l=!0)}else{r=!1;var p=n.quantityParProduct,f=n.qttByCC;console.log(p,f);var g=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.quantityBruteCVA,N=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA;console.log(g,N),p>g&&f==N&&(d="qtt > cmdqtt && qttcc == cmdqttcc",a=p-g,console.log(e.quantityBruteCVA,a),e.quantityBruteCVA-a>=0?l=!0:(l=!1,o=g)),p<g&&f==N&&(d="qtt < cmdqtt && qttcc == cmdqttcc",a=g-p,l=!0),p==g&&f==N&&(d="qtt == cmdqtt && qttcc == cmdqttcc",l=!0),p==g&&f>N&&(d="qtt == cmdqtt && qttcc > cmdqttcc",l=Ei(e,i=f-N),u=N),p==g&&f<N&&(d="qtt == cmdqtt && qttcc < cmdqttcc",i=N-f,l=!0),p>g&&f<N&&(d="qtt > cmdqtt && qttcc < cmdqttcc",l=Ei(e,i=N-f,a=p-g,"incdec"),o=g,u=N),p<g&&f>N&&(d="qtt < cmdqtt && qttcc > cmdqttcc",a=g-p,i=f-N,l=!0),p<g&&f<N&&(a=g-p,i=N-f,d="qtt < cmdqtt && qttcc < cmdqttcc",l=!0),p>g&&f>N&&(d="qtt > cmdqtt && qttcc > cmdqttcc",l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=0,r=0,a=e.doseDefault,i=!0;Number(t)>=Number(a)?(c=Math.floor(Number(t)/Number(a)),r=Number(t)-Number(a)*c,e.quantityCCCVA-r<0&&(c+=1)):e.quantityCCCVA-Number(t)<0&&(c+=1);var s=c+Number(n);return e.quantityBruteCVA-s<0&&(i=!1),i}(e,i=f-N,a=p-g),o=g,u=N)}return console.log("--------"+d+"---------"),{normalQtt:o,normalQttCC:u,normalQttLitre:j,isSpecific:r,isValid:l}},Pi=function(e){return qi(e)?0==e.quantityBruteCVA&&0==e.quantityCCCVA&&0==e.condval:0==e.quantityBruteCVA&&0==e.quantityCCCVA},Vi=function(e){return e.filter((function(e){return qi(t=e)?0==t.quantityParProduct&&0==t.qttByCC&&0==t.qttbylitre:0==t.quantityParProduct&&0==t.qttByCC;var t})).length>0},Ri=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Fi(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Fi(n):n;return t}var Di=function(e){var t,n,c=e.state,a=(e.meta,e.setState),i=(e.products,e.commandes),s=e.disabled,l=Object(r.useState)("vente-depot"),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(1),m=Object(O.a)(b,2),v=(m[0],m[1],Object(r.useState)(null)),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)(null),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(o.g)(),A=Object(r.useState)([]),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(se.d)((function(e){return{fromdepots:e.fromdepots}})),V=P.fromdepots;Object(r.useEffect)((function(){w(null===i||void 0===i?void 0:i.contenu)}),[i]);var R=Object(se.c)(),D=Object(se.d)(pn("emprunters").value),B=Object(se.d)(pn("vaccinateurs").value),M=new Date,T=Object(r.useState)(M),k=Object(O.a)(T,2),I=k[0],_=k[1];Object(r.useEffect)((function(){R(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsxs)(_c.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"}),Object(x.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(x.jsxs)("select",{disabled:s,className:"form-control input-sm",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-depot",children:"Comptant"}),Object(x.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(x.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(_c.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{disabled:s,type:"date",onChange:function(e){return _(e.target.value)},value:I,className:"form-control"})})]}),"vente-depot-credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){C(e.target.value)},children:[Object(x.jsx)("option",{value:""}),D.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Vaccinateur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner un vaccinateur"}),B.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===c||void 0===c?void 0:c.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)(Ci,{product:e,state:c,index:t,setState:a,basket:V,dispatch:R},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",Ne(Ri(null===c||void 0===c?void 0:c.map((function(e){return qi(e)?e.prixlitre*e.quantityParProductDepot:e.prixVente*e.quantityParProductDepot})))+Ri(null===c||void 0===c||null===(t=c.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(Je.a)(n,"disabled",0===(null===c||void 0===c?void 0:c.length)),Object(Je.a)(n,"onClick",(function(){var e=function(){var e=Fi(E).filter((function(e){return!c.find((function(t){return e.id===t.id}))})),t=Fi(E).filter((function(e){return!c.find((function(t){return e.id===t.id}))}));return{exist:Fi(E).map((function(e){return c.find((function(t){return t.id==e.id}))})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,r=e.missing;R(hn("commandes").updateTransaction({id:null===i||void 0===i?void 0:i.id,contenu:c,type:"vente-depot",sorte:"sortie",vaccinateurId:p,status:"direct"===u,emprunterId:y,dateCom:null!=I?I:M,exist:t,added:n,missing:r},"update-from-depot")),q.push(F)})),Object(Je.a)(n,"type","button"),Object(Je.a)(n,"children","Valider l'operation"),n)),Object(x.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===c||void 0===c||c.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),R(Wa())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Bi=function(e){var t,n=e.state,c=e.setState,r=e.product,a=(Object(se.d)((function(e){return e.fromdepots})),Object(se.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id}))));return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(x.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&a?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[r.name," ",Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," ",Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:a?Object(x.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(re.a)(n)))},children:"Ajouter"})})})]})})})})},Mi=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(se.c)(),l=Object(se.d)(pn("commandes").value),d=Object(se.d)(pn("commandes").meta),u=Object(se.d)(pn("products").value),j=Object(se.d)(pn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(hn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]),a.a.useEffect((function(){h(br(u,g))}),[g]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;d.isFetching||A(null===(e=l[0])||void 0===e?void 0:e.contenu)}),[d]),a.a.useEffect((function(){j.isFetching||h(u)}),[j]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Editer un bon de commande",children:Object(x.jsx)(be,{title:"Editer un bon de commande"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(or.a,{children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(Jc.a,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(Bi,{state:q,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(Di,{disabled:j.isFetching,state:q,meta:d,setState:A,products:u,commandes:l[0]})})]})})})]})},Ti=function(){Object(r.useEffect)((function(){window.scrollTo(0,0)}),[])},ki=["isAuth","role","component","path"],Ii=function(e){var t=e.isAuth,n=e.role,c=e.component,r=e.path,a=Object(fe.a)(e,ki);return Ti(),Object(x.jsx)(o.b,Object(we.a)(Object(we.a)({},a),{},{render:function(e){var a=(e.location.state||{from:{pathname:"/"}}).from;return!t||n!==Yr||r!==T&&r!==k?Object(x.jsx)("div",{children:Object(x.jsx)(ce,{title:"CBV AMBALAVAO",children:Object(x.jsx)(c,Object(we.a)({},e))})}):Object(x.jsx)(o.a,{to:a})}}))};Ii.defaultProps={isAuth:!1,role:Yr,path:"/"};Object(se.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Ii);var _i=a.a.createContext();function Qi(e){var t=e.children,n=Object(se.d)((function(e){var t,n;return{user:null===(t=e.auth)||void 0===t?void 0:t.user,auth:e.auth,isLoggedIn:null===(n=e.auth)||void 0===n?void 0:n.isLoggedIn}})),c={user:n.user,auth:n.auth,isLoggedIn:n.isLoggedIn};return Object(x.jsx)(_i.Provider,{value:c,children:t})}function Li(e){var t=e.children;return Object(x.jsx)(_i.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a AuthContext");return t(e)}})}var Hi=function(){var e=Object(se.c)();return Object(x.jsxs)("div",{children:[Object(x.jsx)(Qi,{children:Object(x.jsx)(Li,{children:function(t){var n=t.auth,c=t.isLoggedIn;return Object(x.jsxs)(x.Fragment,{children:[null!=(null===n||void 0===n?void 0:n.error)&&Object(x.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(x.jsx)("h3",{children:"Se connecter"}),Object(x.jsxs)("div",{children:[c&&Object(x.jsx)(o.a,{to:"/"}),Object(x.jsx)(Mc,{enableReinitialize:!0,initialValues:{username:"",password:""},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password;e(function(e){var t=e.username,n=e.password;return function(){var e=Object(Sn.a)(An.a.mark((function e(c){return An.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt.a.post(Kr,{username:t,password:n}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),c({type:Pn,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){var t,n;c({type:Vn,payload:{success:null,error:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r})),console.log(t)},children:Object(x.jsxs)(Mc.Element,{children:[Object(x.jsx)(Mc.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex:Nom d'utilisateur",mb:3}),Object(x.jsx)(Mc.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(x.jsx)("button",{type:"submit",mt:4,children:"Se connecter"})]})})]})]})}})}),Object(x.jsx)("div",{mt:46,divShadow:"md"})]})},Ui=function(){var e=Object(se.c)();return Object(x.jsx)("div",{children:Object(x.jsx)(Qi,{children:Object(x.jsx)(Li,{children:function(t){var n=t.user,c=t.isLoggedIn;return Object(x.jsxs)(x.Fragment,{children:[c&&Object(x.jsx)(o.a,{to:{pathname:"/",state:{notification:{message:"Vous vous  etes connect\xe9 avec succes",type:"success"}}}}),null!=(null===n||void 0===n?void 0:n.error)&&Object(x.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(x.jsx)("h3",{children:"creer un compte"}),Object(x.jsxs)("div",{borderTop:"4px",boxShadow:"md",bg:"white",px:8,py:3,w:400,children:[c&&Object(x.jsx)(o.a,{to:"/"}),Object(x.jsx)(Mc,{enableReinitialize:!0,initialValues:{username:"",password:"",role:"ROLE_VENDEUR"},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password,a=t.role;e(function(e){var t=e.username,n=e.password,c=e.role;return function(){var e=Object(Sn.a)(An.a.mark((function e(r){return An.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zt.a.post(zr,{username:t,password:n,role:c}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),r({type:En,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){r({type:wn,payload:{user:null,success:null,error:e}})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r({type:wn,payload:{user:null,success:null,error:e.t0}});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r,role:a}))},children:Object(x.jsxs)(Mc.Element,{children:[Object(x.jsx)(Mc.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex: Nom d'utilisateur",mb:3}),Object(x.jsx)(Mc.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(x.jsx)(Mc.Field.Select,{label:"Role",name:"role",valueKey:"name",options:[{id:"ROLE_VENDEUR",name:"VENDEUR"},{id:"ROLE_ADMIN",name:"ADMIN"},{id:"ROLE_SEMI_ADMIN",name:"ROLE_SEMI_ADMIN"}]}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{color:"white",type:"submit",mt:4,children:"Se connecter"})})]})})]})]})}})})})},Yi=["isAuth","role","component"],zi=function(e){e.isAuth,e.role;var t=e.component,n=Object(fe.a)(e,Yi);return Ti(),Object(x.jsx)(o.b,Object(we.a)(Object(we.a)({},n),{},{component:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"",children:Object(x.jsx)("div",{children:Object(x.jsx)(t,Object(we.a)({},e))})})})}}))};zi.defaultProps={isAuth:!1,role:Yr};var Ki=Object(se.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(zi),Gi="SET_TO_MAGASIN_ITEMS",Wi="ADD_TO_MAGASIN",Ji="REMOVE_FROM_MAGASIN",Xi="CLEAR_MAGASIN",Zi="ADD_QTY_MAGASIN_ITEM",$i="MINUS_QTY_MAGASIN_ITEM",es="ADD_QTY_NUMBER_MAGASIN_ITEM",ts=function(){return{type:Xi}},ns=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{tomagasin:e,isItemOnDepotToMagasin:n,addToMagasin:function(e){n(e.id)?t(function(e){return{type:Ji,payload:e}}(e.id)):t(function(e){return{type:Wi,payload:e}}(e))}}},cs=function(e){var t,n=e.product,c=Object(se.d)((function(e){return e.tomagasins})),r=Object(se.c)(),a=ns(c,r),i=a.isItemOnDepotToMagasin,s=a.addToMagasin,l=!!i&&i(n.id);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{children:Object(x.jsxs)(Xc.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&l?"1px solid #a6a5a5":"",paddingTop:n&&l?"5px":"0px",boxShadow:n&&l?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)(Zc.a,{xs:9,children:[Object(x.jsxs)("div",{children:[n.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]}),Object(x.jsx)(Zc.a,{xs:3,children:n.id&&Object(x.jsx)("button",{disabled:n.quantityBrute<=0,className:" ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){s&&s(n)},children:l?"Retirer":"Ajouter"})})]})})})},rs=function(e){var t=e.product,n=Object(se.c)(),c=function(e){n(function(e,t){return{type:es,payload:{id:e,value:t}}}(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{w:28,bg:"whitesmoke",onChange:function(e){c(e)},min:0,defaultValue:t.quantityParProduct,step:1,max:t.quantityBrute,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},as=function(e){var t=e.product,n=Object(se.c)(),c=Object(se.d)((function(e){return e.tomagasins})),r=ns(c,n),a=r.isItemOnDepotToMagasin,i=r.addToMagasin,s=!!a&&a(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{children:t.name}),Object(x.jsx)("span",{children:Object(x.jsxs)("strong",{children:[" ",Ne(t.prixVente)]})})]}),Object(x.jsxs)("div",{className:"text-inline",children:[Object(x.jsxs)("small",{children:[t.type," "]}),Object(x.jsx)(rs,{product:t})]}),Object(x.jsx)("div",{children:s&&Object(x.jsx)("button",{onClick:function(){i&&i(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},is=function(){var e=Object(se.d)((function(e){return{tomagasins:e.tomagasins}})).tomagasins,t=new Date,n=Object(r.useState)(t),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(o.g)(),l=Object(se.d)(pn("commandes").meta),d=(Object(se.d)(pn("sortiedepots").meta),Object(se.c)());Object(r.useEffect)((function(){d(ts()),d(hn("commandes").fetch()),d(hn("sortiedepots").fetch())}),[]);var u;t.getDate(),t.getMonth(),t.getFullYear(),t.getHours(),t.getMinutes(),t.getSeconds();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"bg-dark text-white d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{children:["Depot to Magasin ("," ".concat(e.length," ").concat(e.length>1?"articles":"article"),")"]})}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return i(e.target.value)},value:a,className:"form-control"})})]}),e.length<=0&&Object(x.jsx)("div",{class:"alert alert-success ",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===e||void 0===e?void 0:e.map((function(t,n){return Object(x.jsx)(as,{product:t,tomagasin:e,dispatch:d},"".concat(null===t||void 0===t?void 0:t.id,"_").concat(n))})),e.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===e.length,onClick:function(){d(hn("commandes").createTransaction({id:Number(l.nextId),contenu:e,type:"cva",sorte:"sortie",status:!0,dateCom:null!=a?a:t},"add-to-magasin")),d(ts()),s.push(Q)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==e.length&&d(ts())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})]}),e.length>0&&Object(x.jsx)(_c.a.Footer,{className:"d-flex justify-content-between",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h3",{style:{fontSize:"14px"},children:[Object(x.jsx)("strong",{children:"Total : "}),Ne((u=e.map((function(e){return e.prixVente*e.quantityParProduct})),u&&0!==(null===u||void 0===u?void 0:u.length)?u.reduce((function(e,t){return e+t}),0):0))]})})})]})})},ss=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(O.a)(a,2),s=(i[0],i[1],Object(se.d)(pn("products").value)),l=Object(se.d)(pn("products").meta),d=Object(se.c)(),o=Object(r.useState)(""),u=Object(O.a)(o,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){d(hn("products").fetch())}),[]),Object(r.useEffect)((function(){l.isFetching||c(s)}),[l]),Object(r.useEffect)((function(){c(br(s,j))}),[j]),Object(x.jsx)(or.a,{children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:"Produits"}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){b(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[n.map((function(e){return Object(x.jsx)(cs,{product:e})})),0===s.length&&"Aucune enregistrement trouv\xe9"]})]})," "]})," "]})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(is,{})})]})})},ls=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Depot vers magasin",children:Object(x.jsx)(be,{title:"Depot vers magasin"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(ss,{})})]})})};var ds=function(e){var t=e.model,n=e.isDisabled,c=e.entity,r=Object(se.c)(),a=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",disabled:n,onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer le produit ?")&&(r(hn(t).deleteTransaction(c,"/delete-to-magasin")),a.goBack())},children:"Supprimer"})})},os=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0},us=function(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(t),l=Object(O.a)(s,2),o=l[0],u=l[1],j=Object(r.useState)([e,t]),b=Object(O.a)(j,2),m=b[0],v=b[1],h=(Object(r.useRef)(null),Object(r.useRef)(null),Object(se.d)(pn("commandes").value)),p=Object(se.d)(pn("commandes").meta),f=Object(se.c)();Object(r.useEffect)((function(){f(function(e,t){return dn("commandes",{path:"/cva?deb=".concat(e,"&fin=").concat(t),replace:!0})}(a,o))}),[a,o]),Object(r.useEffect)((function(){null!==m?(m[0]&&i(m[0]),m[1]&&u(m[1])):(i(e),u(t))}),[m]);var g=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t},N=function(e){var t=0;return null===e||void 0===e||e.forEach((function(e){t+=1*e.quantityParProduct})),t},y=[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",ge(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:os(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Qt\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:N(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(g(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n,c,r=1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/depot/to/magasin/detail/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-green btn-sm mr-2",disabled:r,children:"D\xe9tails"}),Object(x.jsx)(d.b,{to:"/depot/to/magasin/edit/".concat(null===(c=e.row.original)||void 0===c?void 0:c.id),className:"btn btn-warning btn-sm mr-2",disabled:r,children:"Editer"}),Object(x.jsx)(ds,{model:"tomagasins",isDisabled:r,entity:e.row.original})]})}}];return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Historique sortie vers Magasin",children:Object(x.jsx)(be,{title:"Historique sortie vers Magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie vers Magasin"}),Object(x.jsx)("p",{children:"".concat(ge(a)," ->  ").concat(ge(o))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:v,value:m})})," "]}),Object(x.jsx)(Yc,{filter:!1,data:h.sort((function(e,t){return t.id-e.id})),meta:p,columns:y})]})," "]})};var js=function(e){var t=e.model,n=e.entity,c=Object(se.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&c(hn(t).createTransaction({commande:n,original:n},"/delete-from-magasin"))},children:"Supprimer"})})},bs="SET_SEARCH_BY_DATE",ms="RESET_SEARCH_BY_DATE",Os=function(e,t){return{type:bs,payload:{deb:e,fin:t}}},xs=function(e,t){return{type:ms}},vs=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},hs=function(){var e=Object(se.d)((function(e){return e.searchbydate})),t=Object(o.i)().type,n=Object(r.useState)([e.deb,e.fin]),c=Object(O.a)(n,2),i=c[0],s=c[1],l=(Object(r.useRef)(null),Object(r.useRef)(null),Object(se.d)(pn("commandes").value)),u=Object(se.d)(pn("commandes").meta),j=Object(se.c)();Object(r.useEffect)((function(){j(gn(e.deb,e.fin,t))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==i&&i[0]&&j(Os(i[0],i[1]))}),[i]);var b=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},m=function(e){return b(null===e||void 0===e?void 0:e.map((function(e){return qi(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+b(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},v=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==e.row.original.isdeleted&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",ge(e.row.original.deletedat)]})]}),null==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsx)("p",{children:vs(null===(n=e.row.original)||void 0===n?void 0:n.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(c=e.row.original)||void 0===c||null===(r=c.contenu)||void 0===r?void 0:r.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(m(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsx)(x.Fragment,{children:!e.row.original.isdeleted&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/detailvendeur/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(d.b,{to:"/vendeur-commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(js,{model:"fromagasins",entity:e.row.original})]})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("div",{className:"p-3 container",children:[Object(x.jsx)("div",{class:"d-flex justify-content-end",children:Object(x.jsx)(d.b,{class:"btn btn-primary my-3",to:I,children:"Revenir en arriere"})}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"vente-cva"==t?"Historique de vente":"CREDIT"}),Object(x.jsx)("p",{children:"".concat(ge(e.deb)," ->  ").concat(ge(e.fin))}),Object(x.jsx)("div",{className:"bg-thead p-3 my-2",style:{width:"30%"},children:Object(x.jsxs)("h2",{children:["Recette: ",Ne(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return l.length>0?e.map((function(e){t+=m(null===e||void 0===e?void 0:e.contenu)})):t=0,t}(l))]})})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:s,value:i})})," "]}),Object(x.jsx)(Yc,{data:l.sort((function(e,t){return t.id-e.id})),meta:u,columns:v,filter:!1})]})," "]})})},ps=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},fs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"inc",a=0,i=0,s=0,l=0,d=0,o=0,u=!0,j=e.condml,b=e.condsize;if(console.log(t),"mcinc"==r){var m=Number(e.quantityCCCVA)+Number(t);Number(m)>=Number(j)?(a=Math.floor(m/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA+l>=Number(j)&&(a+=1)):e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1);var O=Number(a)+Number(n);Number(O)>=Number(b)?(i=Math.floor(O/Number(b)),o=Number(O)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(O)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-c<0&&(u=!1)}else if("mdecinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA-l<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var x=Number(a);Number(x)>=Number(b)?(s=Math.floor(Number(x)/Number(b)),d=Number(x)-Number(b)*s,e.condval-d<0&&(s+=1)):e.condval-Number(x)<0&&(s+=1);var v=Number(n);Number(v)>=Number(b)?(i=Math.floor(v/Number(b)),o=Number(v)-Number(b)*i,e.condval+o>=Number(b)?i+=1:e.condval=Number(e.condval)+o):e.condval+Number(v)>=Number(b)&&(i+=1);var h=e.quantityBruteCVA+c+i;h-s<0&&(u=!1)}else if("decinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA-l<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var p=Number(a);Number(p)>=Number(b)?(s=Math.floor(Number(p)/Number(b)),d=Number(p)-Number(b)*s,e.condval-d<0&&(s+=1)):e.condval-Number(p)<0&&(s+=1);var f=Number(n);Number(f)>=Number(b)?(i=Math.floor(f/Number(b)),o=Number(f)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(f)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-(c+s)<0&&(u=!1)}else{var g=Number(e.quantityCCCVA)+Number(t);Number(g)>=Number(j)?(a=Math.floor(g/Number(j)),l=Number(t)-Number(j)*a,e.quantityCCCVA+l>=Number(j)&&(a+=1)):(e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1),u=!0)}return u},gs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dec",a=0,i=0,s=0,l=0,d=!0,o=e.condml,u=e.condsize;if("pcdec"==r){Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var j=Number(a)+Number(n);Number(j)>=Number(u)?(i=Math.floor(Number(j)/Number(u)),l=Number(j)-Number(u)*i,e.condval-l<0&&(i+=1)):e.condval-Number(j)<0&&(i+=1),e.quantityBruteCVA+c-i<0&&(d=!1)}else if("mincdec"==r){var b=0,m=0,O=0,x=0,v=e.condml,h=e.condsize,p=Number(e.quantityCCCVA)+Number(t);Number(p)>=Number(v)?(b=Math.floor(p/Number(v)),O=Number(t)-Number(v)*b,e.quantityCCCVA+O>=Number(v)&&(b+=1)):e.quantityCCCVA+Number(t)>=Number(v)&&(b+=1);var f=Number(b);Number(f)>=Number(h)?(m=Math.floor(f/Number(h)),x=Number(f)-Number(h)*m,e.condval+x>=Number(h)&&(m+=1)):e.condval+Number(f)>=Number(h)&&(m+=1);var g=Number(n);Number(g)>=Number(h)?(i=Math.floor(Number(g)/Number(h)),l=Number(g)-Number(h)*b,e.condval-l<0&&(i+=1)):e.condval-Number(g)<0?i+=1:e.condval=e.condval-Number(g);var N=e.quantityBruteCVA+m+c;N-i&&(d=!1)}else if("incdec"==r){var y=0,C=0,q=0,A=0,S=e.condml,E=e.condsize,w=Number(e.quantityCCCVA)+Number(t);Number(w)>=Number(S)?(y=Math.floor(w/Number(S)),q=Number(t)-Number(S)*y,e.quantityCCCVA+q>=Number(S)&&(y+=1)):e.quantityCCCVA+Number(t)>=Number(S)&&(y+=1);var P=Number(y);Number(P)>=Number(E)?(C=Math.floor(P/Number(E)),A=Number(P)-Number(E)*C,e.condval+A>=Number(E)&&(C+=1)):e.condval+Number(P)>=Number(E)&&(C+=1);var V=Number(n);Number(V)>=Number(E)?(i=Math.floor(Number(V)/Number(E)),l=Number(V)-Number(E)*y,e.condval-l<0&&(i+=1)):e.condval-Number(V)<0&&(i+=1);var R=e.quantityBruteCVA+C,F=i+c;R-F<0&&(d=!1)}else{Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var D=Number(a)+Number(n);Number(D)>=Number(u)?(i=Math.floor(Number(D)/Number(u)),l=Number(D)-Number(u)*i,e.condval-l<0&&(i+=1)):e.condval-Number(D)<0&&(i+=1);var B=i+c;e.quantityBruteCVA-B<0&&(d=!1)}return d},Ns=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dec",r=0,a=0,i=e.doseDefault,s=!0;if("incdec"!=c){Number(t)>=Number(i)?(r=Math.floor(Number(t)/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA-a<0&&(r+=1)):e.quantityCCCVA-Number(t)<0&&(r+=1);var l=r+n;e.quantityBruteCVA-l<0&&(s=!1)}else{var d=Number(e.quantityCCCVA)+Number(t);Number(d)>=Number(i)?(r=Math.floor(d/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA+a>=Number(i)&&(r+=1)):e.quantityCCCVA+Number(t)>=Number(i)&&(r+=1),e.quantityBruteCVA+r-n<0&&(s=!1)}return s},ys=function(e,t,n){var c=t.contenu.find((function(t){return t.id==e.id}));console.log("minitial",t);var r=!1,a=0,i=0,s=0,l=!0,d="none",o=n.quantityParProduct,u=n.qttByCC,j=n.qttbylitre;if(ps(e)){r=!0,r=!1;var b=n.quantityParProduct,m=n.qttByCC,O=n.qttbylitre;console.log(b,m);var x=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.condval,v=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA,h=void 0!=c?null===c||void 0===c?void 0:c.qttbylitre:n.quantityBruteCVA;console.log(x,v,h),O==h&&b==x&&m==v&&(d="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc"),O==h&&b==x&&m>v&&(d="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc > cmdqttcc",0==(l=gs(e,i=m-v,a,s))&&(u=v)),O==h&&b==x&&m<v&&(d="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc < cmdqttcc",i=v-m,l=!0),O==h&&b>x&&m==v&&(d="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc == cmdqttcc",0==(l=gs(e,i,a=b-x,s))&&(o=x)),O==h&&b<x&&m==v&&(d="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc == cmdqttcc",a=x-b,l=!0),O==h&&b>x&&m>v&&(d="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(l=gs(e,i=m-v,a=b-x,s))&&(u=v,o=x)),O==h&&b<x&&m<v&&(d="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,l=!0),O==h&&b>x&&m<v&&(d="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(l=gs(e,i=v-m,a=b-x,s,"incdec"))&&(u=v,o=x)),O==h&&b<x&&m>v&&(d="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(l=fs(e,i=m-v,a=x-b,s,"decinc"))&&(u=v,o=x)),O>h&&b==x&&m==v&&(d="qttlitre > cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",0==(l=gs(e,i,a,s=O-h))&&(j=h)),O<h&&b==x&&m==v&&(d="qttlitre < cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",s=h-O,l=!0),O>h&&b>x&&m>v&&(d="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(l=gs(e,i=m-v,a=b-x,s=O-h))&&(u=v,o=x,j=h)),O>h&&b>x&&m<v&&(d="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(l=gs(e,i=v-m,a=b-x,s=O-h,"incdec"))&&(u=v,o=x,j=h)),O>h&&b<x&&m>v&&(d="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(l=fs(e,i=m-v,a=x-b,s=O-h,"decinc"))&&(u=v,o=x,j=h)),O>h&&b<x&&m<v&&(d="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",0==(l=fs(e,i=v-m,a=x-b,s=O-h,"mcinc"))&&(u=v,o=x,j=h)),O<h&&b>x&&m>v&&(d="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(l=gs(e,i=m-v,a=b-x,s=h-O,"pcdec"))&&(u=v,o=x,j=h)),O<h&&b>x&&m<v&&(d="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(l=gs(e,i=v-m,a=b-x,s=h-O,"mincdec"))&&(u=v,o=x,j=h)),O<h&&b<x&&m>v&&(d="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(l=fs(e,i=m-v,a=x-b,s=h-O,"mdecinc"))&&(u=v,o=x,j=h)),O<h&&b<x&&m<v&&(d="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=v-m,s=h-O,l=!0)}else{r=!1;var p=n.quantityParProduct,f=n.qttByCC;console.log(p,f);var g=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.quantityBruteCVA,N=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA;console.log(g,N),p>g&&f==N&&(d="qtt > cmdqtt && qttcc == cmdqttcc",a=p-g,console.log(e.quantityBruteCVA,a),e.quantityBruteCVA-a>=0?l=!0:(l=!1,o=g)),p<g&&f==N&&(d="qtt < cmdqtt && qttcc == cmdqttcc",a=g-p,l=!0),p==g&&f==N&&(d="qtt == cmdqtt && qttcc == cmdqttcc",l=!0),p==g&&f>N&&(d="qtt == cmdqtt && qttcc > cmdqttcc",l=Ns(e,i=f-N),u=N),p==g&&f<N&&(d="qtt == cmdqtt && qttcc < cmdqttcc",i=N-f,l=!0),p>g&&f<N&&(d="qtt > cmdqtt && qttcc < cmdqttcc",l=Ns(e,i=N-f,a=p-g,"incdec"),o=g,u=N),p<g&&f>N&&(d="qtt < cmdqtt && qttcc > cmdqttcc",a=g-p,i=f-N,l=!0),p<g&&f<N&&(a=g-p,i=N-f,d="qtt < cmdqtt && qttcc < cmdqttcc",l=!0),p>g&&f>N&&(d="qtt > cmdqtt && qttcc > cmdqttcc",l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=0,r=0,a=e.doseDefault,i=!0;Number(t)>=Number(a)?(c=Math.floor(Number(t)/Number(a)),r=Number(t)-Number(a)*c,e.quantityCCCVA-r<0&&(c+=1)):e.quantityCCCVA-Number(t)<0&&(c+=1);var s=c+Number(n);return e.quantityBruteCVA-s<0&&(i=!1),i}(e,i=f-N,a=p-g),o=g,u=N)}return console.log("--------"+d+"---------"),{normalQtt:o,normalQttCC:u,normalQttLitre:j,isSpecific:r,isValid:l}},Cs=function(e){return ps(e)?0==e.quantityBruteCVA&&0==e.quantityCCCVA&&0==e.condval:0==e.quantityBruteCVA&&0==e.quantityCCCVA},qs=function(e){return e.filter((function(e){return ps(t=e)?0==t.quantityParProduct&&0==t.qttByCC&&0==t.qttbylitre:0==t.quantityParProduct&&0==t.qttByCC;var t})).length>0};var As=function(e){var t=e.model,n=e.entity,c=Object(se.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&c(hn(t).createTransaction({commande:n,original:n},"/delete-from-magasin"))},children:"Supprimer"})})},Ss=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Es=function(){var e=Object(se.d)((function(e){return e.searchbydate})),t=Object(o.i)().type,n=Object(r.useState)([e.deb,e.fin]),c=Object(O.a)(n,2),i=c[0],s=c[1],l=(Object(r.useRef)(null),Object(r.useRef)(null),Object(se.d)(pn("commandes").value)),u=Object(se.d)(pn("commandes").meta),j=Object(se.c)();Object(r.useEffect)((function(){j(gn(e.deb,e.fin,t))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==i&&i[0]&&j(Os(i[0],i[1]))}),[i]);var b=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},m=function(e){return b(null===e||void 0===e?void 0:e.map((function(e){return ps(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+b(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},v=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",ge(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Ss(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(m(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n,c;return Object(x.jsx)(x.Fragment,{children:!(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)(d.b,{to:"/detailvendeuradmin/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(d.b,{to:"/vendeur-admin-commande/".concat(null===(c=e.row.original)||void 0===c?void 0:c.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(As,{model:"fromagasins",entity:e.row.original})]})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Historique de vente du magasin",children:Object(x.jsx)(be,{title:"Historique de vente du magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"vente-cva"==t?"Historique de vente":"CREDIT"}),Object(x.jsx)("p",{children:"".concat(ge(e.deb)," ->  ").concat(ge(e.fin))}),Object(x.jsx)("div",{className:"bg-thead p-3 my-2",style:{width:"30%"},children:Object(x.jsxs)("h2",{children:["Recette: ",Ne(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return l.length>0?e.map((function(e){t+=m(null===e||void 0===e?void 0:e.contenu)})):t=0,t}(l))]})})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:s,value:i})})," "]}),Object(x.jsx)(Yc,{data:l.sort((function(e,t){return t.id-e.id})),meta:u,columns:v,filter:!1})]})," "]})})},ws=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("products").meta),n=Object(se.c)();Object(r.useEffect)((function(){n(hn("products").fetch())}),[]);var c=a.a.useMemo((function(){return[{Header:"Nom de l'article",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"badge badge-primary",children:null===(t=e.row.original)||void 0===t||null===(n=t.fournisseur)||void 0===n?void 0:n.name})})}},{Header:"Quantit\xe9",accessor:"quantityBruteCVA"},{Header:"Conditionnement (ML)",accessor:"condval"},{Header:"Reste en ML",accessor:"quantityCC",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:null==(null===(t=e.row.original)||void 0===t?void 0:t.quantityCCCVA)?0:null===(n=e.row.original)||void 0===n?void 0:n.quantityCCCVA})}}]}));return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Etat de stock du Magasin",children:Object(x.jsx)(be,{title:"Etat de stock du Magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"text-uppercase",children:"Etat de stock du Magasin"})})}),Object(x.jsx)("div",{className:"col-lg-6 text-right"})," "]}),Object(x.jsx)(Yc,{data:e,meta:t,columns:c})]})]})},Ps=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Vs=function(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(t),o=Object(O.a)(l,2),u=o[0],j=o[1],b=(Object(r.useRef)(null),Object(r.useRef)(null),Object(se.d)(pn("commandes").value)),m=Object(se.d)(pn("commandes").meta),v=Object(r.useState)([e,t]),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(se.c)();Object(r.useEffect)((function(){g(gn(i,u))}),[i,u]),Object(r.useEffect)((function(){null!==p?(p[0]&&s(p[0]),p[1]&&j(p[1])):(s(e),j(t))}),[p]);var N=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},y=function(e){return N(null===e||void 0===e?void 0:e.map((function(e){return qi(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+N(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},C=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",ge(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Ps(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:Ne(y(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.b,{className:"btn btn-sm  btn-green",to:"/magasin/detail/vente/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),children:"D\xe9tails"})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Historique de vente du magasin",children:Object(x.jsx)(be,{title:"Historique de vente du magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row my-2",children:[Object(x.jsx)("div",{className:"col-lg-8",children:Object(x.jsxs)("div",{children:[i&&u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Historique de vente du magasin"}),Object(x.jsxs)("span",{children:["Du: ",ge(i)," Au ",ge(u)]})]})," "]})}),Object(x.jsx)("div",{className:"col-lg-4 text-right",children:Object(x.jsx)("div",{children:Object(x.jsx)(pe.a,{locale:"fr-FR",onChange:f,value:p})})})]}),Object(x.jsx)(Yc,{filter:!1,data:b,meta:m,columns:C})]})]})})},Rs=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var Fs=Object(o.j)((function(e){var t,n,c,a,i,s,l,u,j,b,m=Object(o.g)(),O=Object(o.i)().id,v=Object(se.d)(pn("commandes").value),h=Object(se.c)();return Object(r.useEffect)((function(){h(hn("commandes").get(O))}),[O]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("div",{className:"py-5 container",children:[Object(x.jsx)("div",{class:"d-flex justify-content-start",children:Object(x.jsx)("button",{class:"btn btn-primary btn-sm ",onClick:function(){return m.goBack()},children:"Revenir en arriere"})}),Object(x.jsxs)("div",{children:["credit-cva"==(null===(t=v[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("div",{className:"bg-info my-3 py-2",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"p-2",children:["Nom:",null===(n=v[0])||void 0===n?void 0:n.emprunter.name]}),Object(x.jsxs)("h5",{className:"p-2",children:["Contact:",null===(c=v[0])||void 0===c?void 0:c.emprunter.contact]})]})}),v.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("div",{className:"my-2",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",ge(null===(a=v[0])||void 0===a?void 0:a.dateCom)]}),Object(x.jsx)(d.b,{to:"/vendeur-commande/".concat(null===(i=v[0])||void 0===i?void 0:i.id),className:"btn btn-warning btn-sm mr-2",children:"Editer le commande"})]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:Ne(Rs(null===(s=v[0])||void 0===s||null===(l=s.contenu)||void 0===l?void 0:l.map((function(e){return ua(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Rs(null===(u=v[0])||void 0===u||null===(j=u.contenu)||void 0===j?void 0:j.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),v.length>0&&(null===(b=v[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[ua(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),Ne(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",Ne(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),Ne(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",Ne(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",Ne(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",Ne(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:ua(e)?Ne(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre+e.prixParCC*e.qttByCC):Ne(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})})),Ds=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var Bs=Object(o.j)((function(e){Object(o.g)();var t,n,c,a,i,s,l,u,j,b,m=Object(o.i)().id,O=Object(se.d)(pn("commandes").value),v=Object(se.c)();return Object(r.useEffect)((function(){v(hn("commandes").get(m))}),[m]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Detail de vente du magasin",children:Object(x.jsx)(be,{title:"Detail de vente du magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"py-5 container",children:[Object(x.jsxs)("div",{children:["credit-cva"==(null===(t=O[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("div",{className:"bg-info my-3 py-2",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"p-2",children:["Nom:",null===(n=O[0])||void 0===n?void 0:n.emprunter.name]}),Object(x.jsxs)("h5",{className:"p-2",children:["Contact:",null===(c=O[0])||void 0===c?void 0:c.emprunter.contact]})]})}),O.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("div",{className:"my-2",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",ge(null===(a=O[0])||void 0===a?void 0:a.dateCom)]}),Object(x.jsx)(d.b,{to:"/vendeur-admin-commande/".concat(null===(i=O[0])||void 0===i?void 0:i.id),className:"btn btn-warning btn-sm mr-2",children:"Editer le commande"})]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:Ne(Ds(null===(s=O[0])||void 0===s||null===(l=s.contenu)||void 0===l?void 0:l.map((function(e){return ua(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Ds(null===(u=O[0])||void 0===u||null===(j=u.contenu)||void 0===j?void 0:j.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),O.length>0&&(null===(b=O[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[ua(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),Ne(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",Ne(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),Ne(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",Ne(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",Ne(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",Ne(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:ua(e)?Ne(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre+e.prixParCC*e.qttByCC):Ne(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})})),Ms=(c(513),c(1044));c(1059),c(1045),c(1060),c(1049),c(504),c(1004),c(505);c(158);c(1046);var Ts=["isAuth","role","component"],ks=function(e){e.isAuth,e.role;var t=e.component,n=Object(fe.a)(e,Ts);return Ti(),Object(x.jsx)(o.b,Object(we.a)(Object(we.a)({},n),{},{component:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ce,{title:"CBV AMBALAVAO",children:Object(x.jsx)(t,Object(we.a)({},e))})})}}))};ks.defaultProps={isAuth:!1,role:Yr};var Is=Object(se.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(ks),_s=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(Object(se.c)(),function(e){!function(e,t,n){var a=Object(re.a)(c);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{w:28,bg:"whitesmoke",onChange:function(e){a(Number(e))},min:0,defaultValue:t.quantityParProduct,step:1,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Qs=function(e){var t=e.product,n=Object(se.c)();return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Remise : (en Ariary)"}),Object(x.jsxs)("td",{className:"d-flex",children:[" ",Object(x.jsxs)(Sc.c,{bg:"whitesmoke",onChange:function(e){!function(e){n(aa(t.id,e))}(Number(e))},min:0,defaultValue:t.remise,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})]})]})},Ls=function(e){var t=e.product,n=e.index,c=e.isItemOnApprov,r=(e.addToApprov,e.state),a=e.setState;Object(se.c)(),!!c&&c(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(x.jsx)("div",{style:{width:"65%"},children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom de l'article : "}),Object(x.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:Ne(t.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Montant HT:"}),Object(x.jsx)("td",{children:Ne(t.prixFournisseur*t.quantityParProduct)})]}),Object(x.jsx)(Qs,{product:t})]})}),Object(x.jsx)("div",{className:"d-flex mt-3",children:Object(x.jsx)(_s,{product:t,index:n,state:r,setState:a})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){return function(e){a(r.filter((function(t){return t.id!==e})))}(null===t||void 0===t?void 0:t.id)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})};var Hs=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Us=function(e,t){return Hs(e)*t/100},Ys=function(e,t){return Hs(e)-Us(e,t)},zs=function(e){var t=e.state,n=e.meta,c=e.setState,a=e.approv,i=e.disabled,s=Object(r.useState)(null===t||void 0===t?void 0:t.remise),l=Object(O.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)(null===t||void 0===t?void 0:t.dateEcheance),b=Object(O.a)(j,2),m=b[0],v=b[1],h=Object(r.useState)(null===t||void 0===t?void 0:t.dateApprov),p=Object(O.a)(h,2),f=p[0],g=p[1],N=Object(r.useState)(null===a||void 0===a?void 0:a.contenu),y=Object(O.a)(N,2),C=y[0],q=(y[1],Object(r.useState)(null===t||void 0===t?void 0:t.remarque)),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(r.useState)(""),P=Object(O.a)(w,2),V=(P[0],P[1],Object(r.useState)(null===t||void 0===t?void 0:t.typePaye)),R=Object(O.a)(V,2),F=R[0],D=R[1],B=Object(se.c)(),T=Object(o.g)();function k(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?k(n):n;return t}return Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(x.jsxs)("div",{children:["Approvisionenement ("," ".concat(null===t||void 0===t?void 0:t.length," ").concat((null===t||void 0===t?void 0:t.length)>1?"articles":"article"),")"]})}),Object(x.jsxs)(_c.a.Body,{style:{height:"500px",maxHeight:"500px",overflowY:"auto",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de l'approvisionnement :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:i,onChange:function(e){return g(e.target.value)},value:f,className:"form-control"})})]}),!n.isFetching&&(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)("div",{class:"alert alert-success ",children:"Aucune enregistrement trouv\xe9 !!!"})]}),n.isFetching&&Object(x.jsx)("p",{children:"Chargement en cours ..."}),null===t||void 0===t?void 0:t.map((function(e,n){return Object(x.jsx)(Ls,{product:e,state:t,index:n,setState:c,dispatch:B},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(n))})),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMISE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,disabled:i,value:d,onChange:function(e){u(e.target.value)}})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"PAIEMENT LE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"date",disabled:i,onChange:function(e){return v(e.target.value)},value:m,className:"form-control"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(x.jsx)("td",{children:Object(x.jsxs)("select",{className:"form-control",onChange:function(e){D(e.target.value)},children:[Object(x.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(x.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(x.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(x.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(x.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMARQUE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("textarea",{disabled:i,className:"form-control",onChange:function(e){E(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement",children:S})})]})]})}),Object(x.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(x.jsx)("strong",{children:Object(x.jsx)(Ic.a,{value:Hs(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(x.jsx)("strong",{children:Object(x.jsx)(Ic.a,{value:Us(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),d),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(x.jsx)("strong",{children:Object(x.jsx)(Ic.a,{value:Ys(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),d),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(we.a)(Object(we.a)({},t),{},{children:e}))}})})]}),Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase",children:Object(x.jsxs)("strong",{children:[Object(kc.NumberToLetter)(Ys(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),d))," ","ARIARY"]})})]})]})]}),Object(x.jsx)(_c.a.Footer,{children:Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{disabled:i,className:"btn btn-green btn-sm mr-2",onClick:function(){var e=function(){var e=k(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=k(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:k(C).map((function(e){return t.find((function(t){return t.id==e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),n=e.exist,c=e.added,r=e.missing;B(hn("approvis").updateTransaction({id:null===a||void 0===a?void 0:a.id,contenu:t,totalht:Hs(t.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),remise:d,total:Ys(t.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise})),d),dateApprov:f,dateEcheance:m,remarque:S,typePaye:F,exist:n,missing:r,added:c},"update-facture")),T.push(M)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{disabled:i,className:"btn btn-danger btn-sm",onClick:function(){return c(null===a||void 0===a?void 0:a.contenu)},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})},Ks=function(e){var t,n=e.product,c=e.state,r=e.setState,a=(Object(se.d)((function(e){return e.approvisionnements})),Object(se.c)(),!!(null===c||void 0===c?void 0:c.find((function(e){return(null===e||void 0===e?void 0:e.id)===n.id}))));return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{children:Object(x.jsxs)(Xc.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&a?"1px solid #a6a5a5":"",boxShadow:n&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Zc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===n||void 0===n?void 0:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",Ne(null===n||void 0===n?void 0:n.prixFournisseur)]})})]})}),Object(x.jsx)(Zc.a,{xs:3,children:(null===n||void 0===n?void 0:n.id)&&Object(x.jsx)(x.Fragment,{children:a?Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){r(c.filter((function(t){return t.id!==e})))}(null===n||void 0===n?void 0:n.id)},children:"Retirer"}):Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){r(c.some((function(e){return e.id===n.id}))?c:[n].concat(Object(re.a)(c)))},children:"Ajouter"})})})]})})})},Gs=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(se.c)(),l=Object(se.d)(pn("approvis").value),d=Object(se.d)(pn("approvis").meta),u=Object(se.d)(pn("products").value),j=Object(se.d)(pn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(hn("approvis").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];Object(r.useEffect)((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2),w=E[0],P=E[1];return Object(r.useEffect)((function(){h(null!=w?fa(u,g,w):br(u,g))}),[g]),Object(r.useEffect)((function(){h(""!=g?fa(u,g,w):va(u,w))}),[w]),Object(r.useEffect)((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;d.isFetching||A(null===(e=l[0])||void 0===e?void 0:e.contenu)}),[d]),Object(r.useEffect)((function(){j.isFetching||h(u)}),[j]),console.log(e),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Edition de facture",children:Object(x.jsx)(be,{title:"Edition de facture"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(or.a,{children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:5,children:Object(x.jsx)(Jc.a,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsx)(Ma,{model:"fournisseurs",children:Object(x.jsx)(Ta,{children:function(e){var t=e.data;e.meta;return Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("select",{className:"form-control",selected:2==w,onChange:function(e){P(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(Ks,{state:q,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Zc.a,{xs:7,children:Object(x.jsx)(zs,{disabled:1==j.isFetching,state:q,meta:d,setState:A,products:u,approv:l[0]})})]})})})]})},Ws=function(e){var t,n=e.key,c=e.product,a=Object(se.d)((function(e){return e.fromdepots})),i=Object(se.c)(),s=bi(a,i),l=s.isItemFromDepot,d=s.addFromDepot,o=!!l&&l(c.id);Object(r.useEffect)((function(){o||(c.qttByCC=0,c.quantityParProduct=0)}),[o]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{style:{width:"100%"},children:Object(x.jsxs)(Xc.a,{className:" ".concat(c.id?"":"product-loading"),style:{boxShadow:c&&o?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Zc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===c||void 0===c?void 0:c.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===c||void 0===c||null===(t=c.fournisseur)||void 0===t?void 0:t.name})]})}),Object(x.jsx)(Zc.a,{xs:3,children:(null===c||void 0===c?void 0:c.id)&&Object(x.jsx)("button",{disabled:0===c.quantityBrute,className:"mt-3 ".concat(o?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(c)},children:o?"Retirer":"Ajouter"})})]})},n)})},Js=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Xs=function(e){e.setRegenerate;var t=Object(r.useState)("vente-depot"),n=Object(O.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(1),s=Object(O.a)(i,2),l=(s[0],s[1],Object(r.useState)(null)),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(null),m=Object(O.a)(b,2),v=m[0],h=m[1],p=Object(o.g)(),f=Object(se.d)((function(e){return{fromdepots:e.fromdepots}})).fromdepots,g=Object(se.c)(),N=Object(se.d)(pn("emprunters").value),y=Object(se.d)(pn("vaccinateurs").value),C=(Object(se.d)(pn("commandes").meta),Object(se.d)(pn("commandes").value),new Date),q=Object(r.useState)(C),E=Object(O.a)(q,2),w=E[0],P=E[1];Object(r.useEffect)((function(){g(Wa()),g(hn("commandes").fetch()),g(hn("emprunters").fetch()),g(hn("vaccinateurs").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsxs)(_c.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE "}),Object(x.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(x.jsxs)(zn.a,{onChange:function(e){a(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-depot",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(x.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(_c.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return P(e.target.value)},value:w,className:"form-control"})})]}),"vente-depot-credit"===c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Nom du persone:"}),Object(x.jsxs)("select",{className:"form-control mb-2",onChange:function(e){h(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner une personne"}),N.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Nom du vaccinateur:"}),Object(x.jsxs)("select",{className:"form-control mb-2",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner un vaccinateur"}),y.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===f||void 0===f?void 0:f.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===f||void 0===f?void 0:f.map((function(e,t){return Object(x.jsx)(mi,{product:e,basket:f,dispatch:g},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===f||void 0===f?void 0:f.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",Ne(Js(f.map((function(e){return qi(e)?e.prixlitre*e.quantityParProductDepot:e.prixVente*e.quantityParProductDepot})))+Js(f.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:f.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===f.length,onClick:function(){if(null!=w&&""!=w){for(var e=0;e<f.length;++e)if(0==f[e].quantityParProductDepot)return void alert("Commande non conforme:"+f[e].name+" : 0");f.forEach((function(e){var t;delete e.busy,delete e.pendingCreate,Oi(t=e)?t.quantityBrute-=t.quantityParProductDepot:xi(t)&&(t.quantityBrute=0),0!=e.condmldepot&&0!=e.qttccpventedepot?function(e){Ni(e)}(e):gi(e)})),g(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:f,type:c,sorte:"sortie",vaccinateurId:u,status:"vente-depot"===c,emprunterId:v,dateCom:null!=w||""!=w?w:C},"add-from-depot")),g(Wa()),"vente-depot-credit"===c?p.push(A):"vente-depot-vaccinateur"===c?p.push(S):p.push(F)}else alert("Vous avez oubli\xe9 de mettre la date de l'operation !!!")},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){f.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),g(Wa())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Zs=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("products").meta),n=Object(se.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(2),d=Object(O.a)(l,2),o=(d[0],d[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1],f=(Object(se.d)(pn("commandes").value),Object(se.d)(pn("commandes").meta),Object(r.useState)(new Date)),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)(new Date),q=Object(O.a)(C,2),A=q[0],S=q[1];Object(r.useEffect)((function(){n(gn(N,A))}),[N,A]),Object(r.useEffect)((function(){y(new Date),S(new Date),n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e)}),[t]),Object(r.useEffect)((function(){p(br(e,i))}),[i]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(or.a,{fluid:!0,children:Object(x.jsx)("div",{className:"py-2",children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsxs)(_c.a,{className:"mt-2",children:[Object(x.jsxs)(_c.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"80%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(Jc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.map((function(e){return Object(x.jsx)(Ws,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Xs,{setRegenerate:b})})})]})})})})},$s=function(){return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Bon de sortie du d\xe9pot",children:Object(x.jsx)(be,{title:"Bon de sortie du d\xe9pot"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{disabled:!0,className:"btn btn-green btn-xs ml-3 mb-2",children:"Ajouter"})," ",": ",Object(x.jsx)("span",{children:"Le produit n'a pas de stock disponible"}),Object(x.jsx)("button",{className:"btn btn-green btn-xs ml-3 mb-2",children:"Mettre \xe0 jour"})," ",": ",Object(x.jsx)("span",{children:"Mettre \xe0 jour la liste des produits"})]}),Object(x.jsx)("select",{disabled:!0,className:"  ml-3 bg-white py-2 input-xs",children:Object(x.jsx)("option",{children:"Comptant"})})," ",": ",Object(x.jsx)("span",{children:"Choix du mode sortie ( Comptant,credit,vaccinateur)"}),Object(x.jsx)(Zs,{})]})]})},el=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProduct})).reduce((function(e,t){return e+t}),0):0,Object(x.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},tl=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})})})},nl=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})};function cl(e){return e[e.length-1]}var rl=function(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),l=Object(O.a)(s,2),d=(l[0],l[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(se.d)(pn("approvis").value)),V=Object(se.d)(pn("approvis").meta),R=Object(se.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){var e;j&&h&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ie()(j),ie()(h))),d(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ie()(j),ie()(h))),R((e=h,dn("approvis",{path:"/get-approv-by-date?deb=".concat(j,"&fin=").concat(e),replace:!0}))))}),[j,h]),Object(r.useEffect)((function(){V.isFetching||S(Se(P,"dateApprov",j,h))}),[V]);var F,D,B=Ee(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,l=t.quantityCC,d=t.quantityParProduct,o=e.find((function(e){return e.id===n}));return o?o.quantityParProduct=parseInt(o.quantityParProduct)+parseInt(d):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:l,quantityParProduct:d}),e}),[]).sort((function(e,t){return e.id>t.id})),M=function(e,t){var n;return Object(re.a)(new Set((n=[]).concat.apply(n,Object(re.a)(e.map((function(e){return e[t]}))))))},T=(F="dateApprov",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Journal de facturation",children:Object(x.jsx)(be,{title:"Journal de facturation"})}),Object(x.jsxs)(ve,{children:[Object(x.jsx)(yn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de facturation "}),Object(x.jsxs)("span",{children:["Du: ",ge(j)," Au ",ge(h)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(qe,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),B.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(el,{flat:M(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(tl,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)(nl,{flat:M(T[cl(Object.keys(T))],"contenu"),gr:cl(Object.keys(T)),id:e.id})]})})})),0==B.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},al=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})})})},il=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProductDepot})).reduce((function(e,t){return e+t}),0):0,Object(x.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},sl=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})};function ll(e){return e[e.length-1]}var dl=function(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),l=Object(O.a)(s,2),d=(l[0],l[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(se.d)(pn("commandes").value)),V=Object(se.d)(pn("commandes").meta),R=Object(se.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&h&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ie()(j),ie()(h))),d(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ie()(j),ie()(h))),R(fn("vente-depot",j,h)))}),[j,h]),Object(r.useEffect)((function(){V.isFetching||S(Se(P,"dateCom",j,h))}),[V]);var F,D,B=Ee(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityParProductDepot,l=t.quantityBruteCVA,d=t.quantityCCCVA,o=(t.qttByCC,e.find((function(e){return e.id===n})));return o?o.quantityParProductDepot=parseInt(o.quantityParProductDepot)+parseInt(s):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBruteCVA:l,quantityCCCVA:d,quantityParProductDepot:s}),e}),[]).sort((function(e,t){return e.id>t.id})),M=function(e,t){var n;return Object(re.a)(new Set((n=[]).concat.apply(n,Object(re.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Journal de vente",children:Object(x.jsx)(be,{title:"Journal de vente"})}),Object(x.jsxs)(ve,{children:[Object(x.jsx)(yn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de vente"}),Object(x.jsxs)("span",{children:["Du: ",ge(j)," Au ",ge(h)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(qe,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),B.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(il,{flat:M(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(al,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProductDepot}),Object(x.jsx)(sl,{flat:M(T[ll(Object.keys(T))],"contenu"),gr:ll(Object.keys(T)),id:e.id})]})})})),0==B.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})]})]})]})};function ol(e){return e[e.length-1]}var ul=function(){var e=ie()().isoWeekday(1).startOf("week"),t=ie()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),l=Object(O.a)(s,2),d=(l[0],l[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),v=Object(O.a)(m,2),h=v[0],p=v[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(se.d)(pn("commandes").value)),V=Object(se.d)(pn("commandes").meta),R=Object(se.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&h&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ie()(j),ie()(h))),d(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ie()(j),ie()(h))),R(fn("cva",j,h)))}),[j,h]),Object(r.useEffect)((function(){V.isFetching||S(Se(P,"dateCom",j,h))}),[V]);var F,D,B=Ee(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,l=t.quantityCC,d=t.quantityParProduct,o=e.find((function(e){return e.id===n}));return o?o.quantityParProduct=parseInt(o.quantityParProduct)+parseInt(d):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:l,quantityParProduct:d}),e}),[]).sort((function(e,t){return e.id>t.id})),M=function(e,t){var n;return Object(re.a)(new Set((n=[]).concat.apply(n,Object(re.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Journal de dep\xf4t vers magasin",children:Object(x.jsx)(be,{title:"Journal de dep\xf4t vers magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsx)(yn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de dep\xf4t vers magasin "}),Object(x.jsxs)("span",{children:["Du: ",ge(j)," Au ",ge(h)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(qe,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),B.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(el,{flat:M(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(tl,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)(nl,{flat:M(T[ol(Object.keys(T))],"contenu"),gr:ol(Object.keys(T)),id:e.id})]})})})),0==B.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},jl=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t},bl=function(e,n,c){return 1==e[t]?{text:"plus (+"+e[n]+")("+c+")",textStyle:"text text-info",date:ge(e.datedecorrection),style:"badge badge-info"}:2==e[t]?{text:"moins (-"+e[n]+")("+c+")",textStyle:"text text-warning",date:ge(e.datedecorrection),style:"badge badge-warning"}:3==e[t]?{text:"ajouter au commande ( + "+e[n]+"("+c+")",textStyle:"text text-success",date:ge(e.datedecorrection),style:"badge badge-success"}:4==e[t]?{text:"supprimer du commande ( - "+e[n]+"("+c+")",textStyle:"text text-danger",date:ge(e.datedecorrection),style:"badge badge-danger"}:void 0};var ml=Object(o.j)((function(e){Object(o.g)();var t,n,c=Object(o.i)().id,a=Object(se.d)(pn("commandes").value),i=Object(se.c)();return Object(r.useEffect)((function(){i(hn("commandes").get(c))}),[c]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9tail de sortie vers magasin",children:Object(x.jsx)(be,{title:"D\xe9tail de sortie vers magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),a.length>0&&(null===(t=a[0])||void 0===t?void 0:t.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{style:{width:"40%"},children:[Object(x.jsx)("h2",{children:e.name}),e.correction>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:bl(e,"correction","correctiontype").style,children:Object(x.jsx)("p",{children:bl(e).text})})}),e.correctionml>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:bl(e,"correctionml","correctiontml").style,children:Object(x.jsx)("p",{children:bl(e,"correctionml","correctiontml").text})})}),e.correctionl>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:bl(e,"correctionl","correctiontl").style,children:Object(x.jsx)("p",{children:bl(e,"correctionl","correctiontl").text})})}),Object(x.jsxs)("p",{children:["Date de modification:",ge(e.datedecorrection)]})]}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[Ne(ua(e)?e.prixlitre:e.prixVente),"(","x"," ",e.quantityParProduct,")"]}),Object(x.jsx)("td",{children:Ne(ua(e)?e.prixlitre:e.prixVente*e.quantityParProduct)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",Ne(jl(null===(n=a[0])||void 0===n?void 0:n.contenu))]})]})]})})),Ol=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var xl=Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,l,d,u=Object(o.i)().id,j=Object(se.d)(pn("commandes").value),b=Object(se.c)();return Object(r.useEffect)((function(){b(hn("commandes").get(u))}),[u]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9tail de vente du magasin",children:Object(x.jsx)(be,{title:"D\xe9tail de vente du magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"credit-cva"==(null===(t=j[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=j[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(c=j[0])||void 0===c?void 0:c.emprunter.name}),Object(x.jsx)("h5",{children:null===(a=j[0])||void 0===a?void 0:a.emprunter.contact})]})}),j.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",ge(null===(i=j[0])||void 0===i?void 0:i.dateCom)]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:Ne(Ol(null===(s=j[0])||void 0===s?void 0:s.contenu.map((function(e){return ua(e)?e.prixlitre*e.quantityParProduct:e.prixVente*e.quantityParProduct})))+Ol(null===(l=j[0])||void 0===l?void 0:l.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),j.length>0&&(null===(d=j[0])||void 0===d?void 0:d.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsx)(x.Fragment,{children:0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{children:[e.type,":"]}),Ne(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",Ne(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ML:"})," ",Ne(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",Ne(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:Ne(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})})),vl=function(e){var t,n=e.state,c=e.setState,r=e.product,i=(Object(se.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=a.a.useCallback((function(){return r.quantityBruteCVA>15&&r.quantityBruteCVA<=20?"yellow":r.quantityBruteCVA>10&&r.quantityBruteCVA<=15?"#ffdb4c":r.quantityBruteCVA>5&&r.quantityBruteCVA<=10?" orange":r.quantityBruteCVA>0&&r.quantityBruteCVA<=5?"#c44e14b8":0==r.quantityBruteCVA?"red":"green"}),[r]),l=a.a.useCallback((function(){return r.quantityCCCVA>15&&r.quantityCCCVA<=20?"yellow":r.quantityCCCVA>10&&r.quantityCCCVA<=15?"#ffdb4c":r.quantityCCCVA>5&&r.quantityCCCVA<=10?" orange":r.quantityCCCVA>0&&r.quantityCCCVA<=5?"#c44e14b8":0==r.quantityCCCVA?"red":"green"}),[r]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(s())},children:Object(x.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(l())}}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-danger btn-sm",onClick:function(){!function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(re.a)(n)))},children:"Ajouter"})})})]})})})},hl=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=e.setRealQtt,i=e.realQtt,s=(e.maxRealQtt,function(e){!function(e,t,n){var a=Object(re.a)(c);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(a(null===t||void 0===t?void 0:t.quantityParProduct),s(null===t||void 0===t?void 0:t.quantityParProduct)):(a(Number(e)),s(Number(e)))},min:0,value:i,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},pl=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(se.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(oi(t.id,e))}(e),n(e)},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},fl=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(se.c)(),i=function(e){a(ji(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(i(Number(e)),n(Number(e)))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},gl=function(e){var t=e.product,n=e.setRealQttCC,c=e.maxRealQttCC,r=e.realQttCC,a=Object(se.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(ui(t.id,e))}(Number(e)),n(Number(e))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:c,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Nl=function(){return{type:ei}},yl=function(e,t){return{type:ci,payload:{id:e,value:t}}},Cl=function(e,t){return{type:li,payload:{id:e,value:t}}},ql=function(e,t){return{type:ni,payload:{id:e,value:t}}},Al=function(e){var t=e.product,n=e.setRealQttCC,c=(e.maxRealQttCC,e.index),r=e.setState,a=e.state,i=e.realQttCC,s=function(e){!function(e,t,n){var c=Object(re.a)(a);c[e]=Object(we.a)(Object(we.a)({},c[e]),{},Object(Je.a)({},t,n)),r(c)}(c,"qttByCC",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(null===t||void 0===t?void 0:t.qttByCC),n(null===t||void 0===t?void 0:t.qttByCC)):(n(1*e),s(1*e))},min:0,value:i,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Sl=function(e){var t=e.product,n=e.setRealQttLitre,c=e.setState,r=e.state,a=e.realQttLitre,i=e.index,s=function(e){!function(e,t,n){var a=Object(re.a)(r);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,n)),c(a)}(i,"qttbylitre",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:a,defaultValue:null===t||void 0===t?void 0:t.qttbylitre,onChange:function(e){""==e?(n(null===t||void 0===t?void 0:t.qttbylitre),s(null===t||void 0===t?void 0:t.qttbylitre)):(n(Number(e)),s(Number(e)))},children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},El=function(e){var t=e.product,n=e.state,c=e.setState,r=e.realQttCC,a=e.setRealQttCC,i=(e.maxRealQttCC,e.index),s=(Object(se.c)(),function(e){!function(e,t,r){var a=Object(re.a)(n);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,r)),c(a)}(i,"qttByCC",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(0),a(0)):(a(Number(e)),s(Number(e)))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},wl=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},Pl=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+") et ("+e.correctionml+")",textStyle:"text text-info",date:ge(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-warning",date:ge(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-success",date:ge(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-danger",date:ge(e.datedecorrection),style:"badge badge-danger"}:void 0},Vl=function(e){var t=e.state,n=e.index,c=e.setState,i=e.product,s=e.products,l=(Object(se.c)(),Object(r.useState)(null===i||void 0===i?void 0:i.qttByCC)),d=Object(O.a)(l,2),o=d[0],u=d[1],j=Object(r.useState)(null===i||void 0===i?void 0:i.quantityParProduct),b=Object(O.a)(j,2),m=b[0],v=b[1],h=Object(r.useState)(null===i||void 0===i?void 0:i.qttbylitre),p=Object(O.a)(h,2),f=p[0],g=p[1],N=Object(r.useState)(2e3),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(r.useState)(2e3),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(r.useState)(2e3),V=Object(O.a)(P,2),R=V[0],F=V[1],D=Object(se.d)(pn("commandes").value);return a.a.useEffect((function(){if(void 0!=s&&void 0!=t&&D.length>0){var e=null===t||void 0===t?void 0:t.find((function(e){return null===i||void 0===i?void 0:i.id})),n=wi(s,D[0],e),c=n.normalQtt,r=n.normalQttCC,a=n.normalQttLitre,l=n.isSpecific;0==n.isValid&&(alert("stock insuffisant :("),l?(g(a),F(a),v(c),q(c),u(r),w(r)):(v(c),q(c),u(r),w(r))),console.log(f)}}),[m,o,f,s]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border mt-3  mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:Pl(i).style,children:Object(x.jsx)("p",{children:Pl(i).text})}),Object(x.jsxs)("p",{className:Pl(i).textStyle,children:["Date de modification:",Pl(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),wl(i)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixVente)+" x "+i.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixqttccvente*i.qttccpvente)+" x "+i.quantityParProduct+" "+i.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixVente)+" x "+i.quantityParProduct+" "+i.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixParCC)+" x "+i.qttByCC+" ML"})})})]}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Sl,{product:i,setState:c,state:t,index:n,realQttLitre:f,setRealQttLitre:g,maxRealQttByLitre:R})," "]}),Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center ",children:[Object(x.jsxs)("div",{className:"text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(hl,{index:n,state:t,setState:c,product:i,setRealQtt:v,realQtt:m,maxRealQtt:C})]}),"FLACON"===i.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==i.categoryId?"DOSE":"ML"}),Ce(i.name,"ita new")&&Object(x.jsx)(pl,{product:i,index:n,state:t,setState:c,setRealQttCC:u,realQttCC:o,maxRealQttCC:E}),Ce(i.name,"sovax")&&Object(x.jsx)(gl,{index:n,state:t,setState:c,realQttCC:o,setRealQttCC:u,product:i,maxRealQttCC:E}),0==i.condml&&0==i.qttccpvente&&!Ce(i.name,"sovax")&&!Ce(i.name,"ita new")&&Object(x.jsx)(Al,{index:n,realQttCC:o,setRealQttCC:u,state:t,setState:c,product:i,maxRealQttCC:E}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsx)(El,{product:i,state:t,realQttCC:o,setRealQttCC:u,maxRealQttCC:E,setState:c,index:n})]})]})]})})},Rl=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Fl(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Fl(n):n;return t}var Dl=function(e){var t=e.state,n=(e.meta,e.setState),c=e.disabled,a=e.products,i=e.commandes,s=Object(r.useState)("direct"),l=Object(O.a)(s,2),u=l[0],j=(l[1],Object(r.useState)(1)),b=Object(O.a)(j,2),m=(b[0],b[1],Object(r.useState)(null)),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(null)),p=Object(O.a)(h,2),f=(p[0],p[1]),g=Object(o.g)(),N=Object(r.useState)([]),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(se.d)((function(e){return{fromdepots:e.fromdepots}})),S=A.fromdepots;Object(r.useEffect)((function(){q(null===i||void 0===i?void 0:i.contenu)}),[i]);var E=Object(se.c)(),w=Object(se.d)(pn("emprunters").value),P=new Date,V=Object(r.useState)(P),R=Object(O.a)(V,2),F=R[0],D=R[1];Object(r.useEffect)((function(){E(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(_c.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(d.b,{className:"btn btn-primary mb-2 btn-sm",to:L,children:"Voir l'historique de vente"})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",ge(F)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:c,onChange:function(e){return D(e.target.value)},value:F,className:"form-control"})})]}),"credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:c,className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{value:""}),w.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===t||void 0===t?void 0:t.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e,c){var r;return Object(x.jsx)(Vl,{product:e,realcommande:null===(r=i[0])||void 0===r?void 0:r.find((function(t){return t.id==e.id})),state:t,index:c,products:null===a||void 0===a?void 0:a.find((function(t){return t.id==e.id})),setState:n,basket:S,dispatch:E},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(c))}))]})]}),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",Ne(Rl(null===t||void 0===t?void 0:t.map((function(e){return qi(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Rl(null===t||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===(null===t||void 0===t?void 0:t.length),onClick:function(){var e,n=function(){var e=Fl(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=Fl(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:Fl(C).map((function(e){return t.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),c=n.exist,r=n.added,a=n.missing;Vi(t)?alert("modification non conforme,veuillez verifier"):(E(hn("commandes").updateTransaction((e={id:null===i||void 0===i?void 0:i.id,contenu:t,commande:t,type:"vente-cva",sorte:"sortie"},Object(Je.a)(e,"sorte","sortie"),Object(Je.a)(e,"status",!0),Object(Je.a)(e,"dateCom",null!=F?F:P),Object(Je.a)(e,"exist",c),Object(Je.a)(e,"added",r),Object(Je.a)(e,"missing",a),e),"update-from-magasin")),g.push(L))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return g.goBack()},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Bl=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(se.c)(),l=Object(se.d)(pn("commandes").value),d=Object(se.d)(pn("commandes").meta),u=Object(se.d)(pn("products").value),j=Object(se.d)(pn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(hn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2);E[0],E[1];return a.a.useEffect((function(){h(br(u,g))}),[g]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;d.isFetching||A(null===(e=l[0])||void 0===e?void 0:e.contenu)}),[d]),a.a.useEffect((function(){j.isFetching||h(u)}),[j]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsx)(or.a,{className:"mt-3",children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(Jc.a,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(vl,{state:q,realproduct:u,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(Dl,{state:q,meta:d,disabled:j.isFetching,setState:A,products:u,commandes:l[0]})})]})})]})},Ml=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,l,d,u=Object(o.i)().id,j=Object(se.d)(pn("commandes").value),b=Object(se.c)();return Object(r.useEffect)((function(){b(hn("commandes").get(u))}),[u]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"D\xe9tail de vente du magasin",children:Object(x.jsx)(be,{title:"D\xe9tail de vente du magasin"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"credit-cva"==(null===(t=j[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=j[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(c=j[0])||void 0===c?void 0:c.emprunter.name}),Object(x.jsx)("h5",{children:null===(a=j[0])||void 0===a?void 0:a.emprunter.contact})]})}),j.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",ge(null===(i=j[0])||void 0===i?void 0:i.dateCom)]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:Ne(Ml(null===(s=j[0])||void 0===s?void 0:s.contenu.map((function(e){return ua(e)?e.prixlitre*e.quantityParProduct:e.prixVente*e.quantityParProduct})))+Ml(null===(l=j[0])||void 0===l?void 0:l.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),j.length>0&&(null===(d=j[0])||void 0===d?void 0:d.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsx)(x.Fragment,{children:0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{children:[e.type,":"]}),Ne(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",Ne(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ML:"})," ",Ne(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",Ne(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:Ne(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})}));var Tl=function(e){var t,n=e.state,c=e.setState,r=e.product,i=(Object(se.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=a.a.useCallback((function(){return r.quantityBruteCVA>15&&r.quantityBruteCVA<=20?"yellow":r.quantityBruteCVA>10&&r.quantityBruteCVA<=15?"#ffdb4c":r.quantityBruteCVA>5&&r.quantityBruteCVA<=10?" orange":r.quantityBruteCVA>0&&r.quantityBruteCVA<=5?"#c44e14b8":0==r.quantityBruteCVA?"red":"green"}),[r]),l=a.a.useCallback((function(){return r.quantityCCCVA>15&&r.quantityCCCVA<=20?"yellow":r.quantityCCCVA>10&&r.quantityCCCVA<=15?"#ffdb4c":r.quantityCCCVA>5&&r.quantityCCCVA<=10?" orange":r.quantityCCCVA>0&&r.quantityCCCVA<=5?"#c44e14b8":0==r.quantityCCCVA?"red":"green"}),[r]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(s())},children:Object(x.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(l())}}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-danger btn-sm",onClick:function(){!function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(re.a)(n)))},children:"Ajouter"})})})]})})})},kl=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=e.setRealQtt,i=e.realQtt,s=(e.maxRealQtt,function(e){!function(e,t,n){var a=Object(re.a)(c);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(a(null===t||void 0===t?void 0:t.quantityParProduct),s(null===t||void 0===t?void 0:t.quantityParProduct)):(a(Number(e)),s(Number(e)))},min:0,value:i,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Il=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(se.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(oi(t.id,e))}(e),n(e)},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},_l=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(se.c)(),i=function(e){a(ji(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(i(Number(e)),n(Number(e)))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Ql=function(e){var t=e.product,n=e.setRealQttCC,c=e.maxRealQttCC,r=e.realQttCC,a=Object(se.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(ui(t.id,e))}(Number(e)),n(Number(e))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:c,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Ll=function(e){var t=e.product,n=e.setRealQttCC,c=(e.maxRealQttCC,e.index),r=e.setState,a=e.state,i=e.realQttCC,s=function(e){!function(e,t,n){var c=Object(re.a)(a);c[e]=Object(we.a)(Object(we.a)({},c[e]),{},Object(Je.a)({},t,n)),r(c)}(c,"qttByCC",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(null===t||void 0===t?void 0:t.qttByCC),n(null===t||void 0===t?void 0:t.qttByCC)):(n(1*e),s(1*e))},min:0,value:i,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Hl=function(e){var t=e.product,n=e.setRealQttLitre,c=e.setState,r=e.state,a=e.realQttLitre,i=e.index,s=function(e){!function(e,t,n){var a=Object(re.a)(r);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,n)),c(a)}(i,"qttbylitre",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:a,defaultValue:null===t||void 0===t?void 0:t.qttbylitre,onChange:function(e){""==e?(n(null===t||void 0===t?void 0:t.qttbylitre),s(null===t||void 0===t?void 0:t.qttbylitre)):(n(Number(e)),s(Number(e)))},children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Ul=function(e){var t=e.product,n=e.state,c=e.setState,r=e.realQttCC,a=e.setRealQttCC,i=(e.maxRealQttCC,e.index),s=(Object(se.c)(),function(e){!function(e,t,r){var a=Object(re.a)(n);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,r)),c(a)}(i,"qttByCC",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(0),a(0)):(a(Number(e)),s(Number(e)))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Yl=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},zl=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+") et ("+e.correctionml+")",textStyle:"text text-info",date:ge(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-warning",date:ge(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-success",date:ge(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-danger",date:ge(e.datedecorrection),style:"badge badge-danger"}:void 0},Kl=function(e){var t=e.state,n=e.index,c=e.setState,i=e.product,s=e.products,l=(Object(se.c)(),Object(r.useState)(null===i||void 0===i?void 0:i.qttByCC)),d=Object(O.a)(l,2),o=d[0],u=d[1],j=Object(r.useState)(null===i||void 0===i?void 0:i.quantityParProduct),b=Object(O.a)(j,2),m=b[0],v=b[1],h=Object(r.useState)(null===i||void 0===i?void 0:i.qttbylitre),p=Object(O.a)(h,2),f=p[0],g=p[1],N=Object(r.useState)(2e3),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(r.useState)(2e3),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(r.useState)(2e3),V=Object(O.a)(P,2),R=V[0],F=V[1],D=Object(se.d)(pn("commandes").value);return a.a.useEffect((function(){if(void 0!=s&&void 0!=t&&D.length>0){var e=null===t||void 0===t?void 0:t.find((function(e){return null===i||void 0===i?void 0:i.id})),n=ys(s,D[0],e),c=n.normalQtt,r=n.normalQttCC,a=n.normalQttLitre,l=n.isSpecific;0==n.isValid&&(alert("stock insuffisant :("),l?(g(a),F(a),v(c),q(c),u(r),w(r)):(v(c),q(c),u(r),w(r))),console.log(f)}}),[m,o,f,s]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border mt-3  mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:zl(i).style,children:Object(x.jsx)("p",{children:zl(i).text})}),Object(x.jsxs)("p",{className:zl(i).textStyle,children:["Date de modification:",zl(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),Yl(i)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixVente)+" x "+i.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixqttccvente*i.qttccpvente)+" x "+i.quantityParProduct+" "+i.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixVente)+" x "+i.quantityParProduct+" "+i.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(i.prixParCC)+" x "+i.qttByCC+" ML"})})})]}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Hl,{product:i,setState:c,state:t,index:n,realQttLitre:f,setRealQttLitre:g,maxRealQttByLitre:R})," "]}),Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center ",children:[Object(x.jsxs)("div",{className:"text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(kl,{index:n,state:t,setState:c,product:i,setRealQtt:v,realQtt:m,maxRealQtt:C})]}),"FLACON"===i.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==i.categoryId?"DOSE":"ML"}),Ce(i.name,"ita new")&&Object(x.jsx)(Il,{product:i,index:n,state:t,setState:c,setRealQttCC:u,realQttCC:o,maxRealQttCC:E}),Ce(i.name,"sovax")&&Object(x.jsx)(Ql,{index:n,state:t,setState:c,realQttCC:o,setRealQttCC:u,product:i,maxRealQttCC:E}),0==i.condml&&0==i.qttccpvente&&!Ce(i.name,"sovax")&&!Ce(i.name,"ita new")&&Object(x.jsx)(Ll,{index:n,realQttCC:o,setRealQttCC:u,state:t,setState:c,product:i,maxRealQttCC:E}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsx)(Ul,{product:i,state:t,realQttCC:o,setRealQttCC:u,maxRealQttCC:E,setState:c,index:n})]})]})]})})},Gl=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Wl(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Wl(n):n;return t}var Jl=function(e){var t=e.state,n=(e.meta,e.setState),c=e.disabled,a=e.products,i=e.commandes,s=Object(r.useState)("direct"),l=Object(O.a)(s,2),u=l[0],j=(l[1],Object(r.useState)(1)),b=Object(O.a)(j,2),m=(b[0],b[1],Object(r.useState)(null)),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(null)),p=Object(O.a)(h,2),f=(p[0],p[1]),g=Object(o.g)(),N=Object(r.useState)([]),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(se.d)((function(e){return{fromdepots:e.fromdepots}})),S=A.fromdepots;Object(r.useEffect)((function(){q(null===i||void 0===i?void 0:i.contenu)}),[i]);var E=Object(se.c)(),w=Object(se.d)(pn("emprunters").value),P=new Date,V=Object(r.useState)(P),R=Object(O.a)(V,2),F=R[0],D=R[1];Object(r.useEffect)((function(){E(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(_c.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(d.b,{className:"btn btn-primary mb-2 btn-sm",to:te,children:"Voir l'historique de vente"})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",ge(F)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:c,onChange:function(e){return D(e.target.value)},value:F,className:"form-control"})})]}),"credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:c,className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{value:""}),w.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===t||void 0===t?void 0:t.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e,c){var r;return Object(x.jsx)(Kl,{product:e,realcommande:null===(r=i[0])||void 0===r?void 0:r.find((function(t){return t.id==e.id})),state:t,index:c,products:null===a||void 0===a?void 0:a.find((function(t){return t.id==e.id})),setState:n,basket:S,dispatch:E},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(c))}))]})]}),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",Ne(Gl(null===t||void 0===t?void 0:t.map((function(e){return ps(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Gl(null===t||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===(null===t||void 0===t?void 0:t.length),onClick:function(){var e,n=function(){var e=Wl(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=Wl(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:Wl(C).map((function(e){return t.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),c=n.exist,r=n.added,a=n.missing;qs(t)?alert("modification non conforme,veuillez verifier"):E(hn("commandes").updateTransaction((e={id:null===i||void 0===i?void 0:i.id,contenu:t,commande:t,type:"vente-cva",sorte:"sortie"},Object(Je.a)(e,"sorte","sortie"),Object(Je.a)(e,"status",!0),Object(Je.a)(e,"dateCom",null!=F?F:P),Object(Je.a)(e,"exist",c),Object(Je.a)(e,"added",r),Object(Je.a)(e,"missing",a),e),"update-from-magasin"))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return g.goBack()},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Xl=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(se.c)(),l=Object(se.d)(pn("commandes").value),d=Object(se.d)(pn("commandes").meta),u=Object(se.d)(pn("products").value),j=Object(se.d)(pn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),v=m[0],h=m[1];a.a.useEffect((function(){s(hn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2);E[0],E[1];return a.a.useEffect((function(){h(br(u,g))}),[g]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;d.isFetching||A(null===(e=l[0])||void 0===e?void 0:e.contenu)}),[d]),a.a.useEffect((function(){j.isFetching||h(u)}),[j]),Object(x.jsx)("div",{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Editer une vente du magasin",children:Object(x.jsx)(be,{title:"Editer une vente du magasin"})}),Object(x.jsx)(ve,{children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(Jc.a,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(Tl,{state:q,realproduct:u,setState:A,product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(Jl,{state:q,meta:d,disabled:j.isFetching,setState:A,products:u,commandes:l[0]})})]})})]})})},Zl=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=e.stock,s=e.realcommand,l=(e.realQtt,e.realQttCC,function(e){console.log(e),function(e,t,n){var a=Object(re.a)(c);a[e]=Object(we.a)(Object(we.a)({},a[e]),{},Object(Je.a)({},t,n)),console.log(a),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:(null===i||void 0===i?void 0:i.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,disabled:!0,bg:"whitesmoke",onChange:function(e){l(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},defaultValue:null===s||void 0===s?void 0:s.quantityParProduct,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})}),4==(null===s||void 0===s?void 0:s.correctiontype)?Object(x.jsx)("div",{children:Object(x.jsx)(Ms.a,{textTransform:"uppercase",className:"text text-danger",children:"CE PRODUIT A ETE RETIR\xc9"})}):Object(x.jsxs)("div",{children:[Object(x.jsx)(Ms.a,{textTransform:"uppercase",children:"Restituable"}),Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,onChange:function(e){l(Number(e)),a(Number(e))},defaultValue:null===i||void 0===i?void 0:i.quantityBruteCVA,max:null===i||void 0===i?void 0:i.quantityBrute,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})]})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){l(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,max:null===i||void 0===i?void 0:i.quantityBrute,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})})},$l=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+")",textStyle:"text text-info",date:ge(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")",textStyle:"text text-warning",date:ge(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")",textStyle:"text text-success",date:ge(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")",textStyle:"text text-danger",date:ge(e.datedecorrection),style:"badge badge-danger"}:void 0},ed=function(e){var t=e.state,n=e.index,c=e.setState,a=e.cloneCommandes,i=e.product,s=e.realstock,l=(e.realcommand,Object(r.useState)(null)),d=Object(O.a)(l,2),o=d[0],u=d[1],j=Object(r.useState)(null),b=Object(O.a)(j,2),m=b[0],v=b[1],h=s.find((function(e){return e.id==i.id})),p=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==i.id}));return Object(x.jsxs)("div",{className:" mb-2 p-2",style:{opacity:(null===h||void 0===h?void 0:h.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?.8:1,border:(null===h||void 0===h?void 0:h.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?"1px solid red":"1px solid gray"},children:[(null===h||void 0===h?void 0:h.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)&&Object(x.jsx)("div",{className:"text-danger text-sm",children:"** Des operations ont \xeate d\xe9ja faite apres la sortie vers magasin et vous ne pourrez pas retourner tous les produits au dep\xf4t**"}),Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:$l(i).style,children:Object(x.jsx)("p",{children:$l(i).text})}),Object(x.jsxs)("p",{className:$l(i).textStyle,children:["Date de modification:",$l(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=i.quantityParProduct&&Ne(i.prixVente),0==i.quantityParProduct&&0!=i.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=i.prixqttccvente&&0!=i.prixqttccvente?Ne(i.prixqttccvente):Ne(i.prixParCC)}),0!=i.quantityParProduct&&" x "+i.quantityParProduct+" "+i.type," ",null==i.prixqttccvente&&0==i.prixqttccvente&&Object(x.jsx)(x.Fragment,{children:0!=i.qttByCC&&(0==i.quantityParProduct?" x ":"+")+i.qttByCC+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(Zl,{index:n,state:t,setState:c,product:i,realcommand:p,setRealQttCC:u,setRealQtt:v,realQtt:m,stock:h,realQttCC:o})]})]})]})},td=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function nd(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?nd(n):n;return t}var cd=function(e){var t,n,c=e.state,a=(e.meta,e.setState),i=e.realstock,s=e.disabled,l=e.cloneCommandes,d=e.commandes,u=Object(r.useState)("direct"),j=Object(O.a)(u,2),b=j[0],m=(j[1],Object(r.useState)(1)),v=Object(O.a)(m,2),h=(v[0],v[1],Object(r.useState)(null)),p=Object(O.a)(h,2),f=(p[0],p[1],Object(r.useState)(null)),g=Object(O.a)(f,2),N=(g[0],g[1]),y=Object(o.g)(),C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(se.d)((function(e){return{tomagasins:e.tomagasins}})),w=E.tomagasins;Object(r.useEffect)((function(){S(null===d||void 0===d?void 0:d.contenu)}),[d]);var P=Object(se.c)(),V=Object(se.d)(pn("emprunters").value),R=new Date,F=Object(r.useState)(R),D=Object(O.a)(F,2),B=D[0],M=D[1];Object(r.useEffect)((function(){}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(_c.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{className:"alert alert-warning",children:[Object(x.jsx)("span",{className:"text-uppercase",children:"Attention !!!"})," , la modification d'un bon de sortie entraine aussi la mis \xe0 jour de stock du produit"]}),Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",ge(B)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{disabled:s,type:"date",onChange:function(e){return M(e.target.value)},value:B,className:"form-control"})})]}),"credit"===b&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){N(e.target.value)},children:[Object(x.jsx)("option",{value:""}),V.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===c||void 0===c?void 0:c.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ed,{product:Gt.a.cloneDeep(e),state:c,index:t,realcommand:e,cloneCommandes:l,realstock:i,setState:a,basket:w,dispatch:P},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})}))]})}),(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",Ne(td(null===c||void 0===c?void 0:c.map((function(e){return e.prixVente*e.quantityParProduct})))+td(null===c||void 0===c||null===(t=c.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(Je.a)(n,"disabled",0===(null===c||void 0===c?void 0:c.length)),Object(Je.a)(n,"onClick",(function(){var e=function(){var e=nd(A).filter((function(e){return!c.find((function(t){return e.id===t.id}))})),t=c.filter((function(e){return!nd(A).find((function(t){return e.id===t.id}))}));return{exist:nd(A).map((function(e){return c.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,r=e.missing;P(hn("commandes").updateTransaction({id:null===d||void 0===d?void 0:d.id,contenu:c,type:"cva",sorte:"sortie",status:!0,dateCom:null!=B?B:R,exist:t,added:n,missing:r},"update-to-magasin")),y.push(Q)})),Object(Je.a)(n,"type","button"),Object(Je.a)(n,"children","Valider l'operation"),n)),Object(x.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===c||void 0===c||c.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),P(Wa())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},rd=function(e){var t,n=e.state,c=e.setState,r=e.product,a=e.cloneCommandes,i=(Object(se.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==r.id})),l=(null===r||void 0===r?void 0:r.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(x.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[4==(null===s||void 0===s?void 0:s.correctiontype)&&Object(x.jsx)("div",{className:"badge badge-danger",children:Object(x.jsx)("h2",{textTransform:"uppercase",children:"CE PRODUIT A ETE RETIR\xc9"})}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," ",Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:l,className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(re.a)(n)))},children:"Ajouter"})})})]})})})})},ad=function(){var e=Object(o.i)().id,t=(Object(o.g)(),Object(r.useState)(!1)),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(se.c)(),l=Object(se.d)(pn("commandes").value),d=Object(se.d)(pn("commandesclone").value),u=Object(se.d)(pn("commandes").meta),j=Object(se.d)(pn("products").value),b=Object(se.d)(pn("products").meta),m=Object(r.useState)([]),v=Object(O.a)(m,2),h=v[0],p=v[1];a.a.useEffect((function(){s(hn("commandesclone").get(e)),s(hn("commandes").get(e))}),[e]);var f=Object(r.useState)(""),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var E=Object(r.useState)(),w=Object(O.a)(E,2),P=w[0],V=w[1];a.a.useEffect((function(){p(null!=P?fa(j,N,P):br(j,N))}),[N]),a.a.useEffect((function(){p(""!=N?fa(j,N,P):va(j,P))}),[P]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){}),[P]),a.a.useEffect((function(){var e;u.isFetching||S(null===(e=l[0])||void 0===e?void 0:e.contenu)}),[u]),a.a.useEffect((function(){b.isFetching||p(j)}),[b]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Edition d'un sortie vers magasin",children:Object(x.jsx)(be,{title:"Edition d'un sortie vers magasin"})}),Object(x.jsx)(ve,{children:Object(x.jsxs)(Xc.a,{className:"py-2",children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(Jc.a,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){y(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsx)(Ma,{model:"fournisseurs",children:Object(x.jsx)(Ta,{children:function(e){var t=e.data;e.meta;return Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("select",{className:"form-control",selected:2==P,onChange:function(e){V(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[h.map((function(e){return Object(x.jsx)(rd,{state:A,setState:S,cloneCommandes:d[0],product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)(cd,{disabled:b.isFetching,state:A,meta:u,cloneCommandes:d[0],setState:S,realstock:j,commandes:l[0]})})]})})]})},id=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{frommagasin:e,isItemFromMagasin:n,addFromMagasin:function(e){n(e.id)?t(function(e){return{type:$a,payload:e}}(e.id)):t(function(e){return{type:Za,payload:e}}(e))}}},sd=function(e){var t,n=e.product,c=Object(se.d)((function(e){return e.frommagasins})),r=Object(se.c)(),i=id(c,r),s=i.isItemFromMagasin,l=i.addFromMagasin,d=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);a.a.useCallback((function(){return ua(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&d?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{disabled:Pi(n),className:"mt-3 ".concat(d?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){l&&l(n)},children:d?"Retirer":"Ajouter"})})})]})})})},ld=a.a.memo(sd),dd=function(e){var t=e.product,n=e.setRealQtt,c=(e.maxRealQtt,e.realQtt),r=Object(se.c)(),a=function(e){r(yl(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,onChange:function(e){""==e?(n(0),a(0)):(n(e),a(e))},children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},od=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.setMaxRealQttCC,e.maxRealQttCC,e.realQtt,e.realQttCC),a=Object(se.c)(),i=(Object(r.useRef)(),Object(se.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){a(ql(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(n(1*e),i(1*e))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},ud=function(e){var t=e.product,n=e.setRealQttLitre,c=e.realQttLitre,r=e.maxRealQttByLitre,a=Object(se.c)(),i=function(e){a(Cl(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:c,defaultValue:0,onChange:function(e){""==e?(n(0),i(0)):(n(Number(e)),i(Number(e)))},max:r,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},jd=function(e){var t=e.product,n=Object(r.useState)(null===t||void 0===t?void 0:t.qttByCC),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null===t||void 0===t?void 0:t.quantityParProduct),l=Object(O.a)(s,2),d=l[0],o=l[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),b=j[0],m=j[1],v=Object(r.useState)(2e3),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)(2e3),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(r.useState)(2e3),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(se.d)((function(e){return e.frommagasins})),P=Object(se.c)(),V=id(w,P),R=V.isItemFromMagasin,F=V.addFromMagasin;Object(r.useEffect)((function(){var e=function(e,t,n,c){var r=!1;if(qi(c)){r=!0;var a=e,i=t,s=n,l=c.condval,d=c.quantityCCCVA,o=c.quantityBruteCVA,u=c.condsize,j=c.doseDefault,b=c.condml,m=!0;if(s>0&&0==a&&0==i&&s>o&&(m=!1,l=a,d=i),0==s&&a>0&&0==i){var O=0;Number(a)>Number(u)&&(O=Math.floor(Number(a)/Number(u)),l-(Number(a)-Number(u)*O)<0&&(O+=1)),o-O<0&&(m=!1,o=s,d=i)}if(0==s&&0==a&&i>0&&d-i<0){var x=0,v=0;Number(i)>Number(j)&&(x=Math.floor(Number(i)/Number(j)),d-(Number(i)-Number(j)*x)<0&&(x+=1)),Number(x)>Number(u)&&(v=Math.floor(Number(x)/Number(u)),l-(Number(x)-Number(u)*x)<0&&(v+=1)),o-v<0&&(m=!1,o=s,l=a)}if(0==s&&a>0&&i>0){var h=0,p=0;Number(i)>Number(b)?(h=Math.floor(Number(i)/Number(b)),d-(Number(i)-Number(b)*h)<0&&(h+=1)):d-Number(i)<0&&(h=1);var f=Number(a)+h;f>Number(u)?(p=Math.floor(f/Number(u)),l-(f-Number(u)*p)<0&&(p+=1)):l-f<0&&(p=1),o-p<0&&(m=!1,o=s,l=a)}if(s>0&&a>0&&0==i){var g=0;Number(a)>Number(u)?(g=Math.floor(Number(a)/Number(u)),l-(Number(a)-Number(u)*g+a)<0&&(g+=1)):l-Number(a)<0&&(g=1),o-(g+s)<0&&(m=!1,o=s,l=a)}if(s>0&&0==a&&i>0){var N=0,y=0;Number(i)>Number(b)?(N=Math.floor(Number(i)/Number(b)),d-(Number(i)-Number(b)*N)<0&&(N+=1)):d-Number(i)<0&&(N=1),Number(N)>Number(u)?(y=Math.floor(Number(N)/Number(u)),l-(Number(N)-Number(u)*y)<0&&(y+=1)):l-N<0&&(y=1),o-(y+s)<0&&(m=!1,l=a)}if(s>0&&a>0&&i>0){var C=0,q=0;Number(i)>Number(b)?(C=Math.floor(Number(i)/Number(b)),d-(Number(i)-Number(b)*C)<0&&(C+=1)):d-Number(i)<0&&(C=1);var A=Number(C)+Number(a);A>Number(u)?(q=Math.floor(A/Number(u)),l-(A-Number(u)*q)<0&&(q+=1)):l-A<0&&(q=1),o-(q+s)<0&&(m=!1)}return{normalQtt:l,normalQttCC:d,normalQttLitre:o,isSpecific:r,isValid:m}}var S=e,E=t,w=c.quantityBruteCVA,P=c.quantityCCCVA,V=c.doseDefault,R=c.quantityBruteCVA;r=!1;var F=!0;if(0==S&&E>0){var D=0,B=0;Number(E)>Number(V)?(D=Math.floor(Number(E)/Number(V)),B=Number(E)-Number(V)*D,console.log(B),P-B<0&&(D+=1)):P-Number(E)<0&&(D=1),E>P&&w-D<0&&(F=!1,w=S)}if(S>0&&0==E&&S>w&&(F=!1,P=E),S>0&&E>0){var M,T=0;Number(E)>Number(V)?(M=Math.floor(Number(E)/Number(V)),T=Number(E)-Number(V)*M,console.log(T),P-T<0&&(M+=1)):P-Number(E)<0&&(M=1),Number(w)-(Number(M)+Number(S))<0&&(F=!1),S>w&&(F=!1,P=E)}return{normalQtt:w,normalQttCC:P,normalQttLitre:R,isValid:F,isSpecific:r}}(d,a,b,t),n=e.normalQtt,c=e.normalQttCC,r=e.normalQttLitre,s=e.isSpecific;e.isValid||(alert("stock insuffisant :("),s?(m(r),E(r),o(n),f(n),i(c),C(c)):(o(n),f(n),i(c),C(c)))}),[d,a,b]);var D=!!R&&R(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),qi(t)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixlitre)+" x "+t.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixqttccvente*t.qttccpvente)+" x "+t.quantityParProduct+" "+t.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixVente)+" x "+t.quantityParProduct+" "+t.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixParCC)+" x "+t.qttByCC+" ML"})})})]}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(ud,{product:t,setRealQttLitre:m,realQttLitre:b,maxRealQttByLitre:S})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(dd,{product:t,setRealQtt:o,setMaxRealQtt:f,maxRealQtt:p,realQtt:d})]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==t.categoryId?"DOSE":"ML"}),Ce(t.name,"ita new")&&Object(x.jsx)(pl,{product:t,setRealQttCC:i,realQttCC:a}),Ce(t.name,"sovax")&&Object(x.jsx)(gl,{setRealQttCC:i,realQttCC:a,product:t}),0==t.condml&&0==t.qttccpvente&&!Ce(t.name,"sovax")&&!Ce(t.name,"ita new")&&Object(x.jsx)(od,{setRealQttCC:i,realQttCC:a,maxRealQttCC:y,product:t}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsx)(fl,{product:t,setRealQttCC:i,realQttCC:a,maxRealQttCC:y})]}),Object(x.jsx)("div",{className:"ml-2",children:D&&Object(x.jsx)("button",{onClick:function(){F&&F(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},bd={fromMagasin:{emptyOrder:"Aucune commande"}},md=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Od=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],l=(i[1],Object(r.useState)(null)),u=Object(O.a)(l,2),j=u[0],b=u[1],m=Object(o.g)(),v=Object(se.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,h=Object(se.c)(),p=Object(se.d)(pn("emprunters").value),f=Object(r.useState)(!1),g=Object(O.a)(f,2),N=(g[0],g[1],new Date),y=Object(r.useState)(N),C=Object(O.a)(y,2),q=C[0],A=C[1];Object(r.useEffect)((function(){h(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsxs)(_c.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"60%"},children:["BON DE SORTIE ("," ".concat(null===v||void 0===v?void 0:v.length," ").concat((null===v||void 0===v?void 0:v.length)>1?"articles":"article"),")"]}),Object(x.jsx)("div",{style:{width:"40%"},className:"text-right",children:Object(x.jsxs)("select",{className:"form-control input-sm",onChange:function(e){c(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-cva",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"credit-cva",children:"Credit"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(_c.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)(d.b,{className:"btn btn-danger mb-2 mr-2 btn-sm",to:"/historique/vente/vendeur/credit-cva",children:"CREDITS"}),Object(x.jsx)(d.b,{className:"btn btn-primary mb-2 btn-sm text-uppercase",to:"/historique/vente/vendeur/vente-cva",children:"Voir l'historique de vente"})]}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return A(e.target.value)},value:q,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){b(e.target.value)},children:[Object(x.jsx)("option",{value:""}),p.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===v||void 0===v?void 0:v.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:bd.fromMagasin.emptyOrder}),null===v||void 0===v?void 0:v.map((function(e,t){return Object(x.jsx)(jd,{product:e,basket:v,dispatch:h},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===v||void 0===v?void 0:v.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",Ne(md(v.map((function(e){return ua(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+md(v.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:v.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===v.length,onClick:function(){Vi(v)?alert("commande non-conforme,veuillez verifier!!"):(v.forEach((function(e){!function(e){if(wl(e)){var t=e.quantityParProduct,n=e.qttByCC,c=e.qttbylitre,r=e.condval,a=e.quantityCCCVA,i=e.condsize,s=(e.doseDefault,e.condml);if(c>0&&0==t&&0==n&&(e.quantityBruteCVA-=c),0==c&&t>0&&0==n){var l=0,d=0;if(Number(t)>=Number(i))if(l=Math.floor(Number(t)/Number(i)),r-(d=Number(t)-Number(i)*l)<0){var o=Number(d)-Number(r);e.condval=Number(i)-Number(o),l+=1}else e.condval=r-d;else if(e.condval-Number(t)<0){var u=Number(t)-Number(e.condval),j=Number(i)-Number(u);e.condval=j,l+=1}else e.condval-=Number(t);e.quantityBruteCVA-=l}if(0==c&&0==t&&n>0){var b=0,m=0,O=0,x=0;if(Number(n)>=Number(s))if(b=Math.floor(Number(n)/Number(s)),a-(x=Number(n)-Number(s)*b)<0){var v=Number(x)-Number(a);e.quantityCCCVA=Number(s)-Number(v),b+=1}else e.quantityCCCVA=a-x;else if(Number(n)>=e.quantityCCCVA){b+=1;var h=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-h}else e.quantityCCCVA-=Number(n);if(Number(b)>=Number(i))if(m=Math.floor(Number(b)/Number(i)),r-(O=Number(b)-Number(i)*O)<0){var p=Number(O)-Number(r);e.condval=Number(i)-Number(p),m+=1}else e.condval=r-O;else if(e.condval-Number(b)<0){var f=Number(b)-Number(e.condval),g=Number(i)-Number(f);e.condval=g,m+=1}else e.condval-=Number(b);e.quantityBruteCVA-=m}if(0==c&&t>0&&n>0){var N=0,y=0,C=0,q=0;if(Number(n)>=Number(s))if(N=Math.floor(Number(n)/Number(s)),a-(q=Number(n)-Number(s)*N)<0){var A=Number(q)-Number(a);e.quantityCCCVA=Number(s)-Number(A),N+=1}else e.quantityCCCVA=Number(a)-q;else if(Number(n)>=e.quantityCCCVA){N+=1;var S=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-S}else e.quantityCCCVA-=Number(n);var E=Number(t)+N;if(E>=Number(i))if(y=Math.floor(E/Number(i)),r-(C=E-Number(i)*N)<0){var w=Number(C)-Number(r);e.condval=Number(i)-Number(w),y+=1}else e.condval=r-C;else if(e.condval-Number(E)<0){var P=Number(E)-Number(e.condval),V=Number(i)-Number(P);e.condval=V,y+=1}else e.condval-=Number(E);e.quantityBruteCVA-=y}if(c>0&&t>0&&0==n){var R=0,F=0;if(Number(t)>=Number(i))if(R=Math.floor(Number(t)/Number(i)),r-(F=Number(t)-Number(i)*R)<0){var D=Number(F)-Number(r);e.condval=Number(i)-Number(D),R+=1}else e.condval=r-F;else if(e.condval-Number(t)<0){var B=Number(t)-Number(e.condval),M=Number(i)-Number(B);e.condval=M,R+=1}else e.condval-=Number(t);e.quantityBruteCVA-=R+c}if(c>0&&0==t&&n>0){var T=0,k=0,I=0,_=0;if(Number(n)>=Number(s))if(T=Math.floor(Number(n)/Number(s)),a-(_=Number(n)-Number(s)*T)<0){var Q=Number(_)-Number(a);e.quantityCCCVA=Number(s)-Number(Q),T+=1}else e.quantityCCCVA=a-_;else if(Number(n)>=e.quantityCCCVA){T+=1;var L=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-L}else e.quantityCCCVA-=Number(n);if(Number(T)>=Number(i))if(k=Math.floor(Number(T)/Number(i)),r-(I=Number(T)-Number(i)*k)<0){var H=Number(I)-Number(r);e.condval=Number(i)-Number(H),k+=1}else e.condval=r-_;else if(e.condval-Number(T)<0){var U=Number(T)-Number(e.condval),Y=Number(i)-Number(U);e.condval=Y,k+=1}else e.condval-=Number(T);e.quantityBruteCVA-=k+c}if(c>0&&t>0&&n>0){var z=0,K=0,G=0,W=0;if(Number(n)>=Number(s))if(z=Math.floor(Number(n)/Number(s)),a-(W=Number(n)-Number(s)*z)<0){var J=Number(W)-Number(a);e.quantityCCCVA=Number(s)-Number(J),z+=1}else e.quantityCCCVA=a-W;else if(Number(n)>=e.quantityCCCVA){z+=1;var X=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-X}else e.quantityCCCVA-=Number(n);var Z=Number(z)+Number(t);if(Z>=Number(i))if(K=Math.floor(Z/Number(i)),r-(G=Z-Number(i)*K)<0){var $=Number(G)-Number(r);e.condval=Number(i)-Number($),K+=1}else e.condval=r-W;else if(e.condval-Number(Z)<0){var ee=Number(Z)-Number(e.condval),te=Number(i)-Number(ee);e.condval=te,K+=1}else e.condval-=Number(Z);e.quantityBruteCVA-=K+c}}else{var ne=e.quantityParProduct,ce=e.qttByCC,re=(e.quantityBruteCVA,e.quantityCCCVA),ae=e.doseDefault;if(0==ne&&ce>0){var ie=0,se=0;if(Number(ce)>=Number(ae))if(ie=Math.floor(Number(ce)/Number(ae)),re-(se=Number(ce)-Number(ae)*ie)<0){var le=Number(se)-Number(re);e.quantityCCCVA=Number(ae)-Number(le),ie+=1}else e.quantityCCCVA=Number(re)-se;else if(e.quantityCCCVA-Number(ce)<0){var de=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(de),ie+=1}else e.quantityCCCVA-=Number(ce);console.log(ie),e.quantityBruteCVA-=ie}if(ne>0&&0==ce&&(e.quantityBruteCVA-=ne),ne>0&&ce>0){var oe=0,ue=0;if(Number(ce)>=Number(ae))if(oe=Math.floor(Number(ce)/Number(ae)),re-(ue=Number(ce)-Number(ae)*oe)<0){var je=Number(ue)-Number(re);e.quantityCCCVA=Number(ae)-Number(je),oe+=1}else e.quantityCCCVA=Number(re)-ue;else if(e.quantityCCCVA-Number(ce)<0){var be=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(be),oe+=1}else e.quantityCCCVA-=Number(ce);var me=oe+Number(ne);e.quantityBruteCVA-=me}}}(e)})),h(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:v,type:n,sorte:"sortie",vaccinateurId:s,status:"vente-cva"===n,emprunterId:j,dateCom:null!=q?q:N},"add-from-magasin")),h(Nl()),m.push(L))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){v.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),h(xs()),h(Nl())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},xd=new Date;function vd(){var e=Object(r.useState)({hours:xd.getHours(),minutes:xd.getMinutes(),seconds:xd.getSeconds()}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Date;c({hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()})}),1e3);return function(){return clearInterval(e)}}),[]),Object(x.jsxs)("div",{className:"bg-dark py-1 px-4 text-center",children:[Object(x.jsxs)("h1",{style:{fontSize:"20px"},children:[n.hours," : ",n.minutes," : ",n.seconds]}),Object(x.jsx)("h4",{className:"bg-thead p-1",children:ge(xd)})]})}var hd=a.a.memo(vd,le.reactFastCompare),pd=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("products").meta),n=Object(se.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(2),d=Object(O.a)(l,2),o=(d[0],d[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1];Object(r.useEffect)((function(){n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e.filter((function(e){return!Pi(e)})))}),[t]),Object(r.useEffect)((function(){p(br(e.filter((function(e){return!Pi(e)})),i))}),[i]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"bg-dark text-white py-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsx)(or.a,{children:Object(x.jsxs)("div",{className:"py-2",children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{children:Object(x.jsx)(hd,{})}),Object(x.jsx)("div",{className:"bg-thead"})]}),Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsxs)(_c.a,{className:"mt-2",children:[Object(x.jsxs)(_c.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(Jc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(ld,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Od,{setRegenerate:b})})})]})]})})]})},fd=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(pd,{})})},gd=function(e){var t,n=e.product,c=Object(se.d)((function(e){return e.frommagasins})),r=Object(se.c)(),i=id(c,r),s=i.isItemFromMagasin,l=i.addFromMagasin,d=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);a.a.useCallback((function(){return ua(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&d?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"mt-3 ".concat(d?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){l&&l(n)},children:d?"Retirer":"Ajouter"})})})]})})})},Nd=a.a.memo(gd),yd=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(se.c)()),r=function(e){c(yl(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,defaultValue:ua(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA,onChange:function(e){""==e?(n(ua(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA),r(ua(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA)):(n(e),r(e))},children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Cd=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(se.c)()),a=Object(r.useRef)(),i=(Object(se.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){c(ql(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,ref:a,bg:"whitesmoke",defaultValue:t.quantityCCCVA,onChange:function(e){""==e?(i(t.quantityCCCVA),n(t.quantityCCCVA)):(n(1*e),i(1*e))},min:0,max:qi(t)?null===t||void 0===t?void 0:t.condml:null===t||void 0===t?void 0:t.doseDefault,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},qd=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(se.c)());return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){c(oi(t.id,e))}(e),n(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Ad=function(e){var t=e.product,n=Object(se.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){!function(e){n(ji(t.id,e))}(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Sd=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(se.c)());return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){c(ui(t.id,e))}(e),n(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Ed=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt,e.realQtt,e.realQttCC,Object(se.c)()),c=function(e){n(Cl(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,defaultValue:null===t||void 0===t?void 0:t.quantityBruteCVA,onChange:function(e){c(""==e?0:e)},children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},wd=function(e){var t,n=e.product,c=Object(r.useState)(null),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(null),d=Object(O.a)(l,2),o=d[0],u=d[1],j=Object(se.d)((function(e){return e.frommagasins})),b=Object(se.c)(),m=id(j,b),v=m.isItemFromMagasin,h=m.addFromMagasin,p=!!v&&v(n.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]}),0!==n.condml&&0!==n.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Ed,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:n.type}),Object(x.jsx)(yd,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i})]}),"FLACON"===n.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==n.categoryId?"DOSE":"ML"}),Ce(n.name,"ita new")&&Object(x.jsx)(qd,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i}),Ce(n.name,"sovax")&&Object(x.jsx)(Sd,{setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i,product:n}),0==n.condml&&0==n.qttccpvente&&!Ce(n.name,"sovax")&&!Ce(n.name,"ita new")&&Object(x.jsx)(Cd,{setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i,product:n}),0!==n.condml&&0!==n.qttccpvente&&Object(x.jsx)(Ad,{product:n})]}),Object(x.jsx)("div",{className:"ml-2",children:p&&Object(x.jsx)("button",{onClick:function(){h&&h(n)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},Pd=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=(t[1],Object(r.useState)(1)),a=Object(O.a)(c,2),i=(a[0],a[1],Object(r.useState)(null)),s=Object(O.a)(i,2),l=s[0],d=(s[1],Object(r.useState)(null)),u=Object(O.a)(d,2),j=u[0],b=u[1],m=Object(o.g)(),v=Object(se.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,h=Object(se.c)(),p=Object(se.d)(pn("emprunters").value),f=(Object(se.d)(pn("commandes").meta),Object(se.d)(pn("commandes").value),new Date),g=Object(r.useState)(f),N=Object(O.a)(g,2),y=N[0],C=N[1];Object(r.useEffect)((function(){h(hn("commandes").fetch()),h(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsx)(_c.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{style:{width:"60%"},children:["Correction("," ".concat(null===v||void 0===v?void 0:v.length," ").concat((null===v||void 0===v?void 0:v.length)>1?"articles":"article"),")"]})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(_c.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de correction :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return C(e.target.value)},value:y,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){b(e.target.value)},children:[Object(x.jsx)("option",{value:""}),p.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===v||void 0===v?void 0:v.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:bd.fromMagasin.emptyOrder}),null===v||void 0===v?void 0:v.map((function(e,t){return Object(x.jsx)(wd,{product:e,basket:v,dispatch:h},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===v||void 0===v?void 0:v.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"}}),Object(x.jsx)("div",{style:{width:"70%"},children:v.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===v.length,onClick:function(){h(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:v,commande:v,type:"correction-cva",sorte:"sortie",vaccinateurId:l,status:!0,emprunterId:j,dateCom:null!=y?y:f},"add-to-correction")),h(Nl()),m.push(Y)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){v.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),h(xs()),h(Nl())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})};function Vd(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("products").meta),n=Object(se.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(2),d=Object(O.a)(l,2),o=(d[0],d[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1];Object(r.useEffect)((function(){n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e)}),[t]),Object(r.useEffect)((function(){p(br(e,i))}),[i]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Correction",children:Object(x.jsx)(be,{title:"Correction"})}),Object(x.jsx)(ve,{children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsxs)(_c.a,{className:"mt-2",children:[Object(x.jsxs)(_c.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(Jc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(Nd,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Pd,{setRegenerate:b})})})]})})]})}var Rd=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Fd=function(){var e=Object(se.d)((function(e){return e.searchbydate}));console.log(e);var t=Object(r.useState)([e.deb,e.fin]),n=Object(O.a)(t,2),c=n[0],i=n[1],s=(Object(r.useRef)(null),Object(r.useRef)(null),Object(se.d)(pn("commandes").value)),l=Object(se.d)(pn("commandes").meta),o=Object(se.c)();Object(r.useEffect)((function(){var t,n;o((t=e.deb,n=e.fin,dn("commandes",{path:"/vente-correction?deb=".concat(t,"&fin=").concat(n),replace:!0})))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==c&&c[0]&&o(Os(c[0],c[1]))}),[c]);var u=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",ge(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Rd(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" ","  "]})]})}))]})}},{Header:"Actions",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.b,{to:"/detailcorrection/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"})})}}]}),[]);return Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Historique de correction",children:Object(x.jsx)(be,{title:"Historique de correction"})}),Object(x.jsxs)(ve,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de correction"}),Object(x.jsx)("p",{children:"".concat(ge(e.deb)," ->  ").concat(ge(e.fin))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(Or.a,{locale:"fr-FR",onChange:i,value:c})})," "]}),Object(x.jsx)(Yc,{data:s.sort((function(e,t){return t.id-e.id})),meta:l,columns:u})]})]})};var Dd=Object(o.j)((function(e){Object(o.h)();var t,n,c=Object(o.i)().id,a=Object(se.d)(pn("commandes").value),i=Object(se.c)();return Object(r.useEffect)((function(){i(hn("commandes").get(c))}),[c]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Historique de correction",children:Object(x.jsx)(be,{title:"Historique de correction"})}),Object(x.jsx)(ve,{children:Object(x.jsxs)("div",{children:[a.length>0&&Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",ge(null===(t=a[0])||void 0===t?void 0:t.dateCom)]})})}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),a.length>0&&(null===(n=a[0])||void 0===n?void 0:n.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[0!=e.qttbybrute&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsx)("strong",{className:"text-lowercase",children:"Depot:"}),Ne(e.prixVente)," (","x"," ",e.qttbybrute,") "," = ",Ne(e.prixVente*e.qttbybrute)]}),ua(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),Ne(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",Ne(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),Ne(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",Ne(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",Ne(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",Ne(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:ua(e)?Ne(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre+e.prixParCC*e.qttByCC):Ne(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})})]})}));function Bd(){return Sr.a().shape({nom:Sr.b().required("Le champ est requis")})}var Md=function(){Object(se.d)(pn("fournisseurs").value);var e=Object(se.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Ajouter un fournisseur",children:Object(x.jsx)(be,{title:"Ajouter un fournisseur"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-fournisseur",enableReinitialize:!0,initialValues:{name:""},validations:Bd,onSubmit:function(n,c){var r=n.name;e(hn("fournisseurs").create({name:r})),t.push(K)},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Td=function(){var e=Object(o.i)().id,t=Object(se.d)(pn("fournisseurs").value),n=Object(se.d)(pn("fournisseurs").meta),c=Object(r.useState)({name:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(o.g)(),d=Object(se.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){d(hn("fournisseurs").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Editer un fournisseur",children:Object(x.jsx)(be,{title:"Editer un fournisseur"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-fournisseur",initialValues:{name:i.name},validations:Bd,onSubmit:function(e,t){var n=e.name;d(hn("fournisseurs").update({id:i.id,name:n})),l.push(K)},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function kd(){return Sr.a().shape({nom:Sr.b().required("Le champ est requis")})}var Id=function(){Object(se.d)(pn("categories").value);var e=Object(se.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Ajouter un categorie",children:Object(x.jsx)(be,{title:"Ajouter un categorie"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-categorie",enableReinitialize:!0,initialValues:{name:""},validations:kd,onSubmit:function(n,c){var r=n.name;e(hn("categories").create({name:r})),t.push(W)},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var _d=function(){var e=Object(o.i)().id,t=Object(se.d)(pn("categories").value),n=Object(se.d)(pn("categories").meta),c=Object(r.useState)({name:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(o.g)(),d=Object(se.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){d(hn("categories").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Editer un categorie",children:Object(x.jsx)(be,{title:"Editer un categorie"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-categorie",initialValues:{name:i.name},validations:kd,onSubmit:function(e,t){var n=e.name;d(hn("categories").update({id:i.id,name:n})),l.push(W)},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function Qd(){return Sr.a().shape({nom:Sr.b().required("Le champ est requis")})}var Ld=function(){Object(se.d)(pn("emprunters").value);var e=Object(se.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Ajouter un personne",children:Object(x.jsx)(be,{title:"Ajouter un personne"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-emprunters",enableReinitialize:!0,initialValues:{name:"",contact:""},validations:Qd,onSubmit:function(n,c){var r=n.name,a=n.contact;e(hn("emprunters").create({name:r,contact:a})),t.goBack()},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Hd=function(){var e=Object(o.i)().id,t=Object(se.d)(pn("emprunters").value),n=Object(se.d)(pn("emprunters").meta),c=Object(r.useState)({name:"",contact:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(o.g)(),d=Object(se.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){d(hn("emprunters").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Editer une personne",children:Object(x.jsx)(be,{title:"Editer une personne"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-emprunteur",initialValues:{name:null===i||void 0===i?void 0:i.name,contact:null===i||void 0===i?void 0:i.contact},validations:Qd,onSubmit:function(e,t){var n=e.name,c=e.contact;d(hn("emprunters").update({id:i.id,name:n,conact:c})),l.goBack()},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",value:null===t||void 0===t?void 0:t.contact,label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function Ud(){return Sr.a().shape({nom:Sr.b().required("Le champ est requis")})}var Yd=function(){Object(se.d)(pn("vaccinateurs").value);var e=Object(se.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Ajouter un vaccinateur",children:Object(x.jsx)(be,{title:"Ajouter un vaccinateur"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-vaccinateurs",enableReinitialize:!0,initialValues:{name:"",contact:""},validations:Ud,onSubmit:function(n,c){var r=n.name,a=n.contact;e(hn("vaccinateurs").create({name:r,contact:a})),t.goBack()},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var zd=function(){var e=Object(o.i)().id,t=Object(se.d)(pn("vaccinateurs").value),n=Object(se.d)(pn("vaccinateurs").meta),c=Object(r.useState)({name:"",contact:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(o.g)(),d=Object(se.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){d(hn("vaccinateurs").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Editer un vaccinateur",children:Object(x.jsx)(be,{title:"Editer un vaccinateur"})}),Object(x.jsx)(ve,{children:Object(x.jsx)(Mc,{id:"add-form-vaccinateur",initialValues:{name:i.name,contact:i.contact},validations:Ud,onSubmit:function(e,t){var n=e.name,c=e.contact;d(hn("vaccinateurs").update({id:i.id,name:n,conact:c})),l.goBack()},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",value:null===t||void 0===t?void 0:t.contact,label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})},Kd=function(e){var t,n=e.product,c=Object(se.d)((function(e){return e.frommagasins})),r=Object(se.c)(),i=id(c,r),s=i.isItemFromMagasin,l=i.addFromMagasin,d=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);a.a.useCallback((function(){return ua(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Jc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&d?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{disabled:Cs(n),className:"mt-3 ".concat(d?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){l&&l(n)},children:d?"Retirer":"Ajouter"})})})]})})})},Gd=a.a.memo(Kd),Wd=function(e){var t=e.product,n=e.setRealQtt,c=(e.maxRealQtt,e.realQtt),r=Object(se.c)(),a=function(e){r(yl(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,onChange:function(e){""==e?(n(0),a(0)):(n(e),a(e))},children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Jd=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.setMaxRealQttCC,e.maxRealQttCC,e.realQtt,e.realQttCC),a=Object(se.c)(),i=(Object(r.useRef)(),Object(se.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){a(ql(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(n(1*e),i(1*e))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Xd=function(e){var t=e.product,n=e.setRealQttLitre,c=e.realQttLitre,r=e.maxRealQttByLitre,a=Object(se.c)(),i=function(e){a(Cl(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Sc.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:c,defaultValue:0,onChange:function(e){""==e?(n(0),i(0)):(n(Number(e)),i(Number(e)))},max:r,children:[Object(x.jsx)(Sc.d,{}),Object(x.jsxs)(Sc.e,{children:[Object(x.jsx)(Sc.b,{}),Object(x.jsx)(Sc.a,{})]})]})})},Zd=function(e){var t=e.product,n=Object(r.useState)(null===t||void 0===t?void 0:t.qttByCC),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null===t||void 0===t?void 0:t.quantityParProduct),l=Object(O.a)(s,2),d=l[0],o=l[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),b=j[0],m=j[1],v=Object(r.useState)(2e3),h=Object(O.a)(v,2),p=h[0],f=h[1],g=Object(r.useState)(2e3),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(r.useState)(2e3),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(se.d)((function(e){return e.frommagasins})),P=Object(se.c)(),V=id(w,P),R=V.isItemFromMagasin,F=V.addFromMagasin;Object(r.useEffect)((function(){var e=function(e,t,n,c){var r=!1;if(ps(c)){r=!0;var a=e,i=t,s=n,l=c.condval,d=c.quantityCCCVA,o=c.quantityBruteCVA,u=c.condsize,j=c.doseDefault,b=c.condml,m=!0;if(s>0&&0==a&&0==i&&s>o&&(m=!1,l=a,d=i),0==s&&a>0&&0==i){var O=0;Number(a)>Number(u)&&(O=Math.floor(Number(a)/Number(u)),l-(Number(a)-Number(u)*O)<0&&(O+=1)),o-O<0&&(m=!1,o=s,d=i)}if(0==s&&0==a&&i>0&&d-i<0){var x=0,v=0;Number(i)>Number(j)&&(x=Math.floor(Number(i)/Number(j)),d-(Number(i)-Number(j)*x)<0&&(x+=1)),Number(x)>Number(u)&&(v=Math.floor(Number(x)/Number(u)),l-(Number(x)-Number(u)*x)<0&&(v+=1)),o-v<0&&(m=!1,o=s,l=a)}if(0==s&&a>0&&i>0){var h=0,p=0;Number(i)>Number(b)?(h=Math.floor(Number(i)/Number(b)),d-(Number(i)-Number(b)*h)<0&&(h+=1)):d-Number(i)<0&&(h=1);var f=Number(a)+h;f>Number(u)?(p=Math.floor(f/Number(u)),l-(f-Number(u)*p)<0&&(p+=1)):l-f<0&&(p=1),o-p<0&&(m=!1,o=s,l=a)}if(s>0&&a>0&&0==i){var g=0;Number(a)>Number(u)?(g=Math.floor(Number(a)/Number(u)),l-(Number(a)-Number(u)*g+a)<0&&(g+=1)):l-Number(a)<0&&(g=1),o-(g+s)<0&&(m=!1,o=s,l=a)}if(s>0&&0==a&&i>0){var N=0,y=0;Number(i)>Number(b)?(N=Math.floor(Number(i)/Number(b)),d-(Number(i)-Number(b)*N)<0&&(N+=1)):d-Number(i)<0&&(N=1),Number(N)>Number(u)?(y=Math.floor(Number(N)/Number(u)),l-(Number(N)-Number(u)*y)<0&&(y+=1)):l-N<0&&(y=1),o-(y+s)<0&&(m=!1,l=a)}if(s>0&&a>0&&i>0){var C=0,q=0;Number(i)>Number(b)?(C=Math.floor(Number(i)/Number(b)),d-(Number(i)-Number(b)*C)<0&&(C+=1)):d-Number(i)<0&&(C=1);var A=Number(C)+Number(a);A>Number(u)?(q=Math.floor(A/Number(u)),l-(A-Number(u)*q)<0&&(q+=1)):l-A<0&&(q=1),o-(q+s)<0&&(m=!1)}return{normalQtt:l,normalQttCC:d,normalQttLitre:o,isSpecific:r,isValid:m}}var S=e,E=t,w=c.quantityBruteCVA,P=c.quantityCCCVA,V=c.doseDefault,R=c.quantityBruteCVA;r=!1;var F=!0;if(0==S&&E>0){var D=0,B=0;Number(E)>Number(V)?(D=Math.floor(Number(E)/Number(V)),B=Number(E)-Number(V)*D,console.log(B),P-B<0&&(D+=1)):P-Number(E)<0&&(D=1),E>P&&w-D<0&&(F=!1,w=S)}if(S>0&&0==E&&S>w&&(F=!1,P=E),S>0&&E>0){var M,T=0;Number(E)>Number(V)?(M=Math.floor(Number(E)/Number(V)),T=Number(E)-Number(V)*M,console.log(T),P-T<0&&(M+=1)):P-Number(E)<0&&(M=1),Number(w)-(Number(M)+Number(S))<0&&(F=!1),S>w&&(F=!1,P=E)}return{normalQtt:w,normalQttCC:P,normalQttLitre:R,isValid:F,isSpecific:r}}(d,a,b,t),n=e.normalQtt,c=e.normalQttCC,r=e.normalQttLitre,s=e.isSpecific;e.isValid||(alert("stock insuffisant :("),s?(m(r),E(r),o(n),f(n),i(c),C(c)):(o(n),f(n),i(c),C(c)))}),[d,a,b]);var D=!!R&&R(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),ps(t)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixlitre)+" x "+t.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixqttccvente*t.qttccpvente)+" x "+t.quantityParProduct+" "+t.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixVente)+" x "+t.quantityParProduct+" "+t.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:Ne(t.prixParCC)+" x "+t.qttByCC+" ML"})})})]}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Xd,{product:t,setRealQttLitre:m,realQttLitre:b,maxRealQttByLitre:S})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(Wd,{product:t,setRealQtt:o,setMaxRealQtt:f,maxRealQtt:p,realQtt:d})]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==t.categoryId?"DOSE":"ML"}),Ce(t.name,"ita new")&&Object(x.jsx)(Il,{product:t,setRealQttCC:i,realQttCC:a}),Ce(t.name,"sovax")&&Object(x.jsx)(Ql,{setRealQttCC:i,realQttCC:a,product:t}),0==t.condml&&0==t.qttccpvente&&!Ce(t.name,"sovax")&&!Ce(t.name,"ita new")&&Object(x.jsx)(Jd,{setRealQttCC:i,realQttCC:a,maxRealQttCC:y,product:t}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsx)(_l,{product:t,setRealQttCC:i,realQttCC:a,maxRealQttCC:y})]}),Object(x.jsx)("div",{className:"ml-2",children:D&&Object(x.jsx)("button",{onClick:function(){F&&F(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},$d=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},eo=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],l=(i[1],Object(r.useState)(null)),u=Object(O.a)(l,2),j=u[0],b=u[1],m=Object(o.g)(),v=Object(se.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,h=Object(se.c)(),p=Object(se.d)(pn("emprunters").value),f=Object(r.useState)(!1),g=Object(O.a)(f,2),N=(g[0],g[1],new Date),y=Object(r.useState)(N),C=Object(O.a)(y,2),q=C[0],A=C[1];Object(r.useEffect)((function(){h(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(_c.a,{children:[Object(x.jsxs)(_c.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"60%"},children:["BON DE SORTIE ("," ".concat(null===v||void 0===v?void 0:v.length," ").concat((null===v||void 0===v?void 0:v.length)>1?"articles":"article"),")"]}),Object(x.jsx)("div",{style:{width:"40%"},className:"text-right",children:Object(x.jsxs)("select",{className:"form-control input-sm",onChange:function(e){c(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-cva",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"credit-cva",children:"Credit"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(_c.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)(d.b,{className:"btn btn-danger mb-2 mr-2 btn-sm",to:"/historique/vente/vendeur/credit-cva",children:"CREDITS"}),Object(x.jsx)(d.b,{className:"btn btn-primary mb-2 btn-sm text-uppercase",to:"/historique/vente/vendeur/vente-cva",children:"Voir l'historique de vente"})]}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return A(e.target.value)},value:q,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){b(e.target.value)},children:[Object(x.jsx)("option",{value:""}),p.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===v||void 0===v?void 0:v.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:bd.fromMagasin.emptyOrder}),null===v||void 0===v?void 0:v.map((function(e,t){return Object(x.jsx)(Zd,{product:e,basket:v,dispatch:h},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===v||void 0===v?void 0:v.length)>0&&Object(x.jsxs)(_c.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",Ne($d(v.map((function(e){return ua(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+$d(v.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:v.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===v.length,onClick:function(){qs(v)?alert("commande non-conforme,veuillez verifier!!"):(v.forEach((function(e){!function(e){if(Yl(e)){var t=e.quantityParProduct,n=e.qttByCC,c=e.qttbylitre,r=e.condval,a=e.quantityCCCVA,i=e.condsize,s=(e.doseDefault,e.condml);if(c>0&&0==t&&0==n&&(e.quantityBruteCVA-=c),0==c&&t>0&&0==n){var l=0,d=0;if(Number(t)>=Number(i))if(l=Math.floor(Number(t)/Number(i)),r-(d=Number(t)-Number(i)*l)<0){var o=Number(d)-Number(r);e.condval=Number(i)-Number(o),l+=1}else e.condval=r-d;else if(e.condval-Number(t)<0){var u=Number(t)-Number(e.condval),j=Number(i)-Number(u);e.condval=j,l+=1}else e.condval-=Number(t);e.quantityBruteCVA-=l}if(0==c&&0==t&&n>0){var b=0,m=0,O=0,x=0;if(Number(n)>=Number(s))if(b=Math.floor(Number(n)/Number(s)),a-(x=Number(n)-Number(s)*b)<0){var v=Number(x)-Number(a);e.quantityCCCVA=Number(s)-Number(v),b+=1}else e.quantityCCCVA=a-x;else if(Number(n)>=e.quantityCCCVA){b+=1;var h=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-h}else e.quantityCCCVA-=Number(n);if(Number(b)>=Number(i))if(m=Math.floor(Number(b)/Number(i)),r-(O=Number(b)-Number(i)*O)<0){var p=Number(O)-Number(r);e.condval=Number(i)-Number(p),m+=1}else e.condval=r-O;else if(e.condval-Number(b)<0){var f=Number(b)-Number(e.condval),g=Number(i)-Number(f);e.condval=g,m+=1}else e.condval-=Number(b);e.quantityBruteCVA-=m}if(0==c&&t>0&&n>0){var N=0,y=0,C=0,q=0;if(Number(n)>=Number(s))if(N=Math.floor(Number(n)/Number(s)),a-(q=Number(n)-Number(s)*N)<0){var A=Number(q)-Number(a);e.quantityCCCVA=Number(s)-Number(A),N+=1}else e.quantityCCCVA=Number(a)-q;else if(Number(n)>=e.quantityCCCVA){N+=1;var S=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-S}else e.quantityCCCVA-=Number(n);var E=Number(t)+N;if(E>=Number(i))if(y=Math.floor(E/Number(i)),r-(C=E-Number(i)*N)<0){var w=Number(C)-Number(r);e.condval=Number(i)-Number(w),y+=1}else e.condval=r-C;else if(e.condval-Number(E)<0){var P=Number(E)-Number(e.condval),V=Number(i)-Number(P);e.condval=V,y+=1}else e.condval-=Number(E);e.quantityBruteCVA-=y}if(c>0&&t>0&&0==n){var R=0,F=0;if(Number(t)>=Number(i))if(R=Math.floor(Number(t)/Number(i)),r-(F=Number(t)-Number(i)*R)<0){var D=Number(F)-Number(r);e.condval=Number(i)-Number(D),R+=1}else e.condval=r-F;else if(e.condval-Number(t)<0){var B=Number(t)-Number(e.condval),M=Number(i)-Number(B);e.condval=M,R+=1}else e.condval-=Number(t);e.quantityBruteCVA-=R+c}if(c>0&&0==t&&n>0){var T=0,k=0,I=0,_=0;if(Number(n)>=Number(s))if(T=Math.floor(Number(n)/Number(s)),a-(_=Number(n)-Number(s)*T)<0){var Q=Number(_)-Number(a);e.quantityCCCVA=Number(s)-Number(Q),T+=1}else e.quantityCCCVA=a-_;else if(Number(n)>=e.quantityCCCVA){T+=1;var L=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-L}else e.quantityCCCVA-=Number(n);if(Number(T)>=Number(i))if(k=Math.floor(Number(T)/Number(i)),r-(I=Number(T)-Number(i)*k)<0){var H=Number(I)-Number(r);e.condval=Number(i)-Number(H),k+=1}else e.condval=r-_;else if(e.condval-Number(T)<0){var U=Number(T)-Number(e.condval),Y=Number(i)-Number(U);e.condval=Y,k+=1}else e.condval-=Number(T);e.quantityBruteCVA-=k+c}if(c>0&&t>0&&n>0){var z=0,K=0,G=0,W=0;if(Number(n)>=Number(s))if(z=Math.floor(Number(n)/Number(s)),a-(W=Number(n)-Number(s)*z)<0){var J=Number(W)-Number(a);e.quantityCCCVA=Number(s)-Number(J),z+=1}else e.quantityCCCVA=a-W;else if(Number(n)>=e.quantityCCCVA){z+=1;var X=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-X}else e.quantityCCCVA-=Number(n);var Z=Number(z)+Number(t);if(Z>=Number(i))if(K=Math.floor(Z/Number(i)),r-(G=Z-Number(i)*K)<0){var $=Number(G)-Number(r);e.condval=Number(i)-Number($),K+=1}else e.condval=r-W;else if(e.condval-Number(Z)<0){var ee=Number(Z)-Number(e.condval),te=Number(i)-Number(ee);e.condval=te,K+=1}else e.condval-=Number(Z);e.quantityBruteCVA-=K+c}}else{var ne=e.quantityParProduct,ce=e.qttByCC,re=(e.quantityBruteCVA,e.quantityCCCVA),ae=e.doseDefault;if(0==ne&&ce>0){var ie=0,se=0;if(Number(ce)>=Number(ae))if(ie=Math.floor(Number(ce)/Number(ae)),re-(se=Number(ce)-Number(ae)*ie)<0){var le=Number(se)-Number(re);e.quantityCCCVA=Number(ae)-Number(le),ie+=1}else e.quantityCCCVA=Number(re)-se;else if(e.quantityCCCVA-Number(ce)<0){var de=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(de),ie+=1}else e.quantityCCCVA-=Number(ce);console.log(ie),e.quantityBruteCVA-=ie}if(ne>0&&0==ce&&(e.quantityBruteCVA-=ne),ne>0&&ce>0){var oe=0,ue=0;if(Number(ce)>=Number(ae))if(oe=Math.floor(Number(ce)/Number(ae)),re-(ue=Number(ce)-Number(ae)*oe)<0){var je=Number(ue)-Number(re);e.quantityCCCVA=Number(ae)-Number(je),oe+=1}else e.quantityCCCVA=Number(re)-ue;else if(e.quantityCCCVA-Number(ce)<0){var be=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(be),oe+=1}else e.quantityCCCVA-=Number(ce);var me=oe+Number(ne);e.quantityBruteCVA-=me}}}(e)})),h(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:v,type:n,sorte:"sortie",vaccinateurId:s,status:"vente-cva"===n,emprunterId:j,dateCom:null!=q?q:N},"add-from-magasin")),h(Nl()),m.push(L))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){v.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),h(xs()),h(Nl())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},to=new Date;function no(){var e=Object(r.useState)({hours:to.getHours(),minutes:to.getMinutes(),seconds:to.getSeconds()}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Date;c({hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()})}),1e3);return function(){return clearInterval(e)}}),[]),Object(x.jsxs)("div",{className:"bg-dark py-1 px-4 text-center",children:[Object(x.jsxs)("h1",{style:{fontSize:"20px"},children:[n.hours," : ",n.minutes," : ",n.seconds]}),Object(x.jsx)("h4",{className:"bg-thead p-1",children:ge(to)})]})}le.reactFastCompare;var co=function(){var e=Object(se.d)(pn("products").value),t=Object(se.d)(pn("products").meta),n=Object(se.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],l=Object(r.useState)(2),d=Object(O.a)(l,2),o=(d[0],d[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),v=Object(O.a)(m,2),h=v[0],p=v[1];Object(r.useEffect)((function(){n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e.filter((function(e){return!Cs(e)})))}),[t]),Object(r.useEffect)((function(){p(br(e.filter((function(e){return!Cs(e)})),i))}),[i]);return Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)(Oe,{children:[Object(x.jsx)(ue,{title:"Vente du magasin",children:Object(x.jsx)(be,{title:"Vente du magasin"})}),Object(x.jsx)(ve,{children:Object(x.jsxs)(Xc.a,{children:[Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsxs)(_c.a,{className:"mt-2",children:[Object(x.jsxs)(_c.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(_c.a.Body,{children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(Jc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[h.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(Gd,{product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Zc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(eo,{setRegenerate:b})})})]})})]})]})},ro=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(co,{})})};var ao,io=function(){return Object(se.c)(),Object(x.jsx)(d.a,{basename:"/index.html",children:Object(x.jsxs)(o.d,{children:[Object(x.jsx)(Is,{path:"/",exact:!0,component:Cn}),Object(x.jsx)(Is,{path:g,component:rl}),Object(x.jsx)(Is,{path:f,component:dl}),Object(x.jsx)(Is,{path:p,component:ul}),Object(x.jsx)(Ki,{path:I,component:fd}),Object(x.jsx)(Ki,{path:"/detailvendeur/:id",component:Fs}),Object(x.jsx)(Ki,{path:"/vendeur-commande/:id",component:Bl}),Object(x.jsx)(Ki,{path:L,component:hs}),Object(x.jsx)(Is,{path:"/vendre/in/admin",component:ro}),Object(x.jsx)(Is,{path:"/detailvendeuradmin/:id",component:Bs}),Object(x.jsx)(Is,{path:"/vendeur-admin-commande/:id",component:Xl}),Object(x.jsx)(Is,{path:te,component:Es}),Object(x.jsx)(Is,{path:"/approv",component:Mn}),Object(x.jsx)(Is,{path:C,component:Ar}),Object(x.jsx)(Is,{path:"/para/suppl",component:qr}),Object(x.jsx)(Is,{path:y,component:Ir}),Object(x.jsx)(Is,{path:"/bon-commande-depot",component:$s}),Object(x.jsx)(Is,{path:"/product/edit/:id",component:Mr}),Object(x.jsx)(Is,{path:N,component:Dr}),Object(x.jsx)(Is,{path:"/journal",component:Cr}),Object(x.jsx)(Is,{path:q,component:Lr}),Object(x.jsx)(Is,{path:A,component:vr}),Object(x.jsx)(Is,{path:w,component:Fa}),Object(x.jsx)(Is,{path:S,component:hr}),Object(x.jsx)(Is,{path:E,component:yr}),Object(x.jsx)(Is,{path:D,component:$s}),Object(x.jsx)(Is,{path:P,component:Qr}),Object(x.jsx)(Is,{path:V,component:_r}),Object(x.jsx)(Is,{path:F,component:Da}),Object(x.jsx)(Is,{path:"/editer/commande/:id",component:Mi}),Object(x.jsx)(Is,{path:R,component:Ur}),Object(x.jsx)(Is,{path:"/detail/:id",component:fr}),Object(x.jsx)(Is,{path:"/depot/detail/:id",exact:!0,component:Nr}),Object(x.jsx)(Is,{path:"/product/detail/:id",component:Br}),Object(x.jsx)(Is,{path:"/b/sortie",component:Wc}),Object(x.jsx)(Is,{path:"/add/prod",component:Tc}),Object(x.jsx)(Is,{path:B,component:Aa}),Object(x.jsx)(Is,{path:"/editer/facture/:id",exact:!0,component:Gs}),Object(x.jsx)(Is,{path:M,component:Gc}),Object(x.jsx)(Is,{path:"/approvis/detail/:id",exact:!0,component:Qc}),Object(x.jsx)(Is,{path:T,component:Hi}),Object(x.jsx)(Is,{path:k,component:Ui}),Object(x.jsx)(Is,{path:_,component:ls}),Object(x.jsx)(Is,{path:"/depot/to/magasin/edit/:id",component:ad}),Object(x.jsx)(Is,{path:Q,component:us}),Object(x.jsx)(Is,{path:"/depot/to/magasin/detail/:id",component:ml}),Object(x.jsx)(Is,{path:U,component:ws}),Object(x.jsx)(Is,{path:H,component:Vs}),Object(x.jsx)(Is,{path:"/magasin/detail/vente/:id",component:xl}),Object(x.jsx)(Is,{path:Y,component:Vd}),Object(x.jsx)(Is,{path:z,component:Fd}),Object(x.jsx)(Is,{path:"/detailcorrection/:id",component:Dd}),Object(x.jsx)(Is,{path:K,component:Pa}),Object(x.jsx)(Is,{path:G,component:Md}),Object(x.jsx)(Is,{path:"/fournisseurs/edit/:id",component:Td}),Object(x.jsx)(Is,{path:W,component:wa}),Object(x.jsx)(Is,{path:J,component:Id}),Object(x.jsx)(Is,{path:"/categories/edit/:id",component:_d}),Object(x.jsx)(Is,{path:X,component:Ra}),Object(x.jsx)(Is,{path:Z,component:Ld}),Object(x.jsx)(Is,{path:"/emprunters/edit/:id",component:Hd}),Object(x.jsx)(Is,{path:$,component:Va}),Object(x.jsx)(Is,{path:ee,component:Yd}),Object(x.jsx)(Is,{path:"/vaccinateurs/edit/:id",component:zd})]})})},so=(c(933),c(506)),lo=vn("products",{key:"id"}),oo=JSON.parse(localStorage.getItem("user")),uo=oo?{isLoggedIn:!0,user:oo}:{isLoggedIn:!1,user:null},jo=vn("commandes"),bo=vn("fournisseurs"),mo=vn("emprunters"),Oo=vn("vaccinateurs"),xo=vn("categories"),vo=vn("approvis"),ho=vn("parametres"),po={shipping:{},payment:{type:"",name:"",cardnumber:"",expiry:"",ccv:""}},fo=vn("sortiedepots"),go=Object(bn.b)({searchbydate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{deb:ie()().isoWeekday(1).startOf("week"),fin:ie()().endOf("week")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bs:return t.payload;case ms:return{deb:ie()().isoWeekday(1).startOf("week"),fin:ie()().endOf("week")};default:return e}},count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{counter:0},t=arguments.length>1?arguments[1]:void 0;return"ADD"===t.type?Object(we.a)(Object(we.a)({},e),{},{counter:e.counter+1}):e},auth:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uo,c=arguments.length>1?arguments[1]:void 0,r=c.type,a=c.payload;switch(r){case En:return Object(we.a)(Object(we.a)({},n),{},{isLoggedIn:!0,user:null===(e=a.user)||void 0===e?void 0:e.user,success:a.success,error:null});case wn:return Object(we.a)(Object(we.a)({},n),{},{isLoggedIn:!1,user:null,success:null,error:a.error});case Pn:return Object(we.a)(Object(we.a)({},n),{},{isLoggedIn:!0,user:null===(t=a.user)||void 0===t?void 0:t.user,success:a.success,error:null});case Vn:return Object(we.a)(Object(we.a)({},n),{},{isLoggedIn:!1,user:null,token:null,success:null,error:a.error});case Rn:return Object(we.a)(Object(we.a)({},n),{},{isLoggedIn:!1,user:null,token:null});default:return n}},products:lo,realproducts:lo,categories:xo,fournisseurs:bo,emprunters:mo,vaccinateurs:Oo,commandes:jo,commandesclone:jo,basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $c:return t.payload;case er:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(re.a)(e));case tr:return e.filter((function(e){return e.id!==t.payload}));case nr:return[];case cr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case ar:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));case rr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg-=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case ir:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC-=1),e.id==t.payload.id&&e.doseRestantEnMg>=e.doseDefault?e.doseRestantEnMg-=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));default:return e}},approvisionnements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gr:return t.payload;case Wr:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(re.a)(e));case Jr:return e.filter((function(e){return e.id!==t.payload}));case Xr:return[];case Zr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e}));case ea:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case $r:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e}));case ta:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));case na:return e.map((function(e){return e.id===t.payload.id&&(e.remise=t.payload.value),e}));case ca:return e.map((function(e){return e.id===t.payload.id&&(e.remisePerProduct=t.payload.value),e}));default:return e}},approvis:vo,fromdepots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ka:return t.payload;case Ia:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(re.a)(e));case _a:return e.filter((function(e){return e.id!==t.payload}));case Qa:return[];case La:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.qtt)),e}));case Ha:case Ka:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCCDepot=Number(t.payload.value)),e}));case Ua:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.value)),e}));case Ya:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value/2),e}));case za:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value*2),e}));case Ga:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCCDepot-=t.payload.qttccpventedepot),e}));default:return e}},stock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=(t.type,t.payload);switch(t.type){case Fn:return Object(we.a)(Object(we.a)({},e),t.payload);case Dn:return n;default:return e}},checkout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:po,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sr:return Object(we.a)(Object(we.a)({},e),{},{shipping:t.payload});case lr:return Object(we.a)(Object(we.a)({},e),{},{payment:t.payload});case dr:return po;default:return e}},parametres:ho,tomagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gi:return t.payload;case Wi:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(re.a)(e));case Ji:return e.filter((function(e){return e.id!==t.payload}));case Xi:return[];case Zi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct+=1),e}));case Zi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case $i:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct-=1),e}));case es:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));default:return e}},frommagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xa:return t.payload;case Za:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(re.a)(e));case $a:return e.filter((function(e){return e.id!==t.payload}));case ei:return[];case ti:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case di:return e.map((function(e){return e.id==t.payload.id&&(e.qttbybrute=Number(t.payload.value)),e}));case ni:case ii:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC=Number(t.payload.value)),e}));case ci:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.value)),e}));case li:return e.map((function(e){return e.id===t.payload.id&&(e.qttbylitre=Number(t.payload.value)),e}));case ri:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value),e}));case ai:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value*2),e}));case si:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCC-=t.payload.qttccpvente),e}));default:return e}},sortiedepots:fo}),No=c(1e3),yo=No.persistStore,Co=(0,No.persistReducer)({key:"root",whitelist:["auth","profile","basket","approvisionnement","searchbydate"],storage:c(934).default},go),qo=Object(bn.c)(Co,(ao=[so.a],bn.a.apply(void 0,Object(re.a)(ao)))),Ao=yo(qo),So=c(507),Eo=c(1051),wo=(c(937),c(938),c(939),c(940),c(1047)),Po=Object(wo.a)({fontSizes:{lg:"18px"},fonts:{heading:"Montserrat",body:"Montserrat"},styles:{global:function(e){return{"html, body":{fontSize:"sm",lineHeight:"tall"}}}},components:{Button:{baseStyle:{fontWeight:"bold"},sizes:{xl:{h:"56px",fontSize:"sm",px:"13px"}},variants:{"with-shadow":{bg:"#2c5282"},solid:function(e){return{bg:(e.colorMode,"#2c5282")}}}}}}),Vo=c(228);s.a.render(Object(Vo.jsx)(Eo.a,{theme:Po,children:Object(Vo.jsx)(se.a,{store:qo,children:Object(Vo.jsx)(So.a,{loading:null,persistor:Ao,children:Object(Vo.jsx)(io,{})})})}),document.getElementById("root")),l()}},[[998,1,2]]]);
//# sourceMappingURL=main.214d4c54.chunk.js.map